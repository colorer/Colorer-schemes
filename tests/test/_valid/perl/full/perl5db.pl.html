   0: <span class='perl-Word def-Keyword'>package</span> <span class='perl-packages-user def-Directive'>DB</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
   1: 
   2: <span class='perl-Comment def-Comment def-Syntax'># Debugger for Perl 5.00x; perl5db.pl patch level:</span>
   3: 
   4: <span class='perl-Var def-Var'>$VERSION</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1.</span><span class='perl-Numb def-Number'>07</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
   5: <span class='perl-Var def-Var'>$header</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"perl5db.pl version </span><span class='perl-Var def-Var'>$VERSION</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
   6: 
   7: <span class='perl-Comment def-Comment def-Syntax'>#</span>
   8: <span class='perl-Comment def-Comment def-Syntax'># This file is automatically included if you do perl -d.</span>
   9: <span class='perl-Comment def-Comment def-Syntax'># It's probably not useful to include this yourself.</span>
  10: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  11: <span class='perl-Comment def-Comment def-Syntax'># Perl supplies the values for %sub.  It effectively inserts</span>
  12: <span class='perl-Comment def-Comment def-Syntax'># a &amp;DB'DB(); in front of every place that can have a</span>
  13: <span class='perl-Comment def-Comment def-Syntax'># breakpoint. Instead of a subroutine call it calls &amp;DB::sub with</span>
  14: <span class='perl-Comment def-Comment def-Syntax'># $DB::sub being the called subroutine. It also inserts a BEGIN</span>
  15: <span class='perl-Comment def-Comment def-Syntax'># {require 'perl5db.pl'} before the first line.</span>
  16: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  17: <span class='perl-Comment def-Comment def-Syntax'># After each `require'd file is compiled, but before it is executed, a</span>
  18: <span class='perl-Comment def-Comment def-Syntax'># call to DB::postponed($main::{'_&lt;'.$filename}) is emulated. Here the</span>
  19: <span class='perl-Comment def-Comment def-Syntax'># $filename is the expanded name of the `require'd file (as found as</span>
  20: <span class='perl-Comment def-Comment def-Syntax'># value of %INC).</span>
  21: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  22: <span class='perl-Comment def-Comment def-Syntax'># Additional services from Perl interpreter:</span>
  23: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  24: <span class='perl-Comment def-Comment def-Syntax'># if caller() is called from the package DB, it provides some</span>
  25: <span class='perl-Comment def-Comment def-Syntax'># additional data.</span>
  26: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  27: <span class='perl-Comment def-Comment def-Syntax'># The array @{$main::{'_&lt;'.$filename}} is the line-by-line contents of</span>
  28: <span class='perl-Comment def-Comment def-Syntax'># $filename.</span>
  29: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  30: <span class='perl-Comment def-Comment def-Syntax'># The hash %{'_&lt;'.$filename} contains breakpoints and action (it is</span>
  31: <span class='perl-Comment def-Comment def-Syntax'># keyed by line number), and individual entries are settable (as</span>
  32: <span class='perl-Comment def-Comment def-Syntax'># opposed to the whole hash). Only true/false is important to the</span>
  33: <span class='perl-Comment def-Comment def-Syntax'># interpreter, though the values used by perl5db.pl have the form</span>
  34: <span class='perl-Comment def-Comment def-Syntax'># "$break_condition\0$action". Values are magical in numeric context.</span>
  35: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  36: <span class='perl-Comment def-Comment def-Syntax'># The scalar ${'_&lt;'.$filename} contains $filename.</span>
  37: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  38: <span class='perl-Comment def-Comment def-Syntax'># Note that no subroutine call is possible until &amp;DB::sub is defined</span>
  39: <span class='perl-Comment def-Comment def-Syntax'># (for subroutines defined outside of the package DB). In fact the same is</span>
  40: <span class='perl-Comment def-Comment def-Syntax'># true if $deep is not defined.</span>
  41: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  42: 
  43: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  44: <span class='perl-Comment def-Comment def-Syntax'># At start reads $rcfile that may set important options.  This file</span>
  45: <span class='perl-Comment def-Comment def-Syntax'># may define a subroutine &amp;afterinit that will be executed after the</span>
  46: <span class='perl-Comment def-Comment def-Syntax'># debugger is initialized.</span>
  47: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  48: <span class='perl-Comment def-Comment def-Syntax'># After $rcfile is read reads environment variable PERLDB_OPTS and parses</span>
  49: <span class='perl-Comment def-Comment def-Syntax'># it as a rest of `O ...' line in debugger prompt.</span>
  50: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  51: <span class='perl-Comment def-Comment def-Syntax'># The options that can be specified only at startup:</span>
  52: <span class='perl-Comment def-Comment def-Syntax'># [To set in $rcfile, call &amp;parse_options("optionName=new_value").]</span>
  53: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  54: <span class='perl-Comment def-Comment def-Syntax'># TTY  - the TTY to use for debugging i/o.</span>
  55: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  56: <span class='perl-Comment def-Comment def-Syntax'># noTTY - if set, goes in NonStop mode.  On interrupt if TTY is not set</span>
  57: <span class='perl-Comment def-Comment def-Syntax'># uses the value of noTTY or "/tmp/perldbtty$$" to find TTY using</span>
  58: <span class='perl-Comment def-Comment def-Syntax'># Term::Rendezvous.  Current variant is to have the name of TTY in this</span>
  59: <span class='perl-Comment def-Comment def-Syntax'># file.</span>
  60: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  61: <span class='perl-Comment def-Comment def-Syntax'># ReadLine - If false, dummy ReadLine is used, so you can debug</span>
  62: <span class='perl-Comment def-Comment def-Syntax'># ReadLine applications.</span>
  63: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  64: <span class='perl-Comment def-Comment def-Syntax'># NonStop - if true, no i/o is performed until interrupt.</span>
  65: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  66: <span class='perl-Comment def-Comment def-Syntax'># LineInfo - file or pipe to print line number info to.  If it is a</span>
  67: <span class='perl-Comment def-Comment def-Syntax'># pipe, a short "emacs like" message is used.</span>
  68: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  69: <span class='perl-Comment def-Comment def-Syntax'># RemotePort - host:port to connect to on remote host for remote debugging.</span>
  70: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  71: <span class='perl-Comment def-Comment def-Syntax'># Example $rcfile: (delete leading hashes!)</span>
  72: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  73: <span class='perl-Comment def-Comment def-Syntax'># &amp;parse_options("NonStop=1 LineInfo=db.out");</span>
  74: <span class='perl-Comment def-Comment def-Syntax'># sub afterinit { $trace = 1; }</span>
  75: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  76: <span class='perl-Comment def-Comment def-Syntax'># The script will run without human intervention, putting trace</span>
  77: <span class='perl-Comment def-Comment def-Syntax'># information into db.out.  (If you interrupt it, you would better</span>
  78: <span class='perl-Comment def-Comment def-Syntax'># reset LineInfo to something "interactive"!)</span>
  79: <span class='perl-Comment def-Comment def-Syntax'>#</span>
  80: <span class='perl-Comment def-Comment def-Syntax'>##################################################################</span>
  81: 
  82: <span class='perl-Comment def-Comment def-Syntax'># Enhanced by </span><span class='def-EMail def-URI'>ilya@math.ohio-state.edu</span><span class='perl-Comment def-Comment def-Syntax'> (Ilya Zakharevich)</span>
  83: <span class='perl-Comment def-Comment def-Syntax'># Latest version available: </span><span class='def-URL def-URI'>ftp://ftp.math.ohio-state.edu/pub/users/ilya/perl</span>
  84: 
  85: <span class='perl-Comment def-Comment def-Syntax'># modified Perl debugger, to be run from Emacs in perldb-mode</span>
  86: <span class='perl-Comment def-Comment def-Syntax'># Ray Lischner (uunet!mntgfx!lisch) as of 5 Nov 1990</span>
  87: <span class='perl-Comment def-Comment def-Syntax'># Johan Vromans -- upgrade to 4.0 pl 10</span>
  88: <span class='perl-Comment def-Comment def-Syntax'># Ilya Zakharevich -- patches after 5.001 (and some before ;-)</span>
  89: 
  90: <span class='perl-Comment def-Comment def-Syntax'># Changelog:</span>
  91: 
  92: <span class='perl-Comment def-Comment def-Syntax'># A lot of things changed after 0.94. First of all, core now informs</span>
  93: <span class='perl-Comment def-Comment def-Syntax'># debugger about entry into XSUBs, overloaded operators, tied operations,</span>
  94: <span class='perl-Comment def-Comment def-Syntax'># BEGIN and END. Handy with `O f=2'.</span>
  95: 
  96: <span class='perl-Comment def-Comment def-Syntax'># This can make debugger a little bit too verbose, please be patient</span>
  97: <span class='perl-Comment def-Comment def-Syntax'># and report your problems promptly.</span>
  98: 
  99: <span class='perl-Comment def-Comment def-Syntax'># Now the option frame has 3 values: 0,1,2.</span>
 100: 
 101: <span class='perl-Comment def-Comment def-Syntax'># Note that if DESTROY returns a reference to the object (or object),</span>
 102: <span class='perl-Comment def-Comment def-Syntax'># the deletion of data may be postponed until the next function call,</span>
 103: <span class='perl-Comment def-Comment def-Syntax'># due to the need to examine the return value.</span>
 104: 
 105: <span class='perl-Comment def-Comment def-Syntax'># Changes: 0.95: `v' command shows versions.</span>
 106: <span class='perl-Comment def-Comment def-Syntax'># Changes: 0.96: `v' command shows version of readline.</span>
 107: <span class='perl-Comment def-Comment def-Syntax'>#    primitive completion works (dynamic variables, subs for `b' and `l',</span>
 108: <span class='perl-Comment def-Comment def-Syntax'>#        options). Can `p %var'</span>
 109: <span class='perl-Comment def-Comment def-Syntax'>#    Better help (`h &lt;' now works). New commands &lt;&lt;, >>, {, {{.</span>
 110: <span class='perl-Comment def-Comment def-Syntax'>#    {dump|print}_trace() coded (to be able to do it from &lt;&lt;cmd).</span>
 111: <span class='perl-Comment def-Comment def-Syntax'>#    `c sub' documented.</span>
 112: <span class='perl-Comment def-Comment def-Syntax'>#    At last enough magic combined to stop after the end of debuggee.</span>
 113: <span class='perl-Comment def-Comment def-Syntax'>#    </span><span class='def-TODO def-Error'>!!</span><span class='perl-Comment def-Comment def-Syntax'> should work now (thanks to Emacs bracket matching an extra</span>
 114: <span class='perl-Comment def-Comment def-Syntax'>#    `]' in a regexp is caught).</span>
 115: <span class='perl-Comment def-Comment def-Syntax'>#    `L', `D' and `A' span files now (as documented).</span>
 116: <span class='perl-Comment def-Comment def-Syntax'>#    Breakpoints in `require'd code are possible (used in `R').</span>
 117: <span class='perl-Comment def-Comment def-Syntax'>#    Some additional words on internal work of debugger.</span>
 118: <span class='perl-Comment def-Comment def-Syntax'>#    `b load filename' implemented.</span>
 119: <span class='perl-Comment def-Comment def-Syntax'>#    `b postpone subr' implemented.</span>
 120: <span class='perl-Comment def-Comment def-Syntax'>#    now only `q' exits debugger (overwriteable on $inhibit_exit).</span>
 121: <span class='perl-Comment def-Comment def-Syntax'>#    When restarting debugger breakpoints/actions persist.</span>
 122: <span class='perl-Comment def-Comment def-Syntax'>#     Buglet: When restarting debugger only one breakpoint/action per </span>
 123: <span class='perl-Comment def-Comment def-Syntax'>#        autoloaded function persists.</span>
 124: <span class='perl-Comment def-Comment def-Syntax'># Changes: 0.97: NonStop will not stop in at_exit().</span>
 125: <span class='perl-Comment def-Comment def-Syntax'>#    Option AutoTrace implemented.</span>
 126: <span class='perl-Comment def-Comment def-Syntax'>#    Trace printed differently if frames are printed too.</span>
 127: <span class='perl-Comment def-Comment def-Syntax'>#    new `inhibitExit' option.</span>
 128: <span class='perl-Comment def-Comment def-Syntax'>#    printing of a very long statement interruptible.</span>
 129: <span class='perl-Comment def-Comment def-Syntax'># Changes: 0.98: New command `m' for printing possible methods</span>
 130: <span class='perl-Comment def-Comment def-Syntax'>#    'l -' is a synonim for `-'.</span>
 131: <span class='perl-Comment def-Comment def-Syntax'>#    Cosmetic bugs in printing stack trace.</span>
 132: <span class='perl-Comment def-Comment def-Syntax'>#    `frame' &amp; 8 to print "expanded args" in stack trace.</span>
 133: <span class='perl-Comment def-Comment def-Syntax'>#    Can list/break in imported subs.</span>
 134: <span class='perl-Comment def-Comment def-Syntax'>#    new `maxTraceLen' option.</span>
 135: <span class='perl-Comment def-Comment def-Syntax'>#    frame &amp; 4 and frame &amp; 8 granted.</span>
 136: <span class='perl-Comment def-Comment def-Syntax'>#    new command `m'</span>
 137: <span class='perl-Comment def-Comment def-Syntax'>#    nonstoppable lines do not have `:' near the line number.</span>
 138: <span class='perl-Comment def-Comment def-Syntax'>#    `b compile subname' implemented.</span>
 139: <span class='perl-Comment def-Comment def-Syntax'>#    Will not use $` any more.</span>
 140: <span class='perl-Comment def-Comment def-Syntax'>#    `-' behaves sane now.</span>
 141: <span class='perl-Comment def-Comment def-Syntax'># Changes: 0.99: Completion for `f', `m'.</span>
 142: <span class='perl-Comment def-Comment def-Syntax'>#    `m' will remove duplicate names instead of duplicate functions.</span>
 143: <span class='perl-Comment def-Comment def-Syntax'>#    `b load' strips trailing whitespace.</span>
 144: <span class='perl-Comment def-Comment def-Syntax'>#    completion ignores leading `|'; takes into account current package</span>
 145: <span class='perl-Comment def-Comment def-Syntax'>#    when completing a subroutine name (same for `l').</span>
 146: <span class='perl-Comment def-Comment def-Syntax'># Changes: 1.07: Many fixed by tchrist 13-March-2000</span>
 147: <span class='perl-Comment def-Comment def-Syntax'>#   </span><span class='def-TODO def-Error'>BUG FIXES:</span>
 148: <span class='perl-Comment def-Comment def-Syntax'>#   + Added bare mimimal security checks on perldb rc files, plus</span>
 149: <span class='perl-Comment def-Comment def-Syntax'>#     comments on what else is needed.</span>
 150: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed the ornaments that made "|h" completely unusable.</span>
 151: <span class='perl-Comment def-Comment def-Syntax'>#     They are not used in print_help if they will hurt.  Strip pod</span>
 152: <span class='perl-Comment def-Comment def-Syntax'>#     if we're paging to less.</span>
 153: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed mis-formatting of help messages caused by ornaments</span>
 154: <span class='perl-Comment def-Comment def-Syntax'>#     to restore Larry's original formatting.  </span>
 155: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed many other formatting errors.  The code is still suboptimal, </span>
 156: <span class='perl-Comment def-Comment def-Syntax'>#     and needs a lot of work at restructuing. It's also misindented</span>
 157: <span class='perl-Comment def-Comment def-Syntax'>#     in many places.</span>
 158: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed </span><span class='def-TODO def-Error'>bug where trying to look at an option like your pager</span>
 159: <span class='perl-Comment def-Comment def-Syntax'>#     shows "1".  </span>
 160: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed some $? processing.  Note: if you use csh or tcsh, you will</span>
 161: <span class='perl-Comment def-Comment def-Syntax'>#     lose.  You should consider shell escapes not using their shell,</span>
 162: <span class='perl-Comment def-Comment def-Syntax'>#     or else not caring about detailed status.  This should really be</span>
 163: <span class='perl-Comment def-Comment def-Syntax'>#     unified into one place, too.</span>
 164: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed </span><span class='def-TODO def-Error'>bug where invisible trailing whitespace on commands hoses you,</span>
 165: <span class='perl-Comment def-Comment def-Syntax'>#     tricking Perl into thinking you wern't calling a debugger command!</span>
 166: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed </span><span class='def-TODO def-Error'>bug where leading whitespace on commands hoses you.  (One</span>
 167: <span class='perl-Comment def-Comment def-Syntax'>#     suggests a leading semicolon or any other irrelevant non-whitespace</span>
 168: <span class='perl-Comment def-Comment def-Syntax'>#     to indicate literal Perl code.)</span>
 169: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed bugs that ate warnings due to wrong selected handle.</span>
 170: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed a precedence </span><span class='def-TODO def-Error'>bug on signal stuff.</span>
 171: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed some unseemly wording.</span>
 172: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed </span><span class='def-TODO def-Error'>bug in help command trying to call perl method code.</span>
 173: <span class='perl-Comment def-Comment def-Syntax'>#   + Fixed to call dumpvar from exception handler.  SIGPIPE killed us.</span>
 174: <span class='perl-Comment def-Comment def-Syntax'>#   ENHANCEMENTS:</span>
 175: <span class='perl-Comment def-Comment def-Syntax'>#   + Added some comments.  This code is still nasty spaghetti.</span>
 176: <span class='perl-Comment def-Comment def-Syntax'>#   + Added message if you clear your pre/post command stacks which was</span>
 177: <span class='perl-Comment def-Comment def-Syntax'>#     very easy to do if you just typed a bare >, &lt;, or {.  (A command</span>
 178: <span class='perl-Comment def-Comment def-Syntax'>#     without an argument should *never* be a destructive action; this</span>
 179: <span class='perl-Comment def-Comment def-Syntax'>#     API is fundamentally screwed up; likewise option setting, which</span>
 180: <span class='perl-Comment def-Comment def-Syntax'>#     is equally buggered.)</span>
 181: <span class='perl-Comment def-Comment def-Syntax'>#   + Added command stack dump on argument of "?" for >, &lt;, or {.</span>
 182: <span class='perl-Comment def-Comment def-Syntax'>#   + Added a semi-built-in doc viewer command that calls man with the</span>
 183: <span class='perl-Comment def-Comment def-Syntax'>#     proper %Config::Config path (and thus gets caching, man -k, etc),</span>
 184: <span class='perl-Comment def-Comment def-Syntax'>#     or else perldoc on obstreperous platforms.</span>
 185: <span class='perl-Comment def-Comment def-Syntax'>#   + Added to and rearranged the help information.</span>
 186: <span class='perl-Comment def-Comment def-Syntax'>#   + Detected apparent misuse of { ... } to declare a block; this used</span>
 187: <span class='perl-Comment def-Comment def-Syntax'>#     to work but now is a command, and mysteriously gave no complaint.</span>
 188: 
 189: <span class='perl-Comment def-Comment def-Syntax'>####################################################################</span>
 190: 
 191: <span class='perl-Comment def-Comment def-Syntax'># Needed for the statement after exec():</span>
 192: 
 193: <span class='perl-Word def-Keyword'>BEGIN</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Var def-Var'>$ini_warn</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$^W</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$^W</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Comment def-Comment def-Syntax'># Switch compilation warnings off until another BEGIN.</span>
 194: <span class='perl-Word def-Keyword'>local</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^W</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Switch run-time warnings off during init.</span>
 195: <span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span> <span class='def-Symbol'>(</span>            <span class='perl-Comment def-Comment def-Syntax'># Do not ;-)</span>
 196:       <span class='perl-Var def-Var'>$dumpvar::hashDepth</span><span class='perl-Symb def-Symbol'>,</span>     
 197:       <span class='perl-Var def-Var'>$dumpvar::arrayDepth</span><span class='perl-Symb def-Symbol'>,</span>    
 198:       <span class='perl-Var def-Var'>$dumpvar::dumpDBFiles</span><span class='perl-Symb def-Symbol'>,</span>   
 199:       <span class='perl-Var def-Var'>$dumpvar::dumpPackages</span><span class='perl-Symb def-Symbol'>,</span>  
 200:       <span class='perl-Var def-Var'>$dumpvar::quoteHighBit</span><span class='perl-Symb def-Symbol'>,</span>  
 201:       <span class='perl-Var def-Var'>$dumpvar::printUndef</span><span class='perl-Symb def-Symbol'>,</span>    
 202:       <span class='perl-Var def-Var'>$dumpvar::globPrint</span><span class='perl-Symb def-Symbol'>,</span>     
 203:       <span class='perl-Var def-Var'>$dumpvar::usageOnly</span><span class='perl-Symb def-Symbol'>,</span>
 204:       <span class='perl-Var def-Var'>@ARGS</span><span class='perl-Symb def-Symbol'>,</span>
 205:       <span class='perl-Var def-Var'>$Carp::CarpLevel</span><span class='perl-Symb def-Symbol'>,</span>
 206:       <span class='perl-Var def-Var'>$panic</span><span class='perl-Symb def-Symbol'>,</span>
 207:       <span class='perl-Var def-Var'>$second_time</span><span class='perl-Symb def-Symbol'>,</span>
 208:      <span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 209: 
 210: <span class='perl-Comment def-Comment def-Syntax'># Command-line + PERLLIB:</span>
 211: <span class='perl-Var def-Var'>@ini_INC</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@INC</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 212: 
 213: <span class='perl-Comment def-Comment def-Syntax'># $prevwarn = $prevdie = $prevbus = $prevsegv = ''; # Does not help</span><span class='def-TODO def-Error'>?!</span>
 214: 
 215: <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># Uninitialized warning suppression</span>
 216:                                 <span class='perl-Comment def-Comment def-Syntax'># (local $^W cannot help - other packages!).</span>
 217: <span class='perl-Var def-Var'>$inhibit_exit</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PrintRet</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 218: 
 219: <span class='perl-Var def-Var'>@options</span>     <span class='perl-Symb def-Symbol'>=</span> <span class='perl-ReType perl-Word def-Keyword'>qw</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>(</span><span class='perl-String def-String'>hashDepth arrayDepth DumpDBFiles DumpPackages DumpReused</span>
 220: <span class='perl-String def-String'>          compactDump veryCompact quote HighBit undefPrint</span>
 221: <span class='perl-String def-String'>          globPrint PrintRet UsageOnly frame AutoTrace</span>
 222: <span class='perl-String def-String'>          TTY noTTY ReadLine NonStop LineInfo maxTraceLen</span>
 223: <span class='perl-String def-String'>          recallCommand ShellBang pager tkRunning ornaments</span>
 224: <span class='perl-String def-String'>          signalLevel warnLevel dieLevel inhibit_exit</span>
 225: <span class='perl-String def-String'>          ImmediateStop bareStringify</span>
 226: <span class='perl-String def-String'>          RemotePort</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 227: 
 228: <span class='perl-Var def-Var'>%optionVars</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>
 229:          <span class='perl-Var def-Var'>hashDepth    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::hashDepth</span><span class='perl-Symb def-Symbol'>,</span>
 230:          <span class='perl-Var def-Var'>arrayDepth    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::arrayDepth</span><span class='perl-Symb def-Symbol'>,</span>
 231:          <span class='perl-Var def-Var'>DumpDBFiles    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::dumpDBFiles</span><span class='perl-Symb def-Symbol'>,</span>
 232:          <span class='perl-Var def-Var'>DumpPackages    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::dumpPackages</span><span class='perl-Symb def-Symbol'>,</span>
 233:          <span class='perl-Var def-Var'>DumpReused    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::dumpReused</span><span class='perl-Symb def-Symbol'>,</span>
 234:          <span class='perl-Var def-Var'>HighBit    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::quoteHighBit</span><span class='perl-Symb def-Symbol'>,</span>
 235:          <span class='perl-Var def-Var'>undefPrint    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::printUndef</span><span class='perl-Symb def-Symbol'>,</span>
 236:          <span class='perl-Var def-Var'>globPrint    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::globPrint</span><span class='perl-Symb def-Symbol'>,</span>
 237:          <span class='perl-Var def-Var'>UsageOnly    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::usageOnly</span><span class='perl-Symb def-Symbol'>,</span>     
 238:          <span class='perl-Var def-Var'>bareStringify    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$dumpvar::bareStringify</span><span class='perl-Symb def-Symbol'>,</span>
 239:          <span class='perl-Var def-Var'>frame          </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$frame</span><span class='perl-Symb def-Symbol'>,</span>
 240:          <span class='perl-Var def-Var'>AutoTrace      </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$trace</span><span class='perl-Symb def-Symbol'>,</span>
 241:          <span class='perl-Var def-Var'>inhibit_exit   </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$inhibit_exit</span><span class='perl-Symb def-Symbol'>,</span>
 242:          <span class='perl-Var def-Var'>maxTraceLen    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$maxtrace</span><span class='perl-Symb def-Symbol'>,</span>
 243:          <span class='perl-Var def-Var'>ImmediateStop    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$ImmediateStop</span><span class='perl-Symb def-Symbol'>,</span>
 244:          <span class='perl-Var def-Var'>RemotePort    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$remoteport</span><span class='perl-Symb def-Symbol'>,</span>
 245: <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 246: 
 247: <span class='perl-Var def-Var'>%optionAction</span>  <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>
 248:           <span class='perl-Var def-Var'>compactDump    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpvar</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>compactDump</span><span class='perl-Symb def-Symbol'>,</span>
 249:           <span class='perl-Var def-Var'>veryCompact    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpvar</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>veryCompact</span><span class='perl-Symb def-Symbol'>,</span>
 250:           <span class='perl-Var def-Var'>quote        </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpvar</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>quote</span><span class='perl-Symb def-Symbol'>,</span>
 251:           <span class='perl-Var def-Var'>TTY        </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>TTY<span class='perl-Symb def-Symbol'>,</span>
 252:           <span class='perl-Var def-Var'>noTTY        </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>noTTY<span class='perl-Symb def-Symbol'>,</span>
 253:           <span class='perl-Var def-Var'>ReadLine    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>ReadLine<span class='perl-Symb def-Symbol'>,</span>
 254:           <span class='perl-Var def-Var'>NonStop    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>NonStop<span class='perl-Symb def-Symbol'>,</span>
 255:           <span class='perl-Var def-Var'>LineInfo    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>LineInfo<span class='perl-Symb def-Symbol'>,</span>
 256:           <span class='perl-Var def-Var'>recallCommand    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>recallCommand<span class='perl-Symb def-Symbol'>,</span>
 257:           <span class='perl-Var def-Var'>ShellBang    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>shellBang<span class='perl-Symb def-Symbol'>,</span>
 258:           <span class='perl-Var def-Var'>pager        </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>pager<span class='perl-Symb def-Symbol'>,</span>
 259:           <span class='perl-Var def-Var'>signalLevel    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>signalLevel<span class='perl-Symb def-Symbol'>,</span>
 260:           <span class='perl-Var def-Var'>warnLevel    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>warnLevel<span class='perl-Symb def-Symbol'>,</span>
 261:           <span class='perl-Var def-Var'>dieLevel    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>dieLevel<span class='perl-Symb def-Symbol'>,</span>
 262:           <span class='perl-Var def-Var'>tkRunning    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>tkRunning<span class='perl-Symb def-Symbol'>,</span>
 263:           <span class='perl-Var def-Var'>ornaments    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>ornaments<span class='perl-Symb def-Symbol'>,</span>
 264:           <span class='perl-Var def-Var'>RemotePort    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>RemotePort<span class='perl-Symb def-Symbol'>,</span>
 265:          <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 266: 
 267: <span class='perl-Var def-Var'>%optionRequire</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>
 268:           <span class='perl-Var def-Var'>compactDump    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-String def-String'>'dumpvar.pl'</span><span class='perl-Symb def-Symbol'>,</span>
 269:           <span class='perl-Var def-Var'>veryCompact    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-String def-String'>'dumpvar.pl'</span><span class='perl-Symb def-Symbol'>,</span>
 270:           <span class='perl-Var def-Var'>quote        </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-String def-String'>'dumpvar.pl'</span><span class='perl-Symb def-Symbol'>,</span>
 271:          <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 272: 
 273: <span class='perl-Comment def-Comment def-Syntax'># These guys may be defined in $ENV{PERL5DB} :</span>
 274: <span class='perl-Var def-Var'>$rl</span>        <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$rl</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 275: <span class='perl-Var def-Var'>$warnLevel</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$warnLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 276: <span class='perl-Var def-Var'>$dieLevel</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$dieLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 277: <span class='perl-Var def-Var'>$signalLevel</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$signalLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 278: <span class='perl-Var def-Var'>$pre</span>        <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$pre</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 279: <span class='perl-Var def-Var'>$post</span>        <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$post</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 280: <span class='perl-Var def-Var'>$pretype</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span>    <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$pretype</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 281: 
 282: warnLevel<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$warnLevel</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 283: dieLevel<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dieLevel</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 284: signalLevel<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$signalLevel</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 285: 
 286: <span class='perl-Symb def-Symbol'>&amp;</span>pager<span class='def-Symbol'>(</span>
 287:     <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PAGER</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> 
 288:     <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PAGER</span><span class='perl-Symb def-Symbol'>}</span>
 289:     <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'os2'</span> 
 290:        <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>'cmd /c more'</span> 
 291:        <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'more'</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$pager</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 292: setman<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 293: <span class='perl-Symb def-Symbol'>&amp;</span>recallCommand<span class='def-Symbol'>(</span><span class='perl-String def-String'>"!"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$prc</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 294: <span class='perl-Symb def-Symbol'>&amp;</span>shellBang<span class='def-Symbol'>(</span><span class='perl-String def-String'>"!"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$psh</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 295: <span class='perl-Var def-Var'>$maxtrace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>400</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$maxtrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 296: 
 297: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>-e</span> <span class='perl-String def-String'>"/dev/tty"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>  <span class='perl-Comment def-Comment def-Syntax'># this is the wrong metric!</span>
 298:   <span class='perl-Var def-Var'>$rcfile</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>".perldb"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 299: <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 300:   <span class='perl-Var def-Var'>$rcfile</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>"perldb.ini"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 301: <span class='def-SymbolStrong def-Symbol'>}</span>
 302: 
 303: <span class='perl-Comment def-Comment def-Syntax'># This isn't really safe, because there's a race</span>
 304: <span class='perl-Comment def-Comment def-Syntax'># between checking and opening.  The solution is to</span>
 305: <span class='perl-Comment def-Comment def-Syntax'># open and fstat the handle, but then you have to read and</span>
 306: <span class='perl-Comment def-Comment def-Syntax'># eval the contents.  But then the silly thing gets</span>
 307: <span class='perl-Comment def-Comment def-Syntax'># your lexical scope, which is unfortunately at best.</span>
 308: <span class='perl-Word def-Keyword'>sub</span> safe_do <span class='def-SymbolStrong def-Symbol'>{</span> 
 309:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 310: 
 311:     <span class='perl-Comment def-Comment def-Syntax'># Just exactly what part of the word "CORE::" don't you understand?</span>
 312:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>  
 313:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    
 314: 
 315:     <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span>is_safe_file<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 316: <span class='def-Text'>    </span><span class='perl-Word def-Keyword'>CORE</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Text'> </span><span class='perl-HereDocLt perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>&lt;&lt;</span><span class='perl-HereDocName def-Label'>EO_GRIPE</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='perl-HereDoc perl-String def-String'></span>
 317: <span class='perl-HereDoc perl-String def-String'>perldb: Must not source insecure rcfile </span><span class='perl-Var def-Var'>$file</span><span class='perl-HereDoc perl-String def-String'>.</span>
 318: <span class='perl-HereDoc perl-String def-String'>        You or the superuser must be the owner, and it must not </span>
 319: <span class='perl-HereDoc perl-String def-String'>    be writable by anyone but its owner.</span>
 320: <span class='perl-HereDocName def-Label'>EO_GRIPE</span>
 321:     <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 322:     <span class='def-SymbolStrong def-Symbol'>}</span> 
 323: 
 324:     <span class='perl-Word def-Keyword'>do</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 325:     <span class='perl-Word def-Keyword'>CORE</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"perldb: couldn't parse </span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>: </span><span class='perl-Var def-Var'>$@</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$@</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 326: <span class='def-SymbolStrong def-Symbol'>}</span>
 327: 
 328: 
 329: <span class='perl-Comment def-Comment def-Syntax'># Verifies that owner is either real user or superuser and that no</span>
 330: <span class='perl-Comment def-Comment def-Syntax'># one but owner may write to it.  This function is of limited use</span>
 331: <span class='perl-Comment def-Comment def-Syntax'># when called on a path instead of upon a handle, because there are</span>
 332: <span class='perl-Comment def-Comment def-Syntax'># no guarantees that filename (by dirent) whose file (by ino) is</span>
 333: <span class='perl-Comment def-Comment def-Syntax'># eventually accessed is the same as the one tested. </span>
 334: <span class='perl-Comment def-Comment def-Syntax'># Assumes that the file's existence is not in doubt.</span>
 335: <span class='perl-Word def-Keyword'>sub</span> is_safe_file <span class='def-SymbolStrong def-Symbol'>{</span>
 336:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$path</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 337:     <span class='perl-Word def-Keyword'>stat</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$path</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># mysteriously vaporized</span>
 338:     <span class='perl-Word def-Keyword'>my</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dev</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$ino</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$mode</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$nlink</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$uid</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$gid</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>stat</span><span class='def-Symbol'>(</span>_<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 339: 
 340:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$uid</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$uid</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$&lt;</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 341:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$mode</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>022</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 342:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 343: <span class='def-SymbolStrong def-Symbol'>}</span>
 344: 
 345: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>-f</span> <span class='perl-Var def-Var'>$rcfile</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 346:     safe_do<span class='def-Symbol'>(</span><span class='perl-String def-String'>"./</span><span class='perl-Var def-Var'>$rcfile</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 347: <span class='def-SymbolStrong def-Symbol'>}</span> 
 348: <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>HOME</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>-f</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>HOME</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>/</span><span class='perl-Var def-Var'>$rcfile</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 349:     safe_do<span class='def-Symbol'>(</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>HOME</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>/</span><span class='perl-Var def-Var'>$rcfile</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 350: <span class='def-SymbolStrong def-Symbol'>}</span>
 351: <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LOGDIR</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>-f</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LOGDIR</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>/</span><span class='perl-Var def-Var'>$rcfile</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 352:     safe_do<span class='def-Symbol'>(</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LOGDIR</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>/</span><span class='perl-Var def-Var'>$rcfile</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 353: <span class='def-SymbolStrong def-Symbol'>}</span>
 354: 
 355: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_OPTS</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 356:   parse_options<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_OPTS</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 357: <span class='def-SymbolStrong def-Symbol'>}</span>
 358: 
 359: <span class='perl-Comment def-Comment def-Syntax'># Here begin the unreadable code.  It needs fixing.</span>
 360: 
 361: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>exists</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_RESTART</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 362:   <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_RESTART</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 363:   <span class='perl-Comment def-Comment def-Syntax'># $restart = 1;</span>
 364:   <span class='perl-Var def-Var'>@hist</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>'PERLDB_HIST'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 365:   <span class='perl-Var def-Var'>%break_on_load</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_ON_LOAD"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 366:   <span class='perl-Var def-Var'>%postponed</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_POSTPONE"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 367:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@had_breakpoints</span><span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_VISITED"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 368:   <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>..</span> <span class='perl-Var def-Var'>$#had_breakpoints</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 369:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>%pf</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_FILE_</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 370:     <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>%pf</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>%pf</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 371:   <span class='def-SymbolStrong def-Symbol'>}</span>
 372:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>%opt</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_OPT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 373:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 374:   <span class='perl-Word def-Keyword'>while</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>each</span> <span class='perl-Var def-Var'>%opt</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 375:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 376:     parse_options<span class='def-Symbol'>(</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>'</span><span class='perl-Var def-Var'>$val</span><span class='perl-String def-String'>'"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 377:   <span class='def-SymbolStrong def-Symbol'>}</span>
 378:   <span class='perl-Var def-Var'>@INC</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_INC"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 379:   <span class='perl-Var def-Var'>@ini_INC</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@INC</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 380:   <span class='perl-Var def-Var'>$pretype</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span>get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_PRETYPE"</span><span class='def-Symbol'>)</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 381:   <span class='perl-Var def-Var'>$pre</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span>get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_PRE"</span><span class='def-Symbol'>)</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 382:   <span class='perl-Var def-Var'>$post</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span>get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_POST"</span><span class='def-Symbol'>)</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 383:   <span class='perl-Var def-Var'>@typeahead</span> <span class='perl-Symb def-Symbol'>=</span> get_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_TYPEAHEAD"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@typeahead</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 384: <span class='def-SymbolStrong def-Symbol'>}</span>
 385: 
 386: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$notty</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 387:   <span class='perl-Var def-Var'>$runnonstop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 388: <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 389:   <span class='perl-Comment def-Comment def-Syntax'># Is Perl being run from a slave editor or graphical debugger?</span>
 390:   <span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$main::ARGV</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>and</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$main::ARGV</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'-emacs'</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 391:   <span class='perl-Var def-Var'>$rl</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@main::ARGV</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$slave_editor</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 392: 
 393:   <span class='perl-Comment def-Comment def-Syntax'>#require Term::ReadLine;</span>
 394: 
 395:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'cygwin'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 396:     <span class='perl-Comment def-Comment def-Syntax'># /dev/tty is binary. use stdin for textmode</span>
 397:     <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>$console</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 398:   <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>-e</span> <span class='perl-String def-String'>"/dev/tty"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 399:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"/dev/tty"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 400:   <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'dos'</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>-e</span> <span class='perl-String def-String'>"con"</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'MSWin32'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 401:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"con"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 402:   <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'MacOS'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 403:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$MacPerl::Version</span> <span class='perl-Symb def-Symbol'>!~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>MPW</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 404:       <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"Dev:Console:Perl Debug"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># Separate window for application</span>
 405:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 406:       <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"Dev:Console"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 407:     <span class='def-SymbolStrong def-Symbol'>}</span>
 408:   <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 409:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"sys</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>command"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 410:   <span class='def-SymbolStrong def-Symbol'>}</span>
 411: 
 412:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'MSWin32'</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>and</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>EMACS</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 413:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>undef</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 414:   <span class='def-SymbolStrong def-Symbol'>}</span>
 415: 
 416:   <span class='perl-Comment def-Comment def-Syntax'># Around a </span><span class='def-TODO def-Error'>bug:</span>
 417:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>OS2_SHELL</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>and</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>WINDOWID</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># In OS/2</span>
 418:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>undef</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 419:   <span class='def-SymbolStrong def-Symbol'>}</span>
 420: 
 421:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'epoc'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 422:     <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>undef</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 423:   <span class='def-SymbolStrong def-Symbol'>}</span>
 424: 
 425:   <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$tty</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$tty</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 426: 
 427:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$remoteport</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 428:     <span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>IO::Socket</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 429:     <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>=</span> new <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>IO::Socket::INET</span><span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>Timeout  </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-String def-String'>'10'</span><span class='perl-Symb def-Symbol'>,</span>
 430:                                  <span class='perl-Var def-Var'>PeerAddr </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$remoteport</span><span class='perl-Symb def-Symbol'>,</span>
 431:                                  <span class='perl-Var def-Var'>Proto    </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-String def-String'>'tcp'</span><span class='perl-Symb def-Symbol'>,</span>
 432:                                <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 433:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$OUT</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-String def-String'>"Unable to connect to remote host: </span><span class='perl-Var def-Var'>$remoteport</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>
 434:     <span class='perl-Var def-Var'>$IN</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 435:   <span class='def-SymbolStrong def-Symbol'>}</span>
 436:   <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 437:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$console</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 438:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>IN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"+&lt;</span><span class='perl-Var def-Var'>$console</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>IN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;</span><span class='perl-Var def-Var'>$console</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>IN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;&amp;STDIN"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 439:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"+></span><span class='perl-Var def-Var'>$console</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"></span><span class='perl-Var def-Var'>$console</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDERR"</span><span class='def-Symbol'>)</span>
 440:         <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># so we don't dongle stdout</span>
 441:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 442:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>IN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;&amp;STDIN"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 443:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDERR"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># so we don't dongle stdout</span>
 444:       <span class='perl-Var def-Var'>$console</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'STDIN/OUT'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 445:     <span class='def-SymbolStrong def-Symbol'>}</span>
 446:     <span class='perl-Comment def-Comment def-Syntax'># so open("|more") can read from STDOUT and so we don't dingle stdin</span>
 447:     <span class='perl-Var def-Var'>$IN</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*IN</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 448: 
 449:     <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 450:   <span class='def-SymbolStrong def-Symbol'>}</span>
 451:   <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 452:   <span class='perl-Var def-Var'>$|</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># for DB::OUT</span>
 453:   <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 454: 
 455:   <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$LINEINFO</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 456:   <span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$console</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$lineinfo</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 457: 
 458:   <span class='perl-Var def-Var'>$|</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># for real STDOUT</span>
 459: 
 460:   <span class='perl-Var def-Var'>$header</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='perl-String def-String'>Header: </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>,</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>,v</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-Var def-Var'>$2</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 461:   <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$runnonstop</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 462:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>Loading DB routines from </span><span class='perl-Var def-Var'>$header</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 463:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>"Editor support "</span><span class='perl-Symb def-Symbol'>,</span>
 464:         <span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"enabled"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"available"</span><span class='perl-Symb def-Symbol'>,</span>
 465:         <span class='perl-String def-String'>".</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 466:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>Enter h or `h h' for help, or `</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'> perldebug' for more help.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 467:   <span class='def-SymbolStrong def-Symbol'>}</span>
 468: <span class='def-SymbolStrong def-Symbol'>}</span>
 469: 
 470: <span class='perl-Var def-Var'>@ARGS</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@ARGV</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 471: <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@args</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 472:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 473:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>'</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>unless</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>-</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\d</span><span class='perl-String def-String'>.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 474: <span class='def-SymbolStrong def-Symbol'>}</span>
 475: 
 476: <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span>afterinit<span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>    <span class='perl-Comment def-Comment def-Syntax'># May be defined in $rcfile</span>
 477:   <span class='perl-Symb def-Symbol'>&amp;</span>afterinit<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 478: <span class='def-SymbolStrong def-Symbol'>}</span>
 479: 
 480: <span class='perl-Var def-Var'>$I_m_init</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 481: 
 482: <span class='perl-Comment def-Comment def-Syntax'>############################################################ Subroutines</span>
 483: 
 484: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 485:     <span class='perl-Comment def-Comment def-Syntax'># _After_ the perl program is compiled, $single is set to 1:</span>
 486:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Var def-Var'>$second_time</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 487:       <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$runnonstop</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>    <span class='perl-Comment def-Comment def-Syntax'># Disable until signal</span>
 488:     <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 489:         <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 490:     <span class='def-SymbolStrong def-Symbol'>}</span>
 491:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 492:     <span class='perl-Comment def-Comment def-Syntax'># return;            # Would not print trace!</span>
 493:       <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ImmediateStop</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 494:     <span class='perl-Var def-Var'>$ImmediateStop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 495:     <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 496:       <span class='def-SymbolStrong def-Symbol'>}</span>
 497:     <span class='def-SymbolStrong def-Symbol'>}</span>
 498:     <span class='perl-Var def-Var'>$runnonstop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># Disable it if interactive.</span>
 499:     <span class='perl-Symb def-Symbol'>&amp;</span>save<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 500:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$package</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>caller</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 501:     <span class='perl-Var def-Var'>$filename_ini</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 502:     <span class='perl-Var def-Var'>$usercontext</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'($@, $!, $^E, $,, $/, $\, $^W) = @saved;'</span> <span class='perl-Symb def-Symbol'>.</span>
 503:       <span class='perl-String def-String'>"package </span><span class='perl-Var def-Var'>$package</span><span class='perl-String def-String'>;"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># this won't let them modify, alas</span>
 504:     <span class='perl-Word def-Keyword'>local</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>*dbline</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 505:     <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 506:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$action</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 507:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'1'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 508:         <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 509:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 510:         <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::signal |= </span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'> if do {</span><span class='perl-Var def-Var'>$stop</span><span class='perl-String def-String'>}"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 511:         <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>;9</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-Var def-Var'>$|</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 512:     <span class='def-SymbolStrong def-Symbol'>}</span>
 513:     <span class='def-SymbolStrong def-Symbol'>}</span>
 514:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$was_signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 515:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 516:       <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$n</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$n</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#to_watch</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 517:     <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$to_watch</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 518:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$onetimeDump</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># Do not output results</span>
 519:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># </span><span class='def-TODO def-Error'>Fix context (&amp;eval is doing array)?</span>
 520:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"'</span><span class='perl-Var def-Var'>$val</span><span class='perl-String def-String'>'"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'undef'</span> <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 521:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$old_watch</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 522:       <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 523: <span class='def-Text'>      </span><span class='perl-Word def-Keyword'>print</span><span class='def-Text'> </span><span class='perl-Var def-Var'>$OUT</span><span class='def-Text'> </span><span class='perl-HereDocLt perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>&lt;&lt;</span><span class='perl-HereDocName def-Label'>EOP</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='perl-HereDoc perl-String def-String'></span>
 524: <span class='perl-HereDoc perl-String def-String'>Watchpoint </span><span class='perl-Var def-Var'>$n</span><span class='perl-HereDoc perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$to_watch</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-HereDoc perl-String def-String'> changed:</span>
 525: <span class='perl-HereDoc perl-String def-String'>    old value:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$old_watch</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-HereDoc perl-String def-String'></span>
 526: <span class='perl-HereDoc perl-String def-String'>    new value:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$val</span><span class='perl-HereDoc perl-String def-String'></span>
 527: <span class='perl-HereDocName def-Label'>EOP</span>
 528:       <span class='perl-Var def-Var'>$old_watch</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$n</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 529:     <span class='def-SymbolStrong def-Symbol'>}</span>
 530:       <span class='def-SymbolStrong def-Symbol'>}</span>
 531:     <span class='def-SymbolStrong def-Symbol'>}</span>
 532:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>4</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>        <span class='perl-Comment def-Comment def-Syntax'># User-installed watch</span>
 533:       <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>if</span> watchfunction<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$package</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='def-Symbol'>)</span> 
 534:     <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Var def-Var'>$was_signal</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>4</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 535:     <span class='def-SymbolStrong def-Symbol'>}</span>
 536:     <span class='perl-Var def-Var'>$was_signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 537:     <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 538:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$was_signal</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 539:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$slave_editor</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 540:         <span class='perl-Var def-Var'>$position</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\032</span><span class='regexp-Symbol def-StringContent def-String'>\032</span><span class='perl-Var def-Var'>$filename</span><span class='perl-String def-String'>:</span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'>:</span><span class='def-NumberDec def-Number'>0</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 541:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Var def-Var'>$position</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 542:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$package</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'DB::fake'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 543:       <span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span>setterm<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 544: <span class='def-Text'>      print_help</span><span class='def-Symbol'>(</span><span class='perl-HereDocLt perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>&lt;&lt;</span><span class='perl-HereDocName def-Label'>EOP</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='perl-HereDoc perl-String def-String'></span>
 545: <span class='perl-HereDoc perl-String def-String'>Debugged program terminated.  Use B&lt;q> to quit or B&lt;R> to restart,</span>
 546: <span class='perl-HereDoc perl-String def-String'>  use B&lt;O> I&lt;inhibit_exit> to avoid stopping after program termination,</span>
 547: <span class='perl-HereDoc perl-String def-String'>  B&lt;h q>, B&lt;h R> or B&lt;h O> to get additional info.  </span>
 548: <span class='perl-HereDocName def-Label'>EOP</span>
 549:       <span class='perl-Var def-Var'>$package</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'main'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 550:       <span class='perl-Var def-Var'>$usercontext</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'($@, $!, $^E, $,, $/, $\, $^W) = @saved;'</span> <span class='perl-Symb def-Symbol'>.</span>
 551:         <span class='perl-String def-String'>"package </span><span class='perl-Var def-Var'>$package</span><span class='perl-String def-String'>;"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># this won't let them modify, alas</span>
 552:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 553:         <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 554:         <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>""</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'>'package'</span><span class='perl-Var def-Var'>}</span>::"<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 555:         <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-String def-String'>(</span><span class='perl-Var def-Var'>$filename</span><span class='perl-String def-String'>:"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 556:         <span class='perl-Var def-Var'>$after</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>''</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 557:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$prefix</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>30</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 558:             <span class='perl-Var def-Var'>$position</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'>):</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Var def-Var'>$after</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 559:         <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 560:         <span class='perl-Var def-Var'>$infix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>":</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 561:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 562:         <span class='perl-Var def-Var'>$infix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"):</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 563:         <span class='perl-Var def-Var'>$position</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$line</span><span class='perl-Var def-Var'>$infix</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Var def-Var'>$after</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 564:         <span class='def-SymbolStrong def-Symbol'>}</span>
 565:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$frame</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 566:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Var def-Var'>$after</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 567:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 568:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Var def-Var'>$position</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 569:         <span class='def-SymbolStrong def-Symbol'>}</span>
 570:         <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'>#{ vi</span>
 571:         <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\;</span><span class='regexp-Symbol def-StringContent def-String'>\}</span><span class='regexp-Symbol def-StringContent def-String'>\#</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 572:         <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 573:         <span class='perl-Var def-Var'>$after</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>''</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 574:         <span class='perl-Var def-Var'>$incr_pos</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$i</span><span class='perl-Var def-Var'>$infix</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Var def-Var'>$after</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 575:         <span class='perl-Var def-Var'>$position</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$incr_pos</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 576:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$frame</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 577:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Var def-Var'>$after</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 578:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 579:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Var def-Var'>$incr_pos</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 580:         <span class='def-SymbolStrong def-Symbol'>}</span>
 581:         <span class='def-SymbolStrong def-Symbol'>}</span>
 582:     <span class='def-SymbolStrong def-Symbol'>}</span>
 583:     <span class='def-SymbolStrong def-Symbol'>}</span>
 584:     <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$action</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$action</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 585:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$was_signal</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 586:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 587:     <span class='perl-Word def-Keyword'>foreach</span> <span class='perl-Var def-Var'>$evalarg</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$pre</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 588:       <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 589:     <span class='def-SymbolStrong def-Symbol'>}</span>
 590:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>" levels deep in subroutine calls!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 591:       <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>4</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 592:     <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 593:     <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># for backward motion.</span>
 594:     <span class='perl-Var def-Var'>@typeahead</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$pretype</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@typeahead</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 595:       <span class='def-Label'>CMD:</span>
 596:     <span class='perl-Word def-Keyword'>while</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span>setterm<span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>
 597:            <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term_pid</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$$</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Symb def-Symbol'>&amp;</span>resetterm<span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>
 598:            <span class='perl-Word def-Keyword'>defined</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>readline</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"  DB"</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>'&lt;'</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$level</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span>
 599:                        <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$#hist</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>'>'</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$level</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span>
 600:                        <span class='perl-String def-String'>" "</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
 601:         <span class='def-SymbolStrong def-Symbol'>{</span>
 602:         <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 603:         <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 604:         <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 605:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>readline</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"  cont: "</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 606:             <span class='perl-Word def-Keyword'>redo</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 607:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 608:         <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$laststep</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 609:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@hist</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 610:           <span class='def-Label'>PIPE:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 611:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>   <span class='perl-Comment def-Comment def-Syntax'># trim annoying leading whitespace</span>
 612:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>   <span class='perl-Comment def-Comment def-Syntax'># trim annoying trailing whitespace</span>
 613:             <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 614:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
 615:             <span class='perl-Comment def-Comment def-Syntax'># squelch the sigmangler</span>
 616:             <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 617:             <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 618:             <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>cmd =~ </span><span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 619:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 620:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Couldn't evaluate `</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>' alias: </span><span class='perl-Var def-Var'>$@</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 621:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 622:             <span class='def-SymbolStrong def-Symbol'>}</span> 
 623:             <span class='def-SymbolStrong def-Symbol'>}</span>
 624:                    <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>q</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$fall_off_end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>exit</span> <span class='perl-Var def-Var'>$?</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 625:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>h</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 626:             print_help<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$help</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 627:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 628:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>h</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'>h</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 629:             print_help<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$summary</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 630:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 631:             <span class='perl-Comment def-Comment def-Syntax'># support long commands; otherwise bogus errors</span>
 632:             <span class='perl-Comment def-Comment def-Syntax'># happen when you ask for h on &lt;CR> for example</span>
 633:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>h</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>      
 634:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$asked</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># for proper errmsg</span>
 635:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$qasked</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>quotemeta</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$asked</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># for searching</span>
 636:             <span class='perl-Comment def-Comment def-Syntax'># XXX: finds CR but not &lt;CR></span>
 637:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$help</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>&lt;</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span>IB<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span>&lt;<span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-Var def-Var'>$qasked</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>m</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 638:               <span class='perl-Word def-Keyword'>while</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$help</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>&lt;</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span>IB<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span>&lt;<span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-Var def-Var'>$qasked</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Operator def-Keyword'>?!</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>mg</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 639:                 print_help<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 640:               <span class='def-SymbolStrong def-Symbol'>}</span>
 641:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 642:                 print_help<span class='def-Symbol'>(</span><span class='perl-String def-String'>"B&lt;</span><span class='perl-Var def-Var'>$asked</span><span class='perl-String def-String'>> is not a debugger command.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 643:             <span class='def-SymbolStrong def-Symbol'>}</span>
 644:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 645:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>t</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 646:             <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>^</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 647:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Trace = "</span> <span class='perl-Symb def-Symbol'>.</span>
 648:                 <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"on"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"off"</span> <span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 649:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 650:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>S</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>!</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 651:             <span class='perl-Var def-Var'>$Srev</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$Spatt</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$3</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$Snocheck</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>!</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 652:             <span class='perl-Word def-Keyword'>foreach</span> <span class='perl-Var def-Var'>$subname</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span><span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 653:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$Snocheck</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$Srev</span><span class='perl-Symb def-Symbol'>^</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$Spatt</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 654:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 655:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 656:             <span class='def-SymbolStrong def-Symbol'>}</span>
 657:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 658:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>v</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 659:             list_versions<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Word def-Keyword'>next</span> CMD<span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 660:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>X</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>V </span><span class='perl-Var def-Var'>$package</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 661:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>V</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 662:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"V </span><span class='perl-Var def-Var'>$package</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 663:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>V</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 664:             <span class='perl-Word def-Keyword'>local</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$savout</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 665:             <span class='perl-Var def-Var'>$packname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 666:             <span class='perl-Var def-Var'>@vars</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>' '</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 667:             <span class='perl-Word def-Keyword'>do</span> <span class='perl-String def-String'>'dumpvar.pl'</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpvar</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 668:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpvar</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 669:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 670:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 671:                 <span class='perl-Comment def-Comment def-Syntax'># must detect sigpipe failures</span>
 672:                 <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span>dumpvar<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$packname</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>@vars</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 673:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 674:                 <span class='perl-Word def-Keyword'>die</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$@</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>dumpvar print failed</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 675:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
 676:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 677:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"dumpvar.pl not available.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 678:             <span class='def-SymbolStrong def-Symbol'>}</span>
 679:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$savout</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 680:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 681:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>x</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># So that will be evaled</span>
 682:             <span class='perl-Var def-Var'>$onetimeDump</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'dump'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 683:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>m</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\w</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 684:             methods<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Word def-Keyword'>next</span> CMD<span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 685:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>m</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># So this will be evaled</span>
 686:             <span class='perl-Var def-Var'>$onetimeDump</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'methods'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 687:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>f</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 688:             <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 689:             <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 690:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$file</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 691:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"The old f command is now the r command.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 692:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"The new f command switches filenames.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 693:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 694:             <span class='def-SymbolStrong def-Symbol'>}</span>
 695:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 696:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$try</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>grep</span><span class='def-Symbol'>(</span><span class='perl-ReType perl-Word def-Keyword'>m</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>#</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>_&lt;</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-Var def-Var'>$file</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>#</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%main::</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='def-SymbolStrong def-Symbol'>{</span>
 697:                           <span class='perl-Var def-Var'>$try</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$try</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 698:                           <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Choosing </span><span class='perl-Var def-Var'>$try</span><span class='perl-String def-String'> matching `</span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>':</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 699:                           <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$try</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 700:                       <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-SymbolStrong def-Symbol'>}</span>
 701:             <span class='def-SymbolStrong def-Symbol'>}</span>
 702:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 703:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"No file matching `</span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>' is loaded.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 704:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 705:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$filename</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 706:                 <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 707:                 <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 708:                 <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 709:                 <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 710:                 <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"l"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 711:               <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 712:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Already in </span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 713:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 714:               <span class='def-SymbolStrong def-Symbol'>}</span>
 715:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 716:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>l</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'>-</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>-</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 717:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>lb</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Symbol def-StringContent def-String'>\$</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 718:             <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 719:             <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$s</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 720:             <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Error: </span><span class='perl-Var def-Var'>$@</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> CMD <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$@</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 721:             <span class='perl-Var def-Var'>$s</span> <span class='perl-Symb def-Symbol'>=</span> CvGV_name<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$s</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 722:             <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Interpreted as: </span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$s</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 723:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$s</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 724:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 725:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>l</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-String def-String'>:A</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>Za</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>z_</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-String def-String'>:</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 726:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 727:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 728:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$package</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'>"::"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$subname</span> 
 729:               <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 730:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"main"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$subname</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>"::"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 731:             <span class='perl-Var def-Var'>@pieces</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>:</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span>find_sub<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 732:             <span class='perl-Var def-Var'>$subrange</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>pop</span> <span class='perl-Var def-Var'>@pieces</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 733:             <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>join</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>':'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@pieces</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 734:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$filename</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 735:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Switching to file '</span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>'.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 736:                 <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$slave_editor</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 737:                 <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 738:                 <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 739:                 <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 740:             <span class='def-SymbolStrong def-Symbol'>}</span>
 741:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subrange</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 742:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>eval</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subrange</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Var def-Var'>$window</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 743:                 <span class='perl-Var def-Var'>$subrange</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>-</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>+</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 744:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 745:                 <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"l </span><span class='perl-Var def-Var'>$subrange</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 746:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 747:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Subroutine </span><span class='perl-Var def-Var'>$subname</span><span class='perl-String def-String'> not found.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 748:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 749:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 750:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\.</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 751:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># for backward motion.</span>
 752:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 753:             <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$filename_ini</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 754:             <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 755:             <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 756:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Var def-Var'>$position</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 757:             <span class='perl-Word def-Keyword'>next</span> CMD <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 758:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>w</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 759:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 760:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 761:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$preview</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 762:             <span class='perl-Comment def-Comment def-Syntax'>#print $OUT 'l ' . $start . '-' . ($start + $incr);</span>
 763:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'l '</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'-'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Var def-Var'>$incr</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 764:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>-</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 765:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 766:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 767:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 768:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'l '</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'+'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 769:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>l</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 770:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 771:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'l '</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'-'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Var def-Var'>$incr</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 772:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>l</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 773:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 774:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 775:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$incr</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 776:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'l '</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'-'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Var def-Var'>$incr</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 777:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>l</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>-</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-Symbol def-StringContent def-String'>\$</span><span class='regexp-Symbol def-StringContent def-String'>\.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>,</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-Symbol def-StringContent def-String'>\$</span><span class='regexp-Symbol def-StringContent def-String'>\.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 778:             <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$4</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$4</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 779:             <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 780:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 781:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'.'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 782:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 783:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Var def-Var'>$i</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 784:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$slave_editor</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 785:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\032</span><span class='regexp-Symbol def-StringContent def-String'>\032</span><span class='perl-Var def-Var'>$filename</span><span class='perl-String def-String'>:</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>:</span><span class='def-NumberDec def-Number'>0</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 786:                 <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$end</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 787:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 788:                 <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$end</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 789:                     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$action</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 790:                     <span class='perl-Var def-Var'>$arrow</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Var def-Var'>$line</span> 
 791:                       <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$filename_ini</span><span class='def-Symbol'>)</span> 
 792:                   <span class='perl-Symb def-Symbol'>?</span>  <span class='perl-String def-String'>'==>'</span> 
 793:                     <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>':'</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>' '</span><span class='def-Symbol'>)</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 794:                 <span class='perl-Var def-Var'>$arrow</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'b'</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$stop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 795:                 <span class='perl-Var def-Var'>$arrow</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'a'</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$action</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 796:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$i</span><span class='perl-Var def-Var'>$arrow</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 797:                 <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 798:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 799:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 800:             <span class='def-SymbolStrong def-Symbol'>}</span>
 801:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$i</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># remember in case they want more</span>
 802:             <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 803:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 804:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>D</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 805:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Deleting all breakpoints...</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 806:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 807:               <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$file</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%had_breakpoints</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 808:             <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 809:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 810:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$was</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 811:             
 812:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 813:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 814:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 815:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 816:                     <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 817:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 818:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 819:             <span class='def-SymbolStrong def-Symbol'>}</span>
 820:             
 821:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>not</span> <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 822:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 823:             <span class='def-SymbolStrong def-Symbol'>}</span>
 824:               <span class='def-SymbolStrong def-Symbol'>}</span>
 825:               <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>%postponed</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 826:               <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>%postponed_file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 827:               <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>%break_on_load</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 828:               <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 829:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>L</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 830:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 831:               <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$file</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%had_breakpoints</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 832:             <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 833:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 834:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$was</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 835:             
 836:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 837:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 838:                     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$was</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 839:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>" </span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 840:                 <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$action</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 841:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"   break if ("</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>")</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 842:                   <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$stop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 843:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"   action:  "</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$action</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 844:                   <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$action</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 845:                 <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 846:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 847:             <span class='def-SymbolStrong def-Symbol'>}</span>
 848:               <span class='def-SymbolStrong def-Symbol'>}</span>
 849:               <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>%postponed</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 850:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Postponed breakpoints in subroutines:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 851:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$subname</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 852:             <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$subname</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%postponed</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 853:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>" </span><span class='perl-Var def-Var'>$subname</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 854:               <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 855:             <span class='def-SymbolStrong def-Symbol'>}</span>
 856:               <span class='def-SymbolStrong def-Symbol'>}</span>
 857:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@have</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># Combined keys</span>
 858:             <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span>
 859:               <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%postponed_file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 860:               <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@have</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 861:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Postponed breakpoints in files:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 862:             <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 863:             <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$file</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%postponed_file</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 864:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$db</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 865:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>" </span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 866:               <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$line</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>$a</span> <span class='perl-Stream def-Path def-URI'>&lt;=></span> <span class='perl-Var def-Var'>$b</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%$db</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 867:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"  </span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 868:                 <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$action</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>split</span><span class='def-Symbol'>(</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$$db</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 869:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"    break if ("</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$stop</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>")</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 870:                   <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$stop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 871:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"    action:  "</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$action</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
 872:                   <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$action</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 873:                 <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 874:               <span class='def-SymbolStrong def-Symbol'>}</span>
 875:               <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 876:             <span class='def-SymbolStrong def-Symbol'>}</span>
 877:               <span class='def-SymbolStrong def-Symbol'>}</span>
 878:               <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>%break_on_load</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 879:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Breakpoints on load:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 880:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 881:             <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$file</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%break_on_load</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 882:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>" </span><span class='perl-Var def-Var'>$file</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 883:               <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 884:             <span class='def-SymbolStrong def-Symbol'>}</span>
 885:               <span class='def-SymbolStrong def-Symbol'>}</span>
 886:               <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 887:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Watch-expressions:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 888:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$expr</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 889:             <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$expr</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@to_watch</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 890:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>" </span><span class='perl-Var def-Var'>$expr</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 891:               <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 892:             <span class='def-SymbolStrong def-Symbol'>}</span>
 893:               <span class='def-SymbolStrong def-Symbol'>}</span>
 894:               <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 895:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>b</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-String def-String'>load</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 896:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 897:             <span class='def-SymbolStrong def-Symbol'>{</span>
 898:               <span class='perl-Var def-Var'>$break_on_load</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 899:               <span class='perl-Var def-Var'>$break_on_load</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$::INC</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$::INC</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 900:               <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'.pm'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>redo</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\.</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 901:             <span class='def-SymbolStrong def-Symbol'>}</span>
 902:             <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 903:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Will stop on load of `</span><span class='perl-Var def-Var'>@</span><span class='perl-Var def-Var'>{</span><span class='def-Symbol'>[</span><span class='perl-Word def-Keyword'>join</span><span class='perl-String def-String'> </span><span class='perl-String def-String'>'</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-String def-String'>, `'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%break_on_load</span><span class='def-Symbol'>]</span><span class='perl-Var def-Var'>}</span>'.<span class='regexp-Symbol def-StringContent def-String'>\n</span>"<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 904:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 905:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>b</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>postpone</span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'>compile</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>':A</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>Za</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>z_</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>':</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 906:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$cond</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$3</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$3</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'1'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 907:             <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$break</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$2</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'postpone'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 908:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 909:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'>'package'</span><span class='perl-Var def-Var'>}</span>::" <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$subname</span>
 910:               <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 911:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"main"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$subname</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>"::"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 912:             <span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$break</span> 
 913:               <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"break +</span><span class='def-NumberDec def-Number'>0</span><span class='perl-String def-String'> if </span><span class='perl-Var def-Var'>$cond</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"compile"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 914:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 915:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>b</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>':A</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>Za</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>z_</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>':</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 916:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 917:             <span class='perl-Var def-Var'>$cond</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$2</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$2</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'1'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 918:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 919:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'>'package'</span><span class='perl-Var def-Var'>}</span>::" <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$subname</span>
 920:               <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 921:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"main"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$subname</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>"::"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 922:             <span class='perl-Comment def-Comment def-Syntax'># Filename below can contain ':'</span>
 923:             <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>find_sub<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 924:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 925:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 926:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 927:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 928:                 <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 929:                 <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 930:                 <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Word def-Keyword'>while</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 931:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$cond</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 932:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 933:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Subroutine </span><span class='perl-Var def-Var'>$subname</span><span class='perl-String def-String'> not found.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 934:             <span class='def-SymbolStrong def-Symbol'>}</span>
 935:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 936:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>b</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 937:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$line</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 938:             <span class='perl-Var def-Var'>$cond</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$2</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$2</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'1'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 939:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 940:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Line </span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'> not breakable.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 941:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 942:                 <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 943:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$cond</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 944:             <span class='def-SymbolStrong def-Symbol'>}</span>
 945:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 946:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>d</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 947:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$line</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 948:                         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 949:                             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Line </span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'> not breakable.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 950:                         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 951:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 952:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 953:                         <span class='def-SymbolStrong def-Symbol'>}</span>
 954:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 955:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>A</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 956:               <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Deleting all actions...</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 957:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 958:               <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$file</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%had_breakpoints</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 959:             <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 960:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 961:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$was</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 962:             
 963:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 964:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 965:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 966:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 967:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 968:             <span class='def-SymbolStrong def-Symbol'>}</span>
 969:             
 970:             <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 971:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 972:             <span class='def-SymbolStrong def-Symbol'>}</span>
 973:               <span class='def-SymbolStrong def-Symbol'>}</span>
 974:               <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 975:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>O</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 976:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@options</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 977:                 <span class='perl-Symb def-Symbol'>&amp;</span>dump_option<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 978:             <span class='def-SymbolStrong def-Symbol'>}</span>
 979:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 980:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>O</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 981:             parse_options<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 982:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 983:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\&lt;</span><span class='regexp-Symbol def-StringContent def-String'>\&lt;</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># \&lt;\&lt; for CPerl sake: not HERE</span>
 984:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@$pre</span><span class='perl-Symb def-Symbol'>,</span> action<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 985:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 986:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>>></span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 987:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@$post</span><span class='perl-Symb def-Symbol'>,</span> action<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 988:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 989:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>&lt;</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 990:             <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 991:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"All &lt; actions cleared.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 992:                 <span class='perl-Var def-Var'>$pre</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 993:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 994:             <span class='def-SymbolStrong def-Symbol'>}</span> 
 995:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'?'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 996:                 <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$pre</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 997:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"No pre-prompt Perl actions.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 998:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
 999:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1000:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Perl commands run before each prompt:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1001:                 <span class='perl-Word def-Keyword'>for</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$action</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>@$pre</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1002:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>&lt; -- </span><span class='perl-Var def-Var'>$action</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1003:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1004:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1005:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1006:             <span class='perl-Var def-Var'>$pre</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span>action<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1007:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1008:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>></span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1009:             <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1010:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"All > actions cleared.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1011:                 <span class='perl-Var def-Var'>$post</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1012:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1013:             <span class='def-SymbolStrong def-Symbol'>}</span>
1014:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'?'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1015:                 <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$post</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1016:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"No post-prompt Perl actions.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1017:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1018:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1019:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Perl commands run after each prompt:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1020:                 <span class='perl-Word def-Keyword'>for</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$action</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>@$post</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1021:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>> -- </span><span class='perl-Var def-Var'>$action</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1022:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1023:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1024:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1025:             <span class='perl-Var def-Var'>$post</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span>action<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1026:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1027:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1028:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\}</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> unbalanced<span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1029:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"{{ is now a debugger command</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span>
1030:                 <span class='perl-String def-String'>"use `;{{' if you mean Perl code</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1031:                 <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"h {{"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1032:                 <span class='perl-Word def-Keyword'>redo</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1033:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1034:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@$pretype</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1035:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1036:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1037:             <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1038:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"All { actions cleared.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1039:                 <span class='perl-Var def-Var'>$pretype</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1040:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1041:             <span class='def-SymbolStrong def-Symbol'>}</span>
1042:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'?'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1043:                 <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$pretype</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1044:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"No pre-prompt debugger actions.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1045:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1046:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1047:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Debugger commands run before each prompt:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1048:                 <span class='perl-Word def-Keyword'>for</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$action</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>@$pretype</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1049:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>{ -- </span><span class='perl-Var def-Var'>$action</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1050:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1051:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1052:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1053:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\}</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> unbalanced<span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1054:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"{ is now a debugger command</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span>
1055:                 <span class='perl-String def-String'>"use `;{' if you mean Perl code</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1056:                 <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"h {"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1057:                 <span class='perl-Word def-Keyword'>redo</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1058:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1059:             <span class='perl-Var def-Var'>$pretype</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1060:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1061:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>a</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1062:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Var def-Var'>$line</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$j</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1063:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$j</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1064:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1065:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Line </span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'> may not have an action.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1066:                 <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1067:                 <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1068:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1069:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"\</span><span class='def-NumberDec def-Number'>0</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span> action<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$j</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1070:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1071:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1072:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1073:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1074:             <span class='def-SymbolStrong def-Symbol'>}</span>
1075:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1076:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>n</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1077:                 end_report<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> CMD <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$finished</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1078:             <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1079:             <span class='perl-Var def-Var'>$laststep</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$cmd</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1080:             <span class='perl-Word def-Keyword'>last</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1081:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>s</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1082:                 end_report<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> CMD <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$finished</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1083:             <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1084:             <span class='perl-Var def-Var'>$laststep</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$cmd</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1085:             <span class='perl-Word def-Keyword'>last</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1086:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>c</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\w</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1087:                 end_report<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> CMD <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$finished</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1088:             <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1089:             <span class='perl-Comment def-Comment def-Syntax'>#  Probably not needed, since we finish an interactive</span>
1090:             <span class='perl-Comment def-Comment def-Syntax'>#  sub-session anyway...</span>
1091:             <span class='perl-Comment def-Comment def-Syntax'># local $filename = $filename;</span>
1092:             <span class='perl-Comment def-Comment def-Syntax'># local *dbline = *dbline;    # XXX Would this work</span><span class='def-TODO def-Error'>?!</span>
1093:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\D</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># subroutine name</span>
1094:                 <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$package</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'>"::"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$subname</span> 
1095:                     <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1096:                 <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>find_sub<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1097:                 <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1098:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1099:                     <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1100:                 <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1101:                 <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1102:                 <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1103:                 <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Word def-Keyword'>while</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1104:                 <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1105:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Subroutine </span><span class='perl-Var def-Var'>$subname</span><span class='perl-String def-String'> not found.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1106:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1107:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1108:             <span class='def-SymbolStrong def-Symbol'>}</span>
1109:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1110:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1111:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Line </span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'> not breakable.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1112:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1113:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1114:                 <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-Var def-Var'>$|</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>;</span><span class='def-NumberDec def-Number'>9</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># add one-time-only b.p.</span>
1115:             <span class='def-SymbolStrong def-Symbol'>}</span>
1116:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1117:                 <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1118:             <span class='def-SymbolStrong def-Symbol'>}</span>
1119:             <span class='perl-Word def-Keyword'>last</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1120:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>r</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1121:                 end_report<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> CMD <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$finished</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1122:             <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1123:             <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PrintRet</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1124:             <span class='perl-Word def-Keyword'>last</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1125:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>R</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1126:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Warning: some settings and command-line options may be lost!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1127:             <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@script</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@flags</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$cl</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1128:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@flags</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'-w'</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$ini_warn</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1129:             <span class='perl-Comment def-Comment def-Syntax'># Put all the old includes at the start to get</span>
1130:             <span class='perl-Comment def-Comment def-Syntax'># the same debugger.</span>
1131:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@ini_INC</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1132:               <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@flags</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'-I'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1133:             <span class='def-SymbolStrong def-Symbol'>}</span>
1134:             <span class='perl-Comment def-Comment def-Syntax'># Arrange for setting the old INC:</span>
1135:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_INC"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@ini_INC</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1136:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$0</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'-e'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1137:               <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>..</span><span class='perl-Var def-Var'>$#</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'>'::_&lt;-e'</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># The first line is PERL5DB</span>
1138:                     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>chomp</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cl</span> <span class='perl-Symb def-Symbol'>=</span>  <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'>'::_&lt;-e'</span><span class='perl-Var def-Var'>}</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1139:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@script</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'-e'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$cl</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1140:               <span class='def-SymbolStrong def-Symbol'>}</span>
1141:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1142:               <span class='perl-Var def-Var'>@script</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1143:             <span class='def-SymbolStrong def-Symbol'>}</span>
1144:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_HIST"</span><span class='perl-Symb def-Symbol'>,</span> 
1145:                  <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>getHistory</span><span class='perl-Symb def-Symbol'>}</span> 
1146:                  <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>GetHistory <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>@hist</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1147:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@had_breakpoints</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%had_breakpoints</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1148:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_VISITED"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@had_breakpoints</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1149:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_OPT"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>%option</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1150:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_ON_LOAD"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>%break_on_load</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1151:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@hard</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1152:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>..</span> <span class='perl-Var def-Var'>$#had_breakpoints</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1153:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1154:               <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1155:               <span class='perl-Word def-Keyword'>next</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>%dbline</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1156:               <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@hard</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$file</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span> 
1157:                 <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\(</span><span class='perl-String def-String'>eval </span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Symbol def-StringContent def-String'>\)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1158:               <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@add</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1159:               <span class='perl-Var def-Var'>@add</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>%</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span>
1160:                 <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1161:               set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_FILE_</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>%dbline</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@add</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1162:             <span class='def-SymbolStrong def-Symbol'>}</span>
1163:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@hard</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># Yes, really-really...</span>
1164:               <span class='perl-Comment def-Comment def-Syntax'># Find the subroutines in this eval</span>
1165:               <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1166:               <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$quoted</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>%subs</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>quotemeta</span> <span class='perl-Var def-Var'>$_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1167:               <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$sub</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1168:                 <span class='perl-Word def-Keyword'>next</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$quoted</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>-</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1169:                 <span class='perl-Var def-Var'>$subs</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>[</span><span class='perl-Var def-Var'>$1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1170:               <span class='def-SymbolStrong def-Symbol'>}</span>
1171:               <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>%subs</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1172:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span>
1173:                   <span class='perl-String def-String'>"No subroutines in </span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>, ignoring breakpoints.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1174:                 <span class='perl-Word def-Keyword'>next</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1175:               <span class='def-SymbolStrong def-Symbol'>}</span>
1176:             <span class='def-Label'>LINES:</span> <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$line</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%dbline</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1177:                 <span class='perl-Comment def-Comment def-Syntax'># One breakpoint per sub only:</span>
1178:                 <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$offset</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$found</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1179:               <span class='def-Label'>SUBS:</span> <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$sub</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%subs</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1180:                   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subs</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span> <span class='perl-Comment def-Comment def-Syntax'># Not after the subroutine</span>
1181:                   <span class='perl-Symb def-Symbol'>and</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$offset</span> <span class='perl-Comment def-Comment def-Syntax'># Not caught</span>
1182:                        <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$offset</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Numb def-Number'>0</span> <span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># or badly caught</span>
1183:                 <span class='perl-Var def-Var'>$found</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1184:                 <span class='perl-Var def-Var'>$offset</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$line</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Var def-Var'>$subs</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1185:                 <span class='perl-Var def-Var'>$offset</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"+</span><span class='perl-Var def-Var'>$offset</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span> SUBS <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$offset</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1186:                   <span class='def-SymbolStrong def-Symbol'>}</span>
1187:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1188:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$offset</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1189:                   <span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$found</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span>
1190:                 <span class='perl-String def-String'>"break </span><span class='perl-Var def-Var'>$offset</span><span class='perl-String def-String'> if </span><span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1191:                 <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1192:                   <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Breakpoint in </span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>:</span><span class='perl-Var def-Var'>$line</span><span class='perl-String def-String'> ignored: after all the subroutines.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1193:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1194:               <span class='def-SymbolStrong def-Symbol'>}</span>
1195:             <span class='def-SymbolStrong def-Symbol'>}</span>
1196:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_POSTPONE"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>%postponed</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1197:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_PRETYPE"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@$pretype</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1198:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_PRE"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@$pre</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1199:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_POST"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@$post</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1200:             set_list<span class='def-Symbol'>(</span><span class='perl-String def-String'>"PERLDB_TYPEAHEAD"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@typeahead</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1201:             <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_RESTART</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1202:             <span class='perl-Comment def-Comment def-Syntax'>#print "$^X, '-d', @flags, @script, ($slave_editor ? '-emacs' : ()), @ARGS";</span>
1203:             <span class='perl-Word def-Keyword'>exec</span> <span class='perl-Var def-Var'>$^X</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'-d'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@flags</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@script</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>'-emacs'</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@ARGS</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1204:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"exec failed: </span><span class='perl-Var def-Var'>$!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1205:             <span class='perl-Word def-Keyword'>last</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1206:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>T</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1207:             print_trace<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># skip DB</span>
1208:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1209:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>W</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1210:             <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>~</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1211:             <span class='perl-Var def-Var'>@to_watch</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@old_watch</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1212:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1213:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>W</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1214:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@to_watch</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1215:             <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1216:             <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1217:             <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"'</span><span class='perl-Var def-Var'>$val</span><span class='perl-String def-String'>'"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'undef'</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1218:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@old_watch</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1219:             <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1220:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1221:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Slash def-StringContent def-String'>\/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1222:             <span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1223:             <span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1224:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1225:                 <span class='perl-Comment def-Comment def-Syntax'># squelch the sigmangler</span>
1226:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1227:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1228:                 <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>'$inpat =~ m'</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$inpat</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    
1229:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1230:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$@</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1231:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1232:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1233:                 <span class='perl-Var def-Var'>$pat</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$inpat</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1234:             <span class='def-SymbolStrong def-Symbol'>}</span>
1235:             <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$start</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1236:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1237:             <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>'</span>
1238: <span class='perl-String def-String'>                for (;;) {</span>
1239: <span class='perl-String def-String'>                ++$start;</span>
1240: <span class='perl-String def-String'>                $start = 1 if ($start > $max);</span>
1241: <span class='perl-String def-String'>                last if ($start == $end);</span>
1242: <span class='perl-String def-String'>                if ($dbline[$start] =~ m'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$pat</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'i) {</span>
1243: <span class='perl-String def-String'>                    if ($slave_editor) {</span>
1244: <span class='perl-String def-String'>                    print $OUT "\032\032$filename:$start:0\n";</span>
1245: <span class='perl-String def-String'>                    } else {</span>
1246: <span class='perl-String def-String'>                    print $OUT "$start:\t", $dbline[$start], "\n";</span>
1247: <span class='perl-String def-String'>                    }</span>
1248: <span class='perl-String def-String'>                    last;</span>
1249: <span class='perl-String def-String'>                }</span>
1250: <span class='perl-String def-String'>                } '</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1251:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"/</span><span class='perl-Var def-Var'>$pat</span><span class='perl-String def-String'>/: not found</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$end</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1252:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1253:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1254:             <span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1255:             <span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>:</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1256:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$inpat</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1257:                 <span class='perl-Comment def-Comment def-Syntax'># squelch the sigmangler</span>
1258:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1259:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1260:                 <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>'$inpat =~ m'</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$inpat</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    
1261:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1262:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$@</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1263:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1264:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1265:                 <span class='perl-Var def-Var'>$pat</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$inpat</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1266:             <span class='def-SymbolStrong def-Symbol'>}</span>
1267:             <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$start</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1268:             <span class='perl-Var def-Var'>$incr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1269:             <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>'</span>
1270: <span class='perl-String def-String'>                for (;;) {</span>
1271: <span class='perl-String def-String'>                --$start;</span>
1272: <span class='perl-String def-String'>                $start = $max if ($start &lt;= 0);</span>
1273: <span class='perl-String def-String'>                last if ($start == $end);</span>
1274: <span class='perl-String def-String'>                if ($dbline[$start] =~ m'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$pat</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'i) {</span>
1275: <span class='perl-String def-String'>                    if ($slave_editor) {</span>
1276: <span class='perl-String def-String'>                    print $OUT "\032\032$filename:$start:0\n";</span>
1277: <span class='perl-String def-String'>                    } else {</span>
1278: <span class='perl-String def-String'>                    print $OUT "$start:\t", $dbline[$start], "\n";</span>
1279: <span class='perl-String def-String'>                    }</span>
1280: <span class='perl-String def-String'>                    last;</span>
1281: <span class='perl-String def-String'>                }</span>
1282: <span class='perl-String def-String'>                } '</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1283:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"?</span><span class='perl-Var def-Var'>$pat</span><span class='perl-String def-String'>?: not found</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$start</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$end</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1284:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1285:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$rc</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>-</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1286:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>pop</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@hist</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1287:             <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$#hist</span><span class='perl-Symb def-Symbol'>-</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$2</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$2</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Var def-Var'>$#hist</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1288:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$hist</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1289:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$cmd</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1290:             <span class='perl-Word def-Keyword'>redo</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1291:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$sh</span><span class='perl-Var def-Var'>$sh</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\x00</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-Symbol def-StringContent def-String'>\xff</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1292:             <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1293:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1294:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$rc</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$rc</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1295:             <span class='perl-Var def-Var'>$pat</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"^</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1296:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>pop</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@hist</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1297:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#hist</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1298:                 <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$hist</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$pat</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1299:             <span class='def-SymbolStrong def-Symbol'>}</span>
1300:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1301:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"No such command!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1302:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1303:             <span class='def-SymbolStrong def-Symbol'>}</span>
1304:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$hist</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1305:             <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$cmd</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1306:             <span class='perl-Word def-Keyword'>redo</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1307:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$sh</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1308:             <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>SHELL</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-String def-String'>"/bin/sh"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1309:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1310:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Var def-Var'>$sh</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\x00</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-Symbol def-StringContent def-String'>\xff</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1311:             <span class='perl-Comment def-Comment def-Syntax'># XXX: using csh or tcsh destroys sigint retvals!</span>
1312:             <span class='perl-Comment def-Comment def-Syntax'>#&amp;system($1);  # use this instead</span>
1313:             <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>SHELL</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-String def-String'>"/bin/sh"</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"-c"</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1314:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1315:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>H</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>-</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1316:             <span class='perl-Var def-Var'>$end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$#hist</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1317:             <span class='perl-Var def-Var'>$hist</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$hist</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1318:             <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Var def-Var'>$#hist</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>></span><span class='perl-Var def-Var'>$end</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>-</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1319:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>: "</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$hist</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
1320:                   <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$hist</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1321:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1322:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1323:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span>man<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span>perl<span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span>doc<span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span>(<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1324:             runman<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1325:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1326:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>p</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>print {</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::OUT} </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>_</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1327:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>p</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>print {</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::OUT} </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1328:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>=</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1329:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@keys</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1330:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1331:                 <span class='perl-Var def-Var'>@keys</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%alias</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1332:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1333:                         <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>my</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$v</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1334:                 <span class='perl-Comment def-Comment def-Syntax'># can't use $_ or kill //g state</span>
1335:                 <span class='perl-Word def-Keyword'>for</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$x</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$v</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Var def-Var'>$x</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>a</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span> <span class='def-SymbolStrong def-Symbol'>}</span>
1336:                 <span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"s</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$v</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1337:                 <span class='perl-Comment def-Comment def-Syntax'># squelch the sigmangler</span>
1338:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1339:                 <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1340:                 <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>"sub { s</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$v</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-String def-String'> }; </span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1341:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Can't alias </span><span class='perl-Var def-Var'>$k</span><span class='perl-String def-String'> to </span><span class='perl-Var def-Var'>$v</span><span class='perl-String def-String'>: </span><span class='perl-Var def-Var'>$@</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1342:                 <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1343:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1344:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1345:                 <span class='perl-Var def-Var'>@keys</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$k</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1346:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1347:             <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1348:                 <span class='perl-Var def-Var'>@keys</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$cmd</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1349:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1350:             <span class='perl-Word def-Keyword'>for</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$k</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@keys</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1351:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$v</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'></span><span class='perl-String def-String'>s</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\a</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'></span><span class='def-NumberDec def-Number'>1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'></span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1352:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'>= </span><span class='perl-Var def-Var'>$1</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1353:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1354:                 <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1355:                     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-Var def-Var'>$alias</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$k</span><span class='perl-Symb def-Symbol'>}</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1356:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1357:                 <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1358:                 <span class='perl-Word def-Keyword'>print</span> <span class='perl-String def-String'>"No alias for </span><span class='perl-Var def-Var'>$k</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1359:                 <span class='def-SymbolStrong def-Symbol'>}</span> 
1360:             <span class='def-SymbolStrong def-Symbol'>}</span>
1361:             <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1362:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>|</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1363:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1364:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>SAVEOUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't save STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1365:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;OUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't redirect STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1366:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1367:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>SAVEOUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;OUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't save DB::OUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1368:             <span class='def-SymbolStrong def-Symbol'>}</span>
1369:             fix_less<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1370:             <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$piped</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$pager</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1371:                 <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't pipe output to `</span><span class='perl-Var def-Var'>$pager</span><span class='perl-String def-String'>'"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1372:                 <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1373:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Comment def-Comment def-Syntax'># XXX: lost message</span>
1374:                     <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore DB::OUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1375:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;SAVEOUT"</span><span class='def-Symbol'>)</span>
1376:                   <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1377:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>close</span><span class='def-Symbol'>(</span>SAVEOUT<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1378:                 <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1379:                 <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Comment def-Comment def-Syntax'># XXX: lost message</span>
1380:                     <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore DB::OUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1381:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1382:                 <span class='perl-Word def-Keyword'>next</span> CMD<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1383:             <span class='def-SymbolStrong def-Symbol'>}</span>
1384:             <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PIPE</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>catch</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span>
1385:                 <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>""</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PIPE</span><span class='perl-Symb def-Symbol'>}</span>  <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span>  <span class='perl-String def-String'>"DEFAULT"</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PIPE</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1386:             <span class='perl-Var def-Var'>$selected</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span>OUT<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1387:             <span class='perl-Var def-Var'>$|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1388:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$selected</span> <span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$selected</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1389:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1390:             <span class='perl-Word def-Keyword'>redo</span> PIPE<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1391:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1392:             <span class='perl-Comment def-Comment def-Syntax'># XXX Local variants do not work!</span>
1393:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>t</span><span class='regexp-SymbClass def-Var'>\s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::trace |= </span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>;</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1394:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>s</span><span class='regexp-SymbClass def-Var'>\s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::single = </span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>;</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>$laststep</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'s'</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1395:             <span class='perl-Var def-Var'>$cmd</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>n</span><span class='regexp-SymbClass def-Var'>\s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::single = </span><span class='def-NumberDec def-Number'>2</span><span class='perl-String def-String'>;</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>$laststep</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'n'</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1396:         <span class='def-SymbolStrong def-Symbol'>}</span>        <span class='perl-Comment def-Comment def-Syntax'># PIPE:</span>
1397:         <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>^D = </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>^D | </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::db_stop;</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-Var def-Var'>$cmd</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1398:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$onetimeDump</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1399:         <span class='perl-Var def-Var'>$onetimeDump</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>undef</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1400:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term_pid</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$$</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1401:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1402:         <span class='def-SymbolStrong def-Symbol'>}</span>
1403:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>continue</span> <span class='def-SymbolStrong def-Symbol'>{</span>        <span class='perl-Comment def-Comment def-Syntax'># CMD:</span>
1404:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$piped</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1405:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1406:             <span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>  
1407:             <span class='perl-Comment def-Comment def-Syntax'># we cannot warn here: the handle is missing --tchrist</span>
1408:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>close</span><span class='def-Symbol'>(</span>OUT<span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Word def-Keyword'>print</span> SAVEOUT <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>Can't close DB::OUT</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1409: 
1410:             <span class='perl-Comment def-Comment def-Syntax'># most of the $? crud was coping with broken cshisms</span>
1411:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1412:             <span class='perl-Word def-Keyword'>print</span> SAVEOUT <span class='perl-String def-String'>"Pager `</span><span class='perl-Var def-Var'>$pager</span><span class='perl-String def-String'>' failed: "</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1413:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1414:                 <span class='perl-Word def-Keyword'>print</span> SAVEOUT <span class='perl-String def-String'>"shell returned -</span><span class='def-NumberDec def-Number'>1</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1415:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>8</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1416:                 <span class='perl-Word def-Keyword'>print</span> SAVEOUT 
1417:                   <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>127</span> <span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>" (SIG#"</span><span class='perl-Symb def-Symbol'>.</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Numb def-Number'>127</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'>")"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>""</span><span class='perl-Symb def-Symbol'>,</span> 
1418:                   <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>128</span> <span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>" -- core dumped"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>""</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1419:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1420:                 <span class='perl-Word def-Keyword'>print</span> SAVEOUT <span class='perl-String def-String'>"status "</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>8</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1421:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1422:             <span class='def-SymbolStrong def-Symbol'>}</span> 
1423: 
1424:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore DB::OUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1425:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;SAVEOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1426:             <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PIPE</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"DEFAULT"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PIPE</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>catch</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1427:             <span class='perl-Comment def-Comment def-Syntax'># Will stop ignoring SIGPIPE if done like nohup(1)</span>
1428:             <span class='perl-Comment def-Comment def-Syntax'># does SIGINT but Perl doesn't give us a choice.</span>
1429:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1430:             <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;SAVEOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore DB::OUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1431:         <span class='def-SymbolStrong def-Symbol'>}</span>
1432:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>close</span><span class='def-Symbol'>(</span>SAVEOUT<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1433:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$selected</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$selected</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$selected</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1434:         <span class='perl-Var def-Var'>$piped</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1435:         <span class='def-SymbolStrong def-Symbol'>}</span>
1436:     <span class='def-SymbolStrong def-Symbol'>}</span>            <span class='perl-Comment def-Comment def-Syntax'># CMD:</span>
1437:        <span class='perl-Var def-Var'>$fall_off_end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$cmd</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># Emulate `q' on EOF</span>
1438:     <span class='perl-Word def-Keyword'>foreach</span> <span class='perl-Var def-Var'>$evalarg</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@$post</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1439:       <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Word def-Keyword'>eval</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1440:     <span class='def-SymbolStrong def-Symbol'>}</span>
1441:     <span class='def-SymbolStrong def-Symbol'>}</span>                <span class='perl-Comment def-Comment def-Syntax'># if ($single || $signal)</span>
1442:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$!</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$^E</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$,</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$\</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$^W</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@saved</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1443:     <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1444: <span class='def-SymbolStrong def-Symbol'>}</span>
1445: 
1446: <span class='perl-Comment def-Comment def-Syntax'># The following code may be executed now:</span>
1447: <span class='perl-Comment def-Comment def-Syntax'># BEGIN {warn 4}</span>
1448: 
1449: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-Word def-Keyword'>sub</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1450:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$al</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$ret</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@ret</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1451:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sub</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>10</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>10</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>10</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'::AUTOLOAD'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1452:     <span class='perl-Var def-Var'>$al</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>" for </span><span class='perl-Var def-Var'>$$sub</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1453:     <span class='def-SymbolStrong def-Symbol'>}</span>
1454:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># Protect from non-local exits</span>
1455:     <span class='perl-Var def-Var'>$#stack</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1456:     <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$single</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1457:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1458:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>4</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$deep</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1459:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>4</span> 
1460:      <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"in  "</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> 
1461:      <span class='perl-Comment def-Comment def-Syntax'># Why -1? But it works! :-(</span>
1462:      print_trace<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$LINEINFO</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>)</span>
1463:      <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"entering </span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1464:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>wantarray</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1465:     <span class='perl-Var def-Var'>@ret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1466:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1467:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>4</span> 
1468:      <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"out "</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> 
1469:          print_trace<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$LINEINFO</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>)</span>
1470:      <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"exited </span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1471:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>16</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1472:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$LINEINFO</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1473:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>16</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1474:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-String def-String'>"list context return from </span><span class='perl-Var def-Var'>$sub</span><span class='perl-String def-String'>:</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1475:         dumpit<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$fh</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>@ret</span> <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1476:         <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1477:     <span class='def-SymbolStrong def-Symbol'>}</span>
1478:     <span class='perl-Var def-Var'>@ret</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1479:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1480:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>wantarray</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1481:         <span class='perl-Var def-Var'>$ret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1482:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1483:             <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>$ret</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1484:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1485:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$stack</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>-</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1486:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>4</span> 
1487:      <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"out "</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> 
1488:           print_trace<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$LINEINFO</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>)</span>
1489:      <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"exited </span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$al</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1490:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>16</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>wantarray</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1491:             <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$LINEINFO</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1492:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>16</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1493:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>wantarray</span> 
1494:              <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"scalar context return from </span><span class='perl-Var def-Var'>$sub</span><span class='perl-String def-String'>: "</span> 
1495:              <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"void context return from </span><span class='perl-Var def-Var'>$sub</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1496:         dumpit<span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$fh</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$ret</span> <span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>wantarray</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1497:         <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1498:     <span class='def-SymbolStrong def-Symbol'>}</span>
1499:     <span class='perl-Var def-Var'>$ret</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1500:     <span class='def-SymbolStrong def-Symbol'>}</span>
1501: <span class='def-SymbolStrong def-Symbol'>}</span>
1502: 
1503: <span class='perl-Word def-Keyword'>sub</span> save <span class='def-SymbolStrong def-Symbol'>{</span>
1504:     <span class='perl-Var def-Var'>@saved</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$@</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$!</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$^E</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$,</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$\</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$^W</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1505:     <span class='perl-Var def-Var'>$,</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$/</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$\</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>""</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$^W</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1506: <span class='def-SymbolStrong def-Symbol'>}</span>
1507: 
1508: <span class='perl-Comment def-Comment def-Syntax'># The following takes its argument via $evalarg to preserve current @_</span>
1509: 
1510: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1511:     <span class='perl-Comment def-Comment def-Syntax'># 'my' would make it visible from user code</span>
1512:     <span class='perl-Comment def-Comment def-Syntax'>#    but so does local! --tchrist  </span>
1513:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>@res</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            
1514:     <span class='def-SymbolStrong def-Symbol'>{</span>
1515:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$otrace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$trace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1516:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$osingle</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$single</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1517:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$od</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$^D</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1518:     <span class='def-SymbolStrong def-Symbol'>{</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$evalarg</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$evalarg</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>
1519:     <span class='perl-Var def-Var'>@res</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$usercontext</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$evalarg</span><span class='perl-String def-String'>;</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># '\n' for nice recursive debug</span>
1520:     <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$otrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1521:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$osingle</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1522:     <span class='perl-Var def-Var'>$^D</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$od</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1523:     <span class='def-SymbolStrong def-Symbol'>}</span>
1524:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$at</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$@</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1525:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$saved</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Preserve the old value of $@</span>
1526:     <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>save</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1527:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$at</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1528:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$at</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1529:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$onetimeDump</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'dump'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1530:     dumpit<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>@res</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1531:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$onetimeDump</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'methods'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1532:     methods<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$res</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1533:     <span class='def-SymbolStrong def-Symbol'>}</span>
1534:     <span class='perl-Var def-Var'>@res</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1535: <span class='def-SymbolStrong def-Symbol'>}</span>
1536: 
1537: <span class='perl-Word def-Keyword'>sub</span> postponed_sub <span class='def-SymbolStrong def-Symbol'>{</span>
1538:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$subname</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1539:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>break</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>+-</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'>if</span><span class='regexp-SymbClass def-Var'>\s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1540:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$offset</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1541:     <span class='perl-Comment def-Comment def-Syntax'># Filename below can contain ':'</span>
1542:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span>find_sub<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subname</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\d</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>-</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1543:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1544:       <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$offset</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1545:       <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$main::</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'_&lt;'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1546:       <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$^W</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># != 0 is magical below</span>
1547:       <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1548:       <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$max</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1549:       <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Word def-Keyword'>until</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$max</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1550:       <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1551:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1552:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Subroutine </span><span class='perl-Var def-Var'>$subname</span><span class='perl-String def-String'> not found.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1553:     <span class='def-SymbolStrong def-Symbol'>}</span>
1554:     <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1555:   <span class='def-SymbolStrong def-Symbol'>}</span>
1556:   <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$postponed</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subname</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'compile'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='def-SymbolStrong def-Symbol'>}</span>
1557:   <span class='perl-Comment def-Comment def-Syntax'>#print $OUT "In postponed_sub for `$subname'.\n";</span>
1558: <span class='def-SymbolStrong def-Symbol'>}</span>
1559: 
1560: <span class='perl-Word def-Keyword'>sub</span> postponed <span class='def-SymbolStrong def-Symbol'>{</span>
1561:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ImmediateStop</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1562:     <span class='perl-Var def-Var'>$ImmediateStop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1563:     <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1564:   <span class='def-SymbolStrong def-Symbol'>}</span>
1565:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Symb def-Symbol'>&amp;</span>postponed_sub
1566:     <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>ref</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'GLOB'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># A subroutine is compiled.</span>
1567:   <span class='perl-Comment def-Comment def-Syntax'># Cannot be done before the file is compiled</span>
1568:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>*dbline</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1569:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$dbline</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1570:   <span class='perl-Var def-Var'>$filename</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>_&lt;</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1571:   <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"'</span><span class='perl-Var def-Var'>$filename</span><span class='perl-String def-String'>' loaded...</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
1572:     <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$break_on_load</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1573:   <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-String def-String'>' '</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Var def-Var'>$stack_depth</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"Package </span><span class='perl-Var def-Var'>$filename</span><span class='perl-String def-String'>.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$frame</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1574:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1575:   <span class='perl-Var def-Var'>$had_breakpoints</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1576:   <span class='perl-Comment def-Comment def-Syntax'>#%dbline = %{$postponed_file{$filename}}; # Cannot be done: unsufficient magic</span>
1577:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$key</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1578:   <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$key</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1579:     <span class='perl-Var def-Var'>$dbline</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$key</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$key</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1580:   <span class='def-SymbolStrong def-Symbol'>}</span>
1581:   <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$postponed_file</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$filename</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1582: <span class='def-SymbolStrong def-Symbol'>}</span>
1583: 
1584: <span class='perl-Word def-Keyword'>sub</span> dumpit <span class='def-SymbolStrong def-Symbol'>{</span>
1585:     <span class='perl-Word def-Keyword'>local</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$savout</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1586:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$osingle</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$single</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1587:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$otrace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$trace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1588:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1589:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1590:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1591:     <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpValue</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1592:     <span class='perl-Word def-Keyword'>do</span> <span class='perl-String def-String'>'dumpvar.pl'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1593:     <span class='def-SymbolStrong def-Symbol'>}</span>
1594:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dumpValue</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1595:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>main</span><span class='perl-Symb def-Symbol'>::</span>dumpValue<span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1596:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1597:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"dumpvar.pl not available.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1598:     <span class='def-SymbolStrong def-Symbol'>}</span>
1599:     <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$osingle</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1600:     <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$otrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1601:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$savout</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    
1602: <span class='def-SymbolStrong def-Symbol'>}</span>
1603: 
1604: <span class='perl-Comment def-Comment def-Syntax'># Tied method do not create a context, so may get wrong message:</span>
1605: 
1606: <span class='perl-Word def-Keyword'>sub</span> print_trace <span class='def-SymbolStrong def-Symbol'>{</span>
1607:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1608:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@sub</span> <span class='perl-Symb def-Symbol'>=</span> dump_trace<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1609:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$short</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>2</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Print short report, next one for sub name</span>
1610:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1611:   <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$#sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1612:     <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1613:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$"</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>', '</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1614:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$args</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>args</span><span class='perl-Symb def-Symbol'>}</span> 
1615:     <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"(</span><span class='perl-Var def-Var'>@</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>args</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>)"</span>
1616:       <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>''</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1617:     <span class='perl-Var def-Var'>$args</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$args</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$maxtrace</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>3</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'...'</span> 
1618:       <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$args</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Var def-Var'>$maxtrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1619:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1620:     <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'-e'</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"file `</span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>'"</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$short</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1621:     <span class='perl-Var def-Var'>$s</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>sub</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1622:     <span class='perl-Var def-Var'>$s</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$s</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$maxtrace</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>3</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'...'</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$s</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Var def-Var'>$maxtrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    
1623:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$short</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1624:       <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>4</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>3</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1625:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>context</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>=</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Var def-Var'>$args</span><span class='perl-String def-String'> from </span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>:</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>line</span><span class='perl-Symb def-Symbol'>}</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1626:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1627:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$fh</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>context</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'> = </span><span class='perl-Var def-Var'>$s</span><span class='perl-Var def-Var'>$args</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span>
1628:     <span class='perl-String def-String'>" called from </span><span class='perl-Var def-Var'>$file</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span> 
1629:       <span class='perl-String def-String'>" line </span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>line</span><span class='perl-Symb def-Symbol'>}</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1630:     <span class='def-SymbolStrong def-Symbol'>}</span>
1631:   <span class='def-SymbolStrong def-Symbol'>}</span>
1632: <span class='def-SymbolStrong def-Symbol'>}</span>
1633: 
1634: <span class='perl-Word def-Keyword'>sub</span> dump_trace <span class='def-SymbolStrong def-Symbol'>{</span>
1635:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$skip</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1636:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$count</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Numb def-Number'>1e9</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1637:   <span class='perl-Var def-Var'>$skip</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1638:   <span class='perl-Var def-Var'>$count</span> <span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$skip</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1639:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$p</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$h</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$args</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$e</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$r</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>@a</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>@sub</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$context</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1640:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$nothard</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>8</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1641:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Do not want to trace this.</span>
1642:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$otrace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$trace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1643:   <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1644:   <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$skip</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1645:        <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Var def-Var'>$count</span> <span class='perl-Symb def-Symbol'>and</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$p</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$h</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$context</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$e</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$r</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>caller</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$i</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1646:        <span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1647:     <span class='perl-Var def-Var'>@a</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1648:     <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$arg</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@args</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1649:       <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$type</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1650:       <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$arg</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1651:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@a</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"undef"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1652:       <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$nothard</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>tied</span> <span class='perl-Var def-Var'>$arg</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1653:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@a</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"tied"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1654:       <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$nothard</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$type</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>ref</span> <span class='perl-Var def-Var'>$arg</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1655:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@a</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"ref(</span><span class='perl-Var def-Var'>$type</span><span class='perl-String def-String'>)"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1656:       <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1657:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$arg</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># Safe to stringify now - should not call f().</span>
1658:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1659:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>'</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>'</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span>
1660:       <span class='perl-Symb def-Symbol'>unless</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span> -<span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\d</span>.<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>+</span> <span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span> <span class='regexp-Symbol def-StringContent def-String'>\*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-SymbClass def-Var'>\w</span>:<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>x</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1661:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\200</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-Symbol def-StringContent def-String'>\377</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>sprintf("M-%c",ord(</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>)&amp;</span><span class='def-NumberDec def-Number'>0177</span><span class='perl-String def-String'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>eg</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1662:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-SpecOperator def-KeywordStrong def-Keyword'>\37</span><span class='regexp-Symbol def-StringContent def-String'>\177</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>sprintf("^%c",ord(</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>)^</span><span class='def-NumberDec def-Number'>64</span><span class='perl-String def-String'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>eg</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1663:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@a</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1664:       <span class='def-SymbolStrong def-Symbol'>}</span>
1665:     <span class='def-SymbolStrong def-Symbol'>}</span>
1666:     <span class='perl-Var def-Var'>$context</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$context</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>'@'</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$context</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'.'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1667:     <span class='perl-Var def-Var'>$args</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$h</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>[</span><span class='perl-Var def-Var'>@a</span><span class='def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Word def-Keyword'>undef</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1668:     <span class='perl-Var def-Var'>$e</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\;</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Symbol def-StringContent def-String'>\Z</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$e</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1669:     <span class='perl-Var def-Var'>$e</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$e</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1670:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$r</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1671:       <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"require '</span><span class='perl-Var def-Var'>$e</span><span class='perl-String def-String'>'"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1672:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$r</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1673:       <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"eval '</span><span class='perl-Var def-Var'>$e</span><span class='perl-String def-String'>'"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1674:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'(eval)'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1675:       <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"eval {...}"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1676:     <span class='def-SymbolStrong def-Symbol'>}</span>
1677:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@sub</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>context </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$context</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>sub </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>args </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$args</span><span class='perl-Symb def-Symbol'>,</span>
1678:         <span class='perl-Var def-Var'>file </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>line </span><span class='perl-Symb def-Symbol'>=></span> <span class='perl-Var def-Var'>$line</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1679:     <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$signal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1680:   <span class='def-SymbolStrong def-Symbol'>}</span>
1681:   <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$otrace</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1682:   <span class='perl-Var def-Var'>@sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1683: <span class='def-SymbolStrong def-Symbol'>}</span>
1684: 
1685: <span class='perl-Word def-Keyword'>sub</span> action <span class='def-SymbolStrong def-Symbol'>{</span>
1686:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$action</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1687:     <span class='perl-Word def-Keyword'>while</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$action</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1688:     <span class='perl-Comment def-Comment def-Syntax'>#print $OUT "+ ";</span>
1689:     <span class='perl-Comment def-Comment def-Syntax'>#$action .= "\n";</span>
1690:     <span class='perl-Var def-Var'>$action</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>&amp;</span>gets<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1691:     <span class='def-SymbolStrong def-Symbol'>}</span>
1692:     <span class='perl-Var def-Var'>$action</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1693: <span class='def-SymbolStrong def-Symbol'>}</span>
1694: 
1695: <span class='perl-Word def-Keyword'>sub</span> unbalanced <span class='def-SymbolStrong def-Symbol'>{</span> 
1696:     <span class='perl-Comment def-Comment def-Syntax'># i hate using globals!</span>
1697:     <span class='perl-Var def-Var'>$balanced_brace_re</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-ReType perl-Word def-Keyword'>qr</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-String def-String'> </span>
1698: <span class='perl-String def-String'>    </span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'> </span><span class='regexp-Symbol def-StringContent def-String'>\{</span><span class='perl-String def-String'></span>
1699: <span class='perl-String def-String'>          </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span>
1700:          <span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Operator def-Keyword'>?></span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span>{}<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span> <span class='regexp-MetaSymb def-Symbol'>+</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='def-Comment def-Syntax'>            # Non-parens without backtracking</span>
1701:            <span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>
1702:          <span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>??{</span><span class='regexp-InsertArea def-Insertion'> </span><span class='perl-Var def-Var'>$balanced_brace_re</span><span class='regexp-InsertArea def-Insertion'> </span><span class='regexp-SpecQuote def-StringEdge def-String'>}</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span> # Group with matching parens
1703:           <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span> <span class='regexp-MetaSymb def-Symbol'>*</span>
1704: <span class='perl-String def-String'>      </span><span class='regexp-Symbol def-StringContent def-String'>\}</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-String def-String'></span>
1705: <span class='perl-String def-String'>   </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>x</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1706:    <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>m</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$balanced_brace_re</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1707: <span class='def-SymbolStrong def-Symbol'>}</span>
1708: 
1709: <span class='perl-Word def-Keyword'>sub</span> gets <span class='def-SymbolStrong def-Symbol'>{</span>
1710:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>readline</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"cont: "</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1711: <span class='def-SymbolStrong def-Symbol'>}</span>
1712: 
1713: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1714:     <span class='perl-Comment def-Comment def-Syntax'># We save, change, then restore STDIN and STDOUT to avoid fork() since</span>
1715:     <span class='perl-Comment def-Comment def-Syntax'># some non-Unix systems can do system() but have problems with fork().</span>
1716:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>SAVEIN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;&amp;STDIN"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't save STDIN"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1717:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>SAVEOUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;STDOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't save STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1718:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDIN</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;&amp;IN"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't redirect STDIN"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1719:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;OUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't redirect STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1720: 
1721:     <span class='perl-Comment def-Comment def-Syntax'># XXX: using csh or tcsh destroys sigint retvals!</span>
1722:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1723:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDIN</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;&amp;SAVEIN"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore STDIN"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1724:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>STDOUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>">&amp;SAVEOUT"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Can't restore STDOUT"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1725:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>close</span><span class='def-Symbol'>(</span>SAVEIN<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1726:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>close</span><span class='def-Symbol'>(</span>SAVEOUT<span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1727: 
1728: 
1729:     <span class='perl-Comment def-Comment def-Syntax'># most of the $? crud was coping with broken cshisms</span>
1730:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>8</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1731:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"(Command exited "</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>></span><span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>8</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>")</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1732:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1733:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span> <span class='perl-String def-String'>"(Command died of SIG#"</span><span class='perl-Symb def-Symbol'>,</span>  <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>127</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>
1734:         <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$?</span> <span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Numb def-Number'>128</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>" -- core dumped"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>")"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1735:     <span class='def-SymbolStrong def-Symbol'>}</span> 
1736: 
1737:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$?</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1738: 
1739: <span class='def-SymbolStrong def-Symbol'>}</span>
1740: 
1741: <span class='perl-Word def-Keyword'>sub</span> setterm <span class='def-SymbolStrong def-Symbol'>{</span>
1742:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1743:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1744:     <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Term::ReadLine</span> } <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-Var def-Var'>$@</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1745:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$notty</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1746:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$tty</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1747:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>IN<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"&lt;</span><span class='perl-Var def-Var'>$tty</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-String def-String'>"Cannot open TTY `</span><span class='perl-Var def-Var'>$TTY</span><span class='perl-String def-String'>' for read: </span><span class='perl-Var def-Var'>$!</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1748:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>OUT<span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>"></span><span class='perl-Var def-Var'>$tty</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-String def-String'>"Cannot open TTY `</span><span class='perl-Var def-Var'>$TTY</span><span class='perl-String def-String'>' for write: </span><span class='perl-Var def-Var'>$!</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1749:         <span class='perl-Var def-Var'>$IN</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*IN</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1750:         <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1751:         <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$sel</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1752:         <span class='perl-Var def-Var'>$|</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1753:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sel</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1754:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1755:         <span class='perl-Word def-Keyword'>eval</span> <span class='perl-String def-String'>"require Term::Rendezvous;"</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1756:         <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$rv</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PERLDB_NOTTY</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-String def-String'>"/tmp/perldbtty</span><span class='perl-Var def-Var'>$$</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1757:         <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$term_rv</span> <span class='perl-Symb def-Symbol'>=</span> new <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Term</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Rendezvous</span> <span class='perl-Var def-Var'>$rv</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1758:         <span class='perl-Var def-Var'>$IN</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$term_rv</span><span class='perl-Symb def-Symbol'>-></span>IN<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1759:         <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$term_rv</span><span class='perl-Symb def-Symbol'>-></span>OUT<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1760:     <span class='def-SymbolStrong def-Symbol'>}</span>
1761:     <span class='def-SymbolStrong def-Symbol'>}</span>
1762:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$rl</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1763:     <span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>=</span> new <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Term::ReadLine::Stub</span> <span class='perl-String def-String'>'perldb'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$IN</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1764:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1765:     <span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>=</span> new <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Term::ReadLine</span> <span class='perl-String def-String'>'perldb'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$IN</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1766: 
1767:     <span class='perl-Var def-Var'>$rl_attribs</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Attribs<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1768:     <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>basic_word_break_characters</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'-:+/*,[])}'</span> 
1769:       <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>basic_word_break_characters</span><span class='perl-Symb def-Symbol'>}</span> 
1770:         <span class='perl-Symb def-Symbol'>and</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>index</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>basic_word_break_characters</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>":"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1771:     <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>special_prefixes</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'$@&amp;%'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1772:     <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>completer_word_break_characters</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'$@&amp;%'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1773:     <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>completion_function</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>db_complete<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1774:     <span class='def-SymbolStrong def-Symbol'>}</span>
1775:     <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$LINEINFO</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1776:     <span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$console</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$lineinfo</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1777:     <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>MinLine<span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1778:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>setHistory</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>@hist</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-String def-String'>"?"</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1779:       <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>SetHistory<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@hist</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1780:     <span class='def-SymbolStrong def-Symbol'>}</span>
1781:     ornaments<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$ornaments</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ornaments</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1782:     <span class='perl-Var def-Var'>$term_pid</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$$</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1783: <span class='def-SymbolStrong def-Symbol'>}</span>
1784: 
1785: <span class='perl-Word def-Keyword'>sub</span> resetterm <span class='def-SymbolStrong def-Symbol'>{</span>            <span class='perl-Comment def-Comment def-Syntax'># We forked, so we need a different TTY</span>
1786:     <span class='perl-Var def-Var'>$term_pid</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$$</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1787:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span>get_fork_TTY<span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1788:       <span class='perl-Symb def-Symbol'>&amp;</span>get_fork_TTY<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1789:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$fork_TTY</span> 
1790:          <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>TERM</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>TERM</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'xterm'</span> 
1791:          <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>WINDOWID</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>DISPLAY</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1792:         <span class='perl-Comment def-Comment def-Syntax'># Possibly _inside_ XTERM</span>
1793:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span> XT<span class='perl-Symb def-Symbol'>,</span> <span class='perl-ReType perl-Word def-Keyword'>q</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>[</span><span class='perl-String def-String'>3>&amp;1 xterm -title 'Forked Perl debugger' -e sh -c 'tty 1>&amp;3;\</span>
1794: <span class='perl-String def-String'> sleep 10000000' |</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1795:         <span class='perl-Var def-Var'>$fork_TTY</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Stream def-Path def-URI'>&lt;XT></span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1796:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>chomp</span> <span class='perl-Var def-Var'>$fork_TTY</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1797:     <span class='def-SymbolStrong def-Symbol'>}</span>
1798:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$fork_TTY</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1799:       TTY<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$fork_TTY</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1800:       <span class='perl-Word def-Keyword'>undef</span> <span class='perl-Var def-Var'>$fork_TTY</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1801:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1802: <span class='def-Text'>      print_help</span><span class='def-Symbol'>(</span><span class='perl-HereDocLt perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>&lt;&lt;</span><span class='perl-HereDocName def-Label'>EOP</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='perl-HereDoc perl-String def-String'></span>
1803: <span class='perl-HereDoc perl-String def-String'>I&lt;#########> Forked, but do not know how to change a B&lt;TTY>. I&lt;#########></span>
1804: <span class='perl-HereDoc perl-String def-String'>  Define B&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-HereDoc perl-String def-String'>DB::fork_TTY> </span>
1805: <span class='perl-HereDoc perl-String def-String'>       - or a function B&lt;DB::get_fork_TTY()> which will set B&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-HereDoc perl-String def-String'>DB::fork_TTY>.</span>
1806: <span class='perl-HereDoc perl-String def-String'>  The value of B&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-HereDoc perl-String def-String'>DB::fork_TTY> should be the name of I&lt;TTY> to use.</span>
1807: <span class='perl-HereDoc perl-String def-String'>  On I&lt;UNIX>-like systems one can get the name of a I&lt;TTY> for the given window</span>
1808: <span class='perl-HereDoc perl-String def-String'>  by typing B&lt;tty>, and disconnect the I&lt;shell> from I&lt;TTY> by B&lt;sleep </span><span class='def-NumberDec def-Number'>1000000</span><span class='perl-HereDoc perl-String def-String'>>.</span>
1809: <span class='perl-HereDocName def-Label'>EOP</span>
1810:     <span class='def-SymbolStrong def-Symbol'>}</span>
1811: <span class='def-SymbolStrong def-Symbol'>}</span>
1812: 
1813: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>readline</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1814:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$.</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1815:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@typeahead</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1816:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$left</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@typeahead</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1817:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$got</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Var def-Var'>@typeahead</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1818:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"auto(-</span><span class='perl-Var def-Var'>$left</span><span class='perl-String def-String'>)"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$got</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1819:     <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>AddHistory<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$got</span><span class='def-Symbol'>)</span> 
1820:       <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$got</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>addHistory</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1821:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$got</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1822:   <span class='def-SymbolStrong def-Symbol'>}</span>
1823:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1824:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1825:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>ref</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>UNIVERSAL</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span>isa<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'IO::Socket::INET'</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1826:     <span class='perl-Var def-Var'>$OUT</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>write</span><span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>join</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>''</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1827:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$stuff</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1828:     <span class='perl-Var def-Var'>$IN</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>recv</span><span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$stuff</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>2048</span> <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>  <span class='perl-Comment def-Comment def-Syntax'># XXX: what's wrong with sysread?</span>
1829:     <span class='perl-Var def-Var'>$stuff</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1830:   <span class='def-SymbolStrong def-Symbol'>}</span>
1831:   <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1832:     <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>readline</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1833:   <span class='def-SymbolStrong def-Symbol'>}</span>
1834: <span class='def-SymbolStrong def-Symbol'>}</span>
1835: 
1836: <span class='perl-Word def-Keyword'>sub</span> dump_option <span class='def-SymbolStrong def-Symbol'>{</span>
1837:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1838:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> option_val<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-String def-String'>'N/A'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1839:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1840:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>printf</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var2 def-VarStrong def-Var'>%20s</span><span class='perl-String def-String'> = '</span><span class='perl-Var2 def-VarStrong def-Var'>%s</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1841: <span class='def-SymbolStrong def-Symbol'>}</span>
1842: 
1843: <span class='perl-Word def-Keyword'>sub</span> option_val <span class='def-SymbolStrong def-Symbol'>{</span>
1844:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$default</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1845:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1846:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span>
1847:     <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1848:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1849:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span>
1850:     <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>&amp;</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1851:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>&amp;</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1852:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span>
1853:          <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span>
1854:          <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span>
1855:          <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1856:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$default</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1857:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1858:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1859:     <span class='def-SymbolStrong def-Symbol'>}</span>
1860:     <span class='perl-Var def-Var'>$val</span>
1861: <span class='def-SymbolStrong def-Symbol'>}</span>
1862: 
1863: <span class='perl-Word def-Keyword'>sub</span> parse_options <span class='def-SymbolStrong def-Symbol'>{</span>
1864:     <span class='perl-Word def-Keyword'>local</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1865:     <span class='perl-Comment def-Comment def-Syntax'># too dangerous to let intuitive usage overwrite important things</span>
1866:     <span class='perl-Comment def-Comment def-Syntax'># defaultion should never be the default</span>
1867:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>%opt_needs_val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-ReType perl-Word def-Keyword'>qw</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-String def-String'></span>
1868: <span class='perl-String def-String'>        arrayDepth hashDepth LineInfo maxTraceLen ornaments</span>
1869: <span class='perl-String def-String'>        pager quote ReadLine recallCommand RemotePort ShellBang TTY</span>
1870: <span class='perl-String def-String'>    </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1871:     <span class='perl-Word def-Keyword'>while</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1872:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val_defaulted</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1873:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Word def-Keyword'>next</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1874:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\W</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Invalid option `</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1875:     <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$sep</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1876:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1877:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>"?"</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$sep</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1878:         <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Option query `</span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>?' followed by non-space `</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span>
1879:           <span class='perl-Symb def-Symbol'>if</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-SymbClass def-Var'>\S</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1880:         <span class='perl-Comment def-Comment def-Syntax'>#&amp;dump_option($opt);</span>
1881:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sep</span> <span class='perl-Symb def-Symbol'>!~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\S</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1882:         <span class='perl-Var def-Var'>$val_defaulted</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1883:         <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>  <span class='perl-Comment def-Comment def-Syntax'>#  this is an evil default; make 'em set it!</span>
1884:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$sep</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>"="</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1885: 
1886:             <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>"'</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span> <span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-MetaSymb def-Symbol'>.</span> <span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Operator def-Keyword'>?!</span> <span class='regexp-SpecOperator def-KeywordStrong def-Keyword'>\1</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>*</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span> <span class='regexp-SpecOperator def-KeywordStrong def-Keyword'>\1</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>x</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1887:                 <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$quote</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1888:                 <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Var def-Var'>$quote</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1889:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
1890:         <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\S</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1891:         <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1892:         <span class='perl-Word def-Keyword'>print</span> OUT <span class='perl-ReType perl-Word def-Keyword'>qq</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>(</span><span class='perl-String def-String'>Option better cleared using </span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>=""</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>)</span>
1893:             <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>length</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1894:         <span class='def-SymbolStrong def-Symbol'>}</span>
1895: 
1896:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'>#{ to "let some poor schmuck bounce on the % key in B&lt;vi>."</span>
1897:         <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$end</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span><span class='def-Symbol'>(</span> <span class='perl-String def-String'>")]>}</span><span class='perl-Var def-Var'>$sep</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>index</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"([&lt;{"</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$sep</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span> <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'>#}</span>
1898:         <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$end</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$end</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-Var def-Var'>$end</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-Var def-Var'>$|</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>or</span>
1899:           <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Unclosed option value `</span><span class='perl-Var def-Var'>$opt</span><span class='perl-Var def-Var'>$sep</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1900:         <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Var def-Var'>$end</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1901:     <span class='def-SymbolStrong def-Symbol'>}</span>
1902: 
1903:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$option</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1904:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$matches</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>grep</span><span class='def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$opt</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span>  <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$option</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$_</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>  <span class='perl-Var def-Var'>@options</span>  <span class='def-Symbol'>)</span>
1905:            <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Word def-Keyword'>grep</span><span class='def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$opt</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>i</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$option</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$_</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>  <span class='perl-Var def-Var'>@options</span>  <span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1906: 
1907:     <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Unknown option `</span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span>     <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$matches</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1908:     <span class='perl-Word def-Keyword'>print</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Ambiguous option `</span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>'</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>next</span>     <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$matches</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1909: 
1910:        <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$opt_needs_val</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$val_defaulted</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1911:         <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Option `</span><span class='perl-Var def-Var'>$opt</span><span class='perl-String def-String'>' is non-boolean.  Use `O </span><span class='perl-Var def-Var'>$option</span><span class='perl-String def-String'>=VAL' to set, `O </span><span class='perl-Var def-Var'>$option</span><span class='perl-String def-String'>?' to query</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1912:         <span class='perl-Word def-Keyword'>next</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1913:     <span class='def-SymbolStrong def-Symbol'>}</span> 
1914: 
1915:     <span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$val</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1916: 
1917:     <span class='perl-Word def-Keyword'>eval</span> <span class='perl-ReType perl-Word def-Keyword'>qq</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-String def-String'></span>
1918: <span class='perl-String def-String'>        local </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>frame = </span><span class='def-NumberDec def-Number'>0</span><span class='perl-String def-String'>; </span>
1919: <span class='perl-String def-String'>        local </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>doret = -</span><span class='def-NumberDec def-Number'>2</span><span class='perl-String def-String'>; </span>
1920: <span class='perl-String def-String'>            require '</span><span class='perl-Var def-Var'>$optionRequire</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-String def-String'>';</span>
1921: <span class='perl-String def-String'>        </span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>;</span>
1922: <span class='perl-String def-String'>     </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Word def-Keyword'>die</span>  <span class='perl-Comment def-Comment def-Syntax'># XXX: shouldn't happen</span>
1923:         <span class='perl-Word def-Keyword'>if</span>  <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionRequire</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span>        <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span>
1924:             <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1925: 
1926:     <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$val</span>         
1927:         <span class='perl-Word def-Keyword'>if</span>  <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionVars</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span>        <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span>
1928:         <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1929: 
1930:     <span class='perl-Var def-Var'>&amp;</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span><span class='def-Symbol'>)</span>    
1931:         <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span>        <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span>
1932:                <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>&amp;</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$optionAction</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$option</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Var def-Var'>}</span>    <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span>
1933:                <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1934: 
1935:     <span class='perl-Comment def-Comment def-Syntax'># Not $rcfile</span>
1936:     dump_option<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$option</span><span class='def-Symbol'>)</span>     <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*STDERR</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
1937:     <span class='def-SymbolStrong def-Symbol'>}</span>
1938: <span class='def-SymbolStrong def-Symbol'>}</span>
1939: 
1940: <span class='perl-Word def-Keyword'>sub</span> set_list <span class='def-SymbolStrong def-Symbol'>{</span>
1941:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stem</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>@list</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1942:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1943:   <span class='perl-Var def-Var'>$ENV</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>stem</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>_n"</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@list</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1944:   <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$i</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>..</span> <span class='perl-Var def-Var'>$#list</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1945:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$list</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Var def-Var'>$i</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1946:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1947:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\0</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-SpecOperator def-KeywordStrong def-Keyword'>\37</span><span class='regexp-Symbol def-StringContent def-String'>\177</span><span class='regexp-Symbol def-StringContent def-String'>\200</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='regexp-Symbol def-StringContent def-String'>\377</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>0x" . unpack('H2',</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>eg</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1948:     <span class='perl-Var def-Var'>$ENV</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>stem</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>_</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>"</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1949:   <span class='def-SymbolStrong def-Symbol'>}</span>
1950: <span class='def-SymbolStrong def-Symbol'>}</span>
1951: 
1952: <span class='perl-Word def-Keyword'>sub</span> get_list <span class='def-SymbolStrong def-Symbol'>{</span>
1953:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$stem</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1954:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@list</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1955:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$n</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$ENV</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>stem</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>_n"</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1956:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1957:   <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$i</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span> <span class='perl-Symb def-Symbol'>..</span> <span class='perl-Var def-Var'>$n</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1958:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$ENV</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>stem</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>_</span><span class='perl-Var def-Var'>$i</span><span class='perl-String def-String'>"</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1959:     <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'>0x</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$2</span><span class='perl-String def-String'> ? </span><span class='perl-Var def-Var'>$2</span><span class='perl-String def-String'> : pack('H2', </span><span class='perl-Var def-Var'>$3</span><span class='perl-String def-String'>) </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>ge</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1960:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>push</span> <span class='perl-Var def-Var'>@list</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$val</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1961:   <span class='def-SymbolStrong def-Symbol'>}</span>
1962:   <span class='perl-Var def-Var'>@list</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1963: <span class='def-SymbolStrong def-Symbol'>}</span>
1964: 
1965: <span class='perl-Word def-Keyword'>sub</span> catch <span class='def-SymbolStrong def-Symbol'>{</span>
1966:     <span class='perl-Var def-Var'>$signal</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1967:     <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Put nothing on the stack - malloc/free land!</span>
1968: <span class='def-SymbolStrong def-Symbol'>}</span>
1969: 
1970: <span class='perl-Word def-Keyword'>sub</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1971:     <span class='perl-Word def-Keyword'>my</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$msg</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>join</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>""</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1972:     <span class='perl-Var def-Var'>$msg</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>": </span><span class='perl-Var def-Var'>$!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$msg</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1973:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$msg</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1974: <span class='def-SymbolStrong def-Symbol'>}</span>
1975: 
1976: <span class='perl-Word def-Keyword'>sub</span> TTY <span class='def-SymbolStrong def-Symbol'>{</span>
1977:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>newTTY</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1978:       <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$in</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$out</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1979:       <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$in</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>,</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1980:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$in</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$out</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>split</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>,</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$in</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1981:       <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1982:     <span class='perl-Var def-Var'>$out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$in</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1983:       <span class='def-SymbolStrong def-Symbol'>}</span>
1984:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span> IN<span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$in</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-String def-String'>"cannot open `</span><span class='perl-Var def-Var'>$in</span><span class='perl-String def-String'>' for read: </span><span class='perl-Var def-Var'>$!</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1985:       <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span> OUT<span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"></span><span class='perl-Var def-Var'>$out</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>die</span> <span class='perl-String def-String'>"cannot open `</span><span class='perl-Var def-Var'>$out</span><span class='perl-String def-String'>' for write: </span><span class='perl-Var def-Var'>$!</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1986:       <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>newTTY<span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*IN</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*OUT</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1987:       <span class='perl-Var def-Var'>$IN</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*IN</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1988:       <span class='perl-Var def-Var'>$OUT</span>    <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*OUT</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1989:       <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$tty</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$in</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1990:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1991:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Too late to set TTY, enabled on next `R'!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1992:     <span class='def-SymbolStrong def-Symbol'>}</span> 
1993:     <span class='perl-Var def-Var'>$tty</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1994:     <span class='perl-Var def-Var'>$tty</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$console</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
1995: <span class='def-SymbolStrong def-Symbol'>}</span>
1996: 
1997: <span class='perl-Word def-Keyword'>sub</span> noTTY <span class='def-SymbolStrong def-Symbol'>{</span>
1998:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
1999:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Too late to set noTTY, enabled on next `R'!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2000:     <span class='def-SymbolStrong def-Symbol'>}</span>
2001:     <span class='perl-Var def-Var'>$notty</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2002:     <span class='perl-Var def-Var'>$notty</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2003: <span class='def-SymbolStrong def-Symbol'>}</span>
2004: 
2005: <span class='perl-Word def-Keyword'>sub</span> ReadLine <span class='def-SymbolStrong def-Symbol'>{</span>
2006:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2007:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Too late to set ReadLine, enabled on next `R'!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2008:     <span class='def-SymbolStrong def-Symbol'>}</span>
2009:     <span class='perl-Var def-Var'>$rl</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2010:     <span class='perl-Var def-Var'>$rl</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2011: <span class='def-SymbolStrong def-Symbol'>}</span>
2012: 
2013: <span class='perl-Word def-Keyword'>sub</span> RemotePort <span class='def-SymbolStrong def-Symbol'>{</span>
2014:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2015:         <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Too late to set RemotePort, enabled on next 'R'!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2016:     <span class='def-SymbolStrong def-Symbol'>}</span>
2017:     <span class='perl-Var def-Var'>$remoteport</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2018:     <span class='perl-Var def-Var'>$remoteport</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2019: <span class='def-SymbolStrong def-Symbol'>}</span>
2020: 
2021: <span class='perl-Word def-Keyword'>sub</span> tkRunning <span class='def-SymbolStrong def-Symbol'>{</span>
2022:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Var def-Var'>}</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>tkRunning</span><span class='perl-Symb def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2023:         <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>tkRunning<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2024:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2025:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"tkRunning not supported by current ReadLine package.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2026:     <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2027:     <span class='def-SymbolStrong def-Symbol'>}</span>
2028: <span class='def-SymbolStrong def-Symbol'>}</span>
2029: 
2030: <span class='perl-Word def-Keyword'>sub</span> NonStop <span class='def-SymbolStrong def-Symbol'>{</span>
2031:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$term</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2032:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Too late to set up NonStop mode, enabled on next `R'!</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2033:     <span class='def-SymbolStrong def-Symbol'>}</span>
2034:     <span class='perl-Var def-Var'>$runnonstop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2035:     <span class='perl-Var def-Var'>$runnonstop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2036: <span class='def-SymbolStrong def-Symbol'>}</span>
2037: 
2038: <span class='perl-Word def-Keyword'>sub</span> pager <span class='def-SymbolStrong def-Symbol'>{</span>
2039:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2040:     <span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2041:     <span class='perl-Var def-Var'>$pager</span><span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>"|"</span><span class='perl-Symb def-Symbol'>.</span><span class='perl-Var def-Var'>$pager</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Symbol def-StringContent def-String'>\+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Symbol def-StringContent def-String'>\></span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2042:     <span class='def-SymbolStrong def-Symbol'>}</span>
2043:     <span class='perl-Var def-Var'>$pager</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2044: <span class='def-SymbolStrong def-Symbol'>}</span>
2045: 
2046: <span class='perl-Word def-Keyword'>sub</span> shellBang <span class='def-SymbolStrong def-Symbol'>{</span>
2047:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2048:     <span class='perl-Var def-Var'>$sh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>quotemeta</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2049:     <span class='perl-Var def-Var'>$sh</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>b"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$sh</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2050:     <span class='def-SymbolStrong def-Symbol'>}</span>
2051:     <span class='perl-Var def-Var'>$psh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sh</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2052:     <span class='perl-Var def-Var'>$psh</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>b</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2053:     <span class='perl-Var def-Var'>$psh</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2054:     <span class='perl-Symb def-Symbol'>&amp;</span>sethelp<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2055:     <span class='perl-Var def-Var'>$psh</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2056: <span class='def-SymbolStrong def-Symbol'>}</span>
2057: 
2058: <span class='perl-Word def-Keyword'>sub</span> ornaments <span class='def-SymbolStrong def-Symbol'>{</span>
2059:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$term</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2060:     <span class='perl-Word def-Keyword'>local</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$warnLevel</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$dieLevel</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2061:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-String def-String'>''</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>Features<span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>ornaments</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2062:     <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>ornaments<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2063:   <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2064:     <span class='perl-Var def-Var'>$ornaments</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2065:   <span class='def-SymbolStrong def-Symbol'>}</span>
2066: <span class='def-SymbolStrong def-Symbol'>}</span>
2067: 
2068: <span class='perl-Word def-Keyword'>sub</span> recallCommand <span class='def-SymbolStrong def-Symbol'>{</span>
2069:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2070:     <span class='perl-Var def-Var'>$rc</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>quotemeta</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2071:     <span class='perl-Var def-Var'>$rc</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>b"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$rc</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2072:     <span class='def-SymbolStrong def-Symbol'>}</span>
2073:     <span class='perl-Var def-Var'>$prc</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$rc</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2074:     <span class='perl-Var def-Var'>$prc</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>b</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2075:     <span class='perl-Var def-Var'>$prc</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2076:     <span class='perl-Symb def-Symbol'>&amp;</span>sethelp<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2077:     <span class='perl-Var def-Var'>$prc</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2078: <span class='def-SymbolStrong def-Symbol'>}</span>
2079: 
2080: <span class='perl-Word def-Keyword'>sub</span> LineInfo <span class='def-SymbolStrong def-Symbol'>{</span>
2081:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2082:     <span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2083:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$stream</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Symbol def-StringContent def-String'>\+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Symbol def-StringContent def-String'>\></span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$lineinfo</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"></span><span class='perl-Var def-Var'>$lineinfo</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2084:     <span class='perl-Var def-Var'>$slave_editor</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$stream</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2085:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>open</span><span class='def-Symbol'>(</span>LINEINFO<span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$stream</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"Cannot open `</span><span class='perl-Var def-Var'>$stream</span><span class='perl-String def-String'>' for write"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2086:     <span class='perl-Var def-Var'>$LINEINFO</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*LINEINFO</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2087:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$save</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$LINEINFO</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2088:     <span class='perl-Var def-Var'>$|</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2089:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>select</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$save</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2090:     <span class='perl-Var def-Var'>$lineinfo</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2091: <span class='def-SymbolStrong def-Symbol'>}</span>
2092: 
2093: <span class='perl-Word def-Keyword'>sub</span> list_versions <span class='def-SymbolStrong def-Symbol'>{</span>
2094:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>%version</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2095:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$file</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2096:   <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%INC</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2097:     <span class='perl-Var def-Var'>$file</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2098:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='regexp-Symbol def-StringContent def-String'>\.</span><span class='perl-String def-String'>p</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>lm</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>i</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2099:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='perl-String def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='perl-String def-String'>::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>,</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2100:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>perl5db</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>DB</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2101:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>Term::ReadLine::readline</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>readline</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2102:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span> <span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::VERSION'</span> <span class='perl-Var def-Var'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2103:       <span class='perl-Var def-Var'>$version</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'> </span><span class='perl-Symb def-Symbol'>.</span><span class='perl-String def-String'> </span><span class='perl-String def-String'>'::VERSION'</span> <span class='perl-Var def-Var'>}</span> from "<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2104:     <span class='def-SymbolStrong def-Symbol'>}</span> 
2105:     <span class='perl-Var def-Var'>$version</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$INC</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$file</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2106:   <span class='def-SymbolStrong def-Symbol'>}</span>
2107:   dumpit<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$OUT</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>%version</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2108: <span class='def-SymbolStrong def-Symbol'>}</span>
2109: 
2110: <span class='perl-Word def-Keyword'>sub</span> sethelp <span class='def-SymbolStrong def-Symbol'>{</span>
2111:     <span class='perl-Comment def-Comment def-Syntax'># XXX: make sure these are tabs between the command and explantion,</span>
2112:     <span class='perl-Comment def-Comment def-Syntax'>#      or print_help will screw up your formatting if you have</span>
2113:     <span class='perl-Comment def-Comment def-Syntax'>#      eeevil ornaments enabled.  This is an insane mess.</span>
2114: 
2115:     <span class='perl-Var def-Var'>$help</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span>
2116: <span class='perl-String def-String'>B&lt;T>        Stack trace.</span>
2117: <span class='perl-String def-String'>B&lt;s> [I&lt;expr>]    Single step [in I&lt;expr>].</span>
2118: <span class='perl-String def-String'>B&lt;n> [I&lt;expr>]    Next, steps over subroutine calls [in I&lt;expr>].</span>
2119: <span class='perl-String def-String'>&lt;B&lt;CR>>        Repeat last B&lt;n> or B&lt;s> command.</span>
2120: <span class='perl-String def-String'>B&lt;r>        Return from current subroutine.</span>
2121: <span class='perl-String def-String'>B&lt;c> [I&lt;line>|I&lt;sub>]    Continue; optionally inserts a one-time-only breakpoint</span>
2122: <span class='perl-String def-String'>        at the specified position.</span>
2123: <span class='perl-String def-String'>B&lt;l> I&lt;min>B&lt;+>I&lt;incr>    List I&lt;incr>+</span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'> lines starting at I&lt;min>.</span>
2124: <span class='perl-String def-String'>B&lt;l> I&lt;min>B&lt;->I&lt;max>    List lines I&lt;min> through I&lt;max>.</span>
2125: <span class='perl-String def-String'>B&lt;l> I&lt;line>        List single I&lt;line>.</span>
2126: <span class='perl-String def-String'>B&lt;l> I&lt;subname>    List first window of lines from subroutine.</span>
2127: <span class='perl-String def-String'>B&lt;l> I&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>var>        List first window of lines from subroutine referenced by I&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>var>.</span>
2128: <span class='perl-String def-String'>B&lt;l>        List next window of lines.</span>
2129: <span class='perl-String def-String'>B&lt;->        List previous window of lines.</span>
2130: <span class='perl-String def-String'>B&lt;w> [I&lt;line>]    List window around I&lt;line>.</span>
2131: <span class='perl-String def-String'>B&lt;.>        Return to the executed line.</span>
2132: <span class='perl-String def-String'>B&lt;f> I&lt;filename>    Switch to viewing I&lt;filename>. File must be already loaded.</span>
2133: <span class='perl-String def-String'>        I&lt;filename> may be either the full name of the file, or a regular</span>
2134: <span class='perl-String def-String'>        expression matching the full file name:</span>
2135: <span class='perl-String def-String'>        B&lt;f> I&lt;/home/me/foo.pl> and B&lt;f> I&lt;oo</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>.> may access the same file.</span>
2136: <span class='perl-String def-String'>        Evals (with saved bodies) are considered to be filenames:</span>
2137: <span class='perl-String def-String'>        B&lt;f> I&lt;(eval </span><span class='def-NumberDec def-Number'>7</span><span class='perl-String def-String'>)> and B&lt;f> I&lt;eval </span><span class='def-NumberDec def-Number'>7</span><span class='perl-Slash def-StringContent def-String'>\\</span><span class='perl-String def-String'>b> access the body of the 7th eval</span>
2138: <span class='perl-String def-String'>        (in the order of execution).</span>
2139: <span class='perl-String def-String'>B&lt;/>I&lt;pattern>B&lt;/>    Search forwards for I&lt;pattern>; final B&lt;/> is optional.</span>
2140: <span class='perl-String def-String'>B&lt;?>I&lt;pattern>B&lt;?>    Search backwards for I&lt;pattern>; final B&lt;?> is optional.</span>
2141: <span class='perl-String def-String'>B&lt;L>        List all breakpoints and actions.</span>
2142: <span class='perl-String def-String'>B&lt;S> [[B&lt;!>]I&lt;pattern>]    List subroutine names [not] matching I&lt;pattern>.</span>
2143: <span class='perl-String def-String'>B&lt;t>        Toggle trace mode.</span>
2144: <span class='perl-String def-String'>B&lt;t> I&lt;expr>        Trace through execution of I&lt;expr>.</span>
2145: <span class='perl-String def-String'>B&lt;b> [I&lt;line>] [I&lt;condition>]</span>
2146: <span class='perl-String def-String'>        Set breakpoint; I&lt;line> defaults to the current execution line;</span>
2147: <span class='perl-String def-String'>        I&lt;condition> breaks if it evaluates to true, defaults to '</span><span class='def-NumberDec def-Number'>1</span><span class='perl-String def-String'>'.</span>
2148: <span class='perl-String def-String'>B&lt;b> I&lt;subname> [I&lt;condition>]</span>
2149: <span class='perl-String def-String'>        Set breakpoint at first line of subroutine.</span>
2150: <span class='perl-String def-String'>B&lt;b> I&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>var>        Set breakpoint at first line of subroutine referenced by I&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>var>.</span>
2151: <span class='perl-String def-String'>B&lt;b> B&lt;load> I&lt;filename> Set breakpoint on `require'ing the given file.</span>
2152: <span class='perl-String def-String'>B&lt;b> B&lt;postpone> I&lt;subname> [I&lt;condition>]</span>
2153: <span class='perl-String def-String'>        Set breakpoint at first line of subroutine after </span>
2154: <span class='perl-String def-String'>        it is compiled.</span>
2155: <span class='perl-String def-String'>B&lt;b> B&lt;compile> I&lt;subname></span>
2156: <span class='perl-String def-String'>        Stop after the subroutine is compiled.</span>
2157: <span class='perl-String def-String'>B&lt;d> [I&lt;line>]    Delete the breakpoint for I&lt;line>.</span>
2158: <span class='perl-String def-String'>B&lt;D>        Delete all breakpoints.</span>
2159: <span class='perl-String def-String'>B&lt;a> [I&lt;line>] I&lt;command></span>
2160: <span class='perl-String def-String'>        Set an action to be done before the I&lt;line> is executed;</span>
2161: <span class='perl-String def-String'>        I&lt;line> defaults to the current execution line.</span>
2162: <span class='perl-String def-String'>        Sequence is: check for breakpoint/watchpoint, print line</span>
2163: <span class='perl-String def-String'>        if necessary, do action, prompt user if necessary,</span>
2164: <span class='perl-String def-String'>        execute line.</span>
2165: <span class='perl-String def-String'>B&lt;a> [I&lt;line>]    Delete the action for I&lt;line>.</span>
2166: <span class='perl-String def-String'>B&lt;A>        Delete all actions.</span>
2167: <span class='perl-String def-String'>B&lt;W> I&lt;expr>        Add a global watch-expression.</span>
2168: <span class='perl-String def-String'>B&lt;W>        Delete all watch-expressions.</span>
2169: <span class='perl-String def-String'>B&lt;V> [I&lt;pkg> [I&lt;vars>]]    List some (default all) variables in package (default current).</span>
2170: <span class='perl-String def-String'>        Use B&lt;~>I&lt;pattern> and B&lt;!>I&lt;pattern> for positive and negative regexps.</span>
2171: <span class='perl-String def-String'>B&lt;X> [I&lt;vars>]    Same as </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>B&lt;V> I&lt;currentpackage> [I&lt;vars>]</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>.</span>
2172: <span class='perl-String def-String'>B&lt;x> I&lt;expr>        Evals expression in list context, dumps the result.</span>
2173: <span class='perl-String def-String'>B&lt;m> I&lt;expr>        Evals expression in list context, prints methods callable</span>
2174: <span class='perl-String def-String'>        on the first element of the result.</span>
2175: <span class='perl-String def-String'>B&lt;m> I&lt;class>        Prints methods callable via the given class.</span>
2176: <span class='perl-String def-String'></span>
2177: <span class='perl-String def-String'>B&lt;&lt;> ?            List Perl commands to run before each prompt.</span>
2178: <span class='perl-String def-String'>B&lt;&lt;> I&lt;expr>        Define Perl command to run before each prompt.</span>
2179: <span class='perl-String def-String'>B&lt;&lt;&lt;> I&lt;expr>        Add to the list of Perl commands to run before each prompt.</span>
2180: <span class='perl-String def-String'>B&lt;>> ?            List Perl commands to run after each prompt.</span>
2181: <span class='perl-String def-String'>B&lt;>> I&lt;expr>        Define Perl command to run after each prompt.</span>
2182: <span class='perl-String def-String'>B&lt;>>B&lt;>> I&lt;expr>        Add to the list of Perl commands to run after each prompt.</span>
2183: <span class='perl-String def-String'>B&lt;{> I&lt;db_command>    Define debugger command to run before each prompt.</span>
2184: <span class='perl-String def-String'>B&lt;{> ?            List debugger commands to run before each prompt.</span>
2185: <span class='perl-String def-String'>B&lt;&lt;> I&lt;expr>        Define Perl command to run before each prompt.</span>
2186: <span class='perl-String def-String'>B&lt;{{> I&lt;db_command>    Add to the list of debugger commands to run before each prompt.</span>
2187: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$prc</span><span class='perl-String def-String'>> I&lt;number>    Redo a previous command (default previous command).</span>
2188: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$prc</span><span class='perl-String def-String'>> I&lt;-number>    Redo number'th-to-last command.</span>
2189: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$prc</span><span class='perl-String def-String'>> I&lt;pattern>    Redo last command that started with I&lt;pattern>.</span>
2190: <span class='perl-String def-String'>        See 'B&lt;O> I&lt;recallCommand>' too.</span>
2191: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$psh</span><span class='perl-Var def-Var'>$psh</span><span class='perl-String def-String'>> I&lt;cmd>      Run cmd in a subprocess (reads from DB::IN, writes to DB::OUT)"</span>
2192:   <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$rc</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$sh</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>""</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"</span>
2193: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$psh</span><span class='perl-String def-String'>> [I&lt;cmd>]     Run I&lt;cmd> in subshell (forces </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>SHELL -c 'cmd'</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>)."</span> <span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"</span>
2194: <span class='perl-String def-String'>        See 'B&lt;O> I&lt;shellBang>' too.</span>
2195: <span class='perl-String def-String'>B&lt;H> I&lt;-number>    Display last number commands (default all).</span>
2196: <span class='perl-String def-String'>B&lt;p> I&lt;expr>        Same as </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>I&lt;print {DB::OUT} expr></span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'> in current package.</span>
2197: <span class='perl-String def-String'>B&lt;|>I&lt;dbcmd>        Run debugger command, piping DB::OUT to current pager.</span>
2198: <span class='perl-String def-String'>B&lt;||>I&lt;dbcmd>        Same as B&lt;|>I&lt;dbcmd> but DB::OUT is temporarilly select()ed as well.</span>
2199: <span class='perl-String def-String'>B&lt;</span><span class='perl-Slash def-StringContent def-String'>\=</span><span class='perl-String def-String'>> [I&lt;alias> I&lt;value>]    Define a command alias, or list current aliases.</span>
2200: <span class='perl-String def-String'>I&lt;command>        Execute as a perl statement in current package.</span>
2201: <span class='perl-String def-String'>B&lt;v>        Show versions of loaded modules.</span>
2202: <span class='perl-String def-String'>B&lt;R>        Pure-man-restart of debugger, some of debugger state</span>
2203: <span class='perl-String def-String'>        and command-line options may be lost.</span>
2204: <span class='perl-String def-String'>        Currently the following setting are preserved: </span>
2205: <span class='perl-String def-String'>        history, breakpoints and actions, debugger B&lt;O>ptions </span>
2206: <span class='perl-String def-String'>        and the following command-line options: I&lt;-w>, I&lt;-I>, I&lt;-e>.</span>
2207: <span class='perl-String def-String'></span>
2208: <span class='perl-String def-String'>B&lt;O> [I&lt;opt>] ...    Set boolean option to true</span>
2209: <span class='perl-String def-String'>B&lt;O> [I&lt;opt>B&lt;?>]    Query options</span>
2210: <span class='perl-String def-String'>B&lt;O> [I&lt;opt>B&lt;=>I&lt;val>] [I&lt;opt>=B&lt;</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>>I&lt;val>B&lt;</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>>] ... </span>
2211: <span class='perl-String def-String'>        Set options.  Use quotes in spaces in value.</span>
2212: <span class='perl-String def-String'>    I&lt;recallCommand>, I&lt;ShellBang>    chars used to recall command or spawn shell;</span>
2213: <span class='perl-String def-String'>    I&lt;pager>            program for output of </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>|cmd</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>;</span>
2214: <span class='perl-String def-String'>    I&lt;tkRunning>            run Tk while prompting (with ReadLine);</span>
2215: <span class='perl-String def-String'>    I&lt;signalLevel> I&lt;warnLevel> I&lt;dieLevel>    level of verbosity;</span>
2216: <span class='perl-String def-String'>    I&lt;inhibit_exit>        Allows stepping off the end of the script.</span>
2217: <span class='perl-String def-String'>    I&lt;ImmediateStop>        Debugger should stop as early as possible.</span>
2218: <span class='perl-String def-String'>    I&lt;RemotePort>            Remote hostname:port for remote debugging</span>
2219: <span class='perl-String def-String'>  The following options affect what happens with B&lt;V>, B&lt;X>, and B&lt;x> commands:</span>
2220: <span class='perl-String def-String'>    I&lt;arrayDepth>, I&lt;hashDepth>     print only first N elements ('' for all);</span>
2221: <span class='perl-String def-String'>    I&lt;compactDump>, I&lt;veryCompact>     change style of array and hash dump;</span>
2222: <span class='perl-String def-String'>    I&lt;globPrint>             whether to print contents of globs;</span>
2223: <span class='perl-String def-String'>    I&lt;DumpDBFiles>         dump arrays holding debugged files;</span>
2224: <span class='perl-String def-String'>    I&lt;DumpPackages>         dump symbol tables of packages;</span>
2225: <span class='perl-String def-String'>    I&lt;DumpReused>             dump contents of </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'>reused</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-String def-String'> addresses;</span>
2226: <span class='perl-String def-String'>    I&lt;quote>, I&lt;HighBit>, I&lt;undefPrint>     change style of string dump;</span>
2227: <span class='perl-String def-String'>    I&lt;bareStringify>         Do not print the overload-stringified value;</span>
2228: <span class='perl-String def-String'>  Other options include:</span>
2229: <span class='perl-String def-String'>    I&lt;PrintRet>        affects printing of return value after B&lt;r> command,</span>
2230: <span class='perl-String def-String'>    I&lt;frame>        affects printing messages on entry and exit from subroutines.</span>
2231: <span class='perl-String def-String'>    I&lt;AutoTrace>    affects printing messages on every possible breaking point.</span>
2232: <span class='perl-String def-String'>    I&lt;maxTraceLen>    gives maximal length of evals/args listed in stack trace.</span>
2233: <span class='perl-String def-String'>    I&lt;ornaments>     affects screen appearance of the command line.</span>
2234: <span class='perl-String def-String'>    During startup options are initialized from </span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>ENV{PERLDB_OPTS}.</span>
2235: <span class='perl-String def-String'>    You can put additional initialization options I&lt;TTY>, I&lt;noTTY>,</span>
2236: <span class='perl-String def-String'>    I&lt;ReadLine>, I&lt;NonStop>, and I&lt;RemotePort> there (or use</span>
2237: <span class='perl-String def-String'>    `B&lt;R>' after you set them).</span>
2238: <span class='perl-String def-String'></span>
2239: <span class='perl-String def-String'>B&lt;q> or B&lt;^D>        Quit. Set B&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::finished = </span><span class='def-NumberDec def-Number'>0</span><span class='perl-String def-String'>> to debug global destruction.</span>
2240: <span class='perl-String def-String'>B&lt;h> [I&lt;db_command>]    Get help [on a specific debugger command], enter B&lt;|h> to page.</span>
2241: <span class='perl-String def-String'>B&lt;h h>        Summary of debugger commands.</span>
2242: <span class='perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'>> I&lt;manpage>    Runs the external doc viewer B&lt;</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'>> command on the </span>
2243: <span class='perl-String def-String'>        named Perl I&lt;manpage>, or on B&lt;</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'>> itself if omitted.</span>
2244: <span class='perl-String def-String'>        Set B&lt;</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>DB::doccmd> to change viewer.</span>
2245: <span class='perl-String def-String'></span>
2246: <span class='perl-String def-String'>Type `|h' for a paged display if this was too hard to read.</span>
2247: <span class='perl-String def-String'></span>
2248: <span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># </span><span class='def-TODO def-Error'>Fix balance of vi % matching: } }}</span>
2249: 
2250: <span class='def-Text'>    </span><span class='perl-Var def-Var'>$summary</span><span class='def-Text'> </span><span class='perl-Symb def-Symbol'>=</span><span class='def-Text'> </span><span class='perl-HereDocLt perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>&lt;&lt;</span><span class='perl-HereDoc perl-String def-String'>"</span><span class='perl-HereDocName def-Label'>END_SUM</span><span class='perl-HereDoc perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='perl-HereDoc perl-String def-String'></span>
2251: <span class='perl-HereDoc perl-String def-String'>I&lt;List/search source lines:>               I&lt;Control script execution:></span>
2252: <span class='perl-HereDoc perl-String def-String'>  B&lt;l> [I&lt;ln>|I&lt;sub>]  List source code            B&lt;T>           Stack trace</span>
2253: <span class='perl-HereDoc perl-String def-String'>  B&lt;-> or B&lt;.>      List previous/current line  B&lt;s> [I&lt;expr>]    Single step [in expr]</span>
2254: <span class='perl-HereDoc perl-String def-String'>  B&lt;w> [I&lt;line>]    List around line            B&lt;n> [I&lt;expr>]    Next, steps over subs</span>
2255: <span class='perl-HereDoc perl-String def-String'>  B&lt;f> I&lt;filename>  View source in file         &lt;B&lt;CR>/B&lt;Enter>>  Repeat last B&lt;n> or B&lt;s></span>
2256: <span class='perl-HereDoc perl-String def-String'>  B&lt;/>I&lt;pattern>B&lt;/> B&lt;?>I&lt;patt>B&lt;?>   Search forw/backw    B&lt;r>           Return from subroutine</span>
2257: <span class='perl-HereDoc perl-String def-String'>  B&lt;v>          Show versions of modules    B&lt;c> [I&lt;ln>|I&lt;sub>]  Continue until position</span>
2258: <span class='perl-HereDoc perl-String def-String'>I&lt;Debugger controls:>                        B&lt;L>           List break/watch/actions</span>
2259: <span class='perl-HereDoc perl-String def-String'>  B&lt;O> [...]     Set debugger options        B&lt;t> [I&lt;expr>]    Toggle trace [trace expr]</span>
2260: <span class='perl-HereDoc perl-String def-String'>  B&lt;&lt;>[B&lt;&lt;>]|B&lt;{>[B&lt;{>]|B&lt;>>[B&lt;>>] [I&lt;cmd>] Do pre/post-prompt B&lt;b> [I&lt;ln>|I&lt;event>|I&lt;sub>] [I&lt;cnd>] Set breakpoint</span>
2261: <span class='perl-HereDoc perl-String def-String'>  B&lt;</span><span class='perl-Var def-Var'>$prc</span><span class='perl-HereDoc perl-String def-String'>> [I&lt;N>|I&lt;pat>]   Redo a previous command     B&lt;d> [I&lt;ln>] or B&lt;D> Delete a/all breakpoints</span>
2262: <span class='perl-HereDoc perl-String def-String'>  B&lt;H> [I&lt;-num>]    Display last num commands   B&lt;a> [I&lt;ln>] I&lt;cmd>  Do cmd before line</span>
2263: <span class='perl-HereDoc perl-String def-String'>  B&lt;=> [I&lt;a> I&lt;val>]   Define/list an alias        B&lt;W> I&lt;expr>      Add a watch expression</span>
2264: <span class='perl-HereDoc perl-String def-String'>  B&lt;h> [I&lt;db_cmd>]  Get help on command         B&lt;A> or B&lt;W>      Delete all actions/watch</span>
2265: <span class='perl-HereDoc perl-String def-String'>  B&lt;|>[B&lt;|>]I&lt;db_cmd>  Send output to pager        B&lt;</span><span class='perl-Var def-Var'>$psh</span><span class='perl-HereDoc perl-String def-String'>></span><span class='perl-Slash def-StringContent def-String'>\[</span><span class='perl-HereDoc perl-String def-String'>B&lt;</span><span class='perl-Var def-Var'>$psh</span><span class='perl-HereDoc perl-String def-String'>></span><span class='perl-Slash def-StringContent def-String'>\]</span><span class='perl-HereDoc perl-String def-String'> I&lt;syscmd> Run cmd in a subprocess</span>
2266: <span class='perl-HereDoc perl-String def-String'>  B&lt;q> or B&lt;^D>     Quit              B&lt;R>          Attempt a restart</span>
2267: <span class='perl-HereDoc perl-String def-String'>I&lt;Data Examination:>          B&lt;expr>     Execute perl code, also see: B&lt;s>,B&lt;n>,B&lt;t> I&lt;expr></span>
2268: <span class='perl-HereDoc perl-String def-String'>  B&lt;x>|B&lt;m> I&lt;expr>    Evals expr in list context, dumps the result or lists methods.</span>
2269: <span class='perl-HereDoc perl-String def-String'>  B&lt;p> I&lt;expr>    Print expression (uses script's current package).</span>
2270: <span class='perl-HereDoc perl-String def-String'>  B&lt;S> [[B&lt;!>]I&lt;pat>]    List subroutine names [not] matching pattern</span>
2271: <span class='perl-HereDoc perl-String def-String'>  B&lt;V> [I&lt;Pk> [I&lt;Vars>]]    List Variables in Package.  Vars can be ~pattern or !pattern.</span>
2272: <span class='perl-HereDoc perl-String def-String'>  B&lt;X> [I&lt;Vars>]    Same as </span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-HereDoc perl-String def-String'>B&lt;V> I&lt;current_package> [I&lt;Vars>]</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-HereDoc perl-String def-String'>.</span>
2273: <span class='perl-HereDoc perl-String def-String'>For more help, type B&lt;h> I&lt;cmd_letter>, or run B&lt;</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-HereDoc perl-String def-String'> perldebug> for all docs.</span>
2274: <span class='perl-HereDocName def-Label'>END_SUM</span>
2275:                 <span class='perl-Comment def-Comment def-Syntax'># ')}}; # </span><span class='def-TODO def-Error'>Fix balance of vi % matching</span>
2276: <span class='def-SymbolStrong def-Symbol'>}</span>
2277: 
2278: <span class='perl-Word def-Keyword'>sub</span> print_help <span class='def-SymbolStrong def-Symbol'>{</span>
2279:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2280: 
2281:     <span class='perl-Comment def-Comment def-Syntax'># Restore proper alignment destroyed by eeevil I&lt;> and B&lt;></span>
2282:     <span class='perl-Comment def-Comment def-Syntax'># ornaments: A pox on both their houses!</span>
2283:     <span class='perl-Comment def-Comment def-Syntax'>#</span>
2284:     <span class='perl-Comment def-Comment def-Syntax'># A help command will have everything up to and including</span>
2285:     <span class='perl-Comment def-Comment def-Syntax'># the first tab sequence paddeed into a field 16 (or if indented 20)</span>
2286:     <span class='perl-Comment def-Comment def-Syntax'># wide.  If it's wide than that, an extra space will be added.</span>
2287:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-String def-String'></span>
2288: <span class='perl-String def-String'>    </span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='def-Comment def-Syntax'>                 # only matters at start of line</span><span class='perl-String def-String'></span>
2289: <span class='perl-String def-String'>      </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-Symbol def-StringContent def-String'>\040</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>{</span><span class='def-Number'>4</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>}</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'> </span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='def-Comment def-Syntax'>    # some subcommands are indented</span><span class='perl-String def-String'></span>
2290: <span class='perl-String def-String'>      </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> &lt; </span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='def-Comment def-Syntax'>         # so &lt;CR> works</span>
2291:         <span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span>BI<span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span> &lt; <span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span> <span class='regexp-MetaSymb def-Symbol'>+</span> <span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='def-Comment def-Syntax'>  # find an eeevil ornament</span><span class='perl-String def-String'></span>
2292: <span class='perl-String def-String'>      </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-Symbol def-StringContent def-String'>\t</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='def-Comment def-Syntax'>        # original separation, discarded</span><span class='perl-String def-String'></span>
2293: <span class='perl-String def-String'>      </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='def-Comment def-Syntax'>        # this will now start (no earlier) than </span><span class='perl-String def-String'></span>
2294: <span class='def-Comment def-Syntax'>                # column 16</span><span class='perl-String def-String'></span>
2295: <span class='perl-String def-String'>    </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span>
2296:     <span class='perl-Word def-Keyword'>my</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$leadwhite</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$command</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$midwhite</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$text</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$2</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$3</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$4</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2297:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$clean</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$command</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2298:     <span class='perl-Var def-Var'>$clean</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>BI</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-String def-String'>&lt;</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>></span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>></span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$1</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>g</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>  
2299:     <span class='perl-Comment def-Comment def-Syntax'># replace with this whole string:</span>
2300:     <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$leadwhite</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>" "</span> <span class='perl-Symb def-Symbol'>x</span> <span class='perl-Numb def-Number'>4</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span>
2301:       <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$command</span>
2302:       <span class='perl-Symb def-Symbol'>.</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>" "</span> <span class='perl-Symb def-Symbol'>x</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>16</span> <span class='perl-Symb def-Symbol'>+</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$leadwhite</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Numb def-Number'>4</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$clean</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>|</span><span class='perl-Symb def-Symbol'>|</span> <span class='perl-String def-String'>" "</span><span class='def-Symbol'>)</span>
2303:       <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$text</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2304: 
2305:     <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>mgex</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2306: 
2307:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='def-Comment def-Syntax'>                # handle bold ornaments</span><span class='perl-String def-String'></span>
2308: <span class='perl-String def-String'>    B &lt; </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>></span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'> > </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'> ></span>
2309: <span class='perl-String def-String'>    </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span>
2310:       <span class='perl-Var def-Var'>$Term::ReadLine::TermCap::rl_term_set</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>2</span><span class='perl-Symb def-Symbol'>]</span> 
2311:     <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$1</span>
2312:     <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$Term::ReadLine::TermCap::rl_term_set</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>3</span><span class='perl-Symb def-Symbol'>]</span>
2313:     <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>gex</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2314: 
2315:     <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='def-Comment def-Syntax'>                # handle italic ornaments</span><span class='perl-String def-String'></span>
2316: <span class='perl-String def-String'>    I &lt; </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'> </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>></span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'> </span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'> > </span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'> ></span>
2317: <span class='perl-String def-String'>    </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span>
2318:       <span class='perl-Var def-Var'>$Term::ReadLine::TermCap::rl_term_set</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> 
2319:     <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$1</span>
2320:     <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$Term::ReadLine::TermCap::rl_term_set</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span>
2321:     <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>gex</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2322: 
2323:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Var def-Var'>$_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2324: <span class='def-SymbolStrong def-Symbol'>}</span>
2325: 
2326: <span class='perl-Word def-Keyword'>sub</span> fix_less <span class='def-SymbolStrong def-Symbol'>{</span>
2327:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LESS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LESS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>r</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2328:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$is_less</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-String def-String'>less</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2329:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$pager</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-String def-String'>more</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> 
2330:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@st_more</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>stat</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>'/usr/bin/more'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2331:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@st_less</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>stat</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>'/usr/bin/less'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2332:     <span class='perl-Var def-Var'>$is_less</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@st_more</span>    <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>@st_less</span> 
2333:         <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$st_more</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$st_less</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> 
2334:         <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$st_more</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$st_less</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2335:     <span class='def-SymbolStrong def-Symbol'>}</span>
2336:     <span class='perl-Comment def-Comment def-Syntax'># changes environment!</span>
2337:     <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>LESS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'r'</span>     <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$is_less</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2338: <span class='def-SymbolStrong def-Symbol'>}</span>
2339: 
2340: <span class='perl-Word def-Keyword'>sub</span> diesignal <span class='def-SymbolStrong def-Symbol'>{</span>
2341:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2342:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2343:     <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'ABRT'</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'DEFAULT'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2344:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>kill</span> <span class='perl-String def-String'>'ABRT'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$$</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$panic</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2345:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>longmess</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2346:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2347:     <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$Carp::CarpLevel</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># mydie + confess</span>
2348:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span>longmess<span class='def-Symbol'>(</span><span class='perl-String def-String'>"Signal </span><span class='perl-Var def-Var'>@_</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2349:     <span class='def-SymbolStrong def-Symbol'>}</span>
2350:     <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2351:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$DB::OUT</span> <span class='perl-String def-String'>"Got signal </span><span class='perl-Var def-Var'>@_</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2352:     <span class='def-SymbolStrong def-Symbol'>}</span>
2353:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>kill</span> <span class='perl-String def-String'>'ABRT'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$$</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2354: <span class='def-SymbolStrong def-Symbol'>}</span>
2355: 
2356: <span class='perl-Word def-Keyword'>sub</span> dbwarn <span class='def-SymbolStrong def-Symbol'>{</span> 
2357:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2358:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2359:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2360:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2361:   <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span> } <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$^S</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># If error/warning during compilation,</span>
2362:                                         <span class='perl-Comment def-Comment def-Syntax'># require may be broken.</span>
2363:   <span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>Cannot print stack trace, load with -MCarp option to see stack"</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>
2364:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>longmess</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2365:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$mysingle</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$mytrace</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$trace</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2366:   <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2367:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$mess</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span>longmess<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2368:   <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$trace</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$mysingle</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$mytrace</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2369:   <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$mess</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> 
2370: <span class='def-SymbolStrong def-Symbol'>}</span>
2371: 
2372: <span class='perl-Word def-Keyword'>sub</span> dbdie <span class='def-SymbolStrong def-Symbol'>{</span>
2373:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2374:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2375:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2376:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2377:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$i</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$ineval</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2378:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dieLevel</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2379:       <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span>dbwarn<span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2380:       <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>warn</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Yell no matter what</span>
2381:       <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2382:   <span class='def-SymbolStrong def-Symbol'>}</span>
2383:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dieLevel</span> <span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2384:     <span class='perl-Word def-Keyword'>die</span> <span class='perl-Var def-Var'>@_</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$^S</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># in eval propagate</span>
2385:   <span class='def-SymbolStrong def-Symbol'>}</span>
2386:   <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span> } <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$^S</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>    <span class='perl-Comment def-Comment def-Syntax'># If error/warning during compilation,</span>
2387:                                     <span class='perl-Comment def-Comment def-Syntax'># require may be broken.</span>
2388: 
2389:   <span class='perl-Word def-Keyword'>die</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>Cannot print stack trace, load with -MCarp option to see stack"</span><span class='def-Symbol'>)</span>
2390:     <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>longmess</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2391: 
2392:   <span class='perl-Comment def-Comment def-Syntax'># We do not want to debug this chunk (automatic disabling works</span>
2393:   <span class='perl-Comment def-Comment def-Syntax'># inside DB::DB, but not in Carp).</span>
2394:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$mysingle</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$mytrace</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$trace</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2395:   <span class='perl-Var def-Var'>$single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Var def-Var'>$trace</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2396:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$mess</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Carp</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span>longmess<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2397:   <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$single</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$trace</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$mysingle</span><span class='perl-Symb def-Symbol'>,</span><span class='perl-Var def-Var'>$mytrace</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2398:   <span class='perl-Word def-Keyword'>die</span> <span class='perl-Var def-Var'>$mess</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2399: <span class='def-SymbolStrong def-Symbol'>}</span>
2400: 
2401: <span class='perl-Word def-Keyword'>sub</span> warnLevel <span class='def-SymbolStrong def-Symbol'>{</span>
2402:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2403:     <span class='perl-Var def-Var'>$prevwarn</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$warnLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2404:     <span class='perl-Var def-Var'>$warnLevel</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2405:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$warnLevel</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2406:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dbwarn</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2407:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2408:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__WARN__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prevwarn</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2409:     <span class='def-SymbolStrong def-Symbol'>}</span>
2410:   <span class='def-SymbolStrong def-Symbol'>}</span>
2411:   <span class='perl-Var def-Var'>$warnLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2412: <span class='def-SymbolStrong def-Symbol'>}</span>
2413: 
2414: <span class='perl-Word def-Keyword'>sub</span> dieLevel <span class='def-SymbolStrong def-Symbol'>{</span>
2415:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2416:     <span class='perl-Var def-Var'>$prevdie</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$dieLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2417:     <span class='perl-Var def-Var'>$dieLevel</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2418:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$dieLevel</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2419:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>dbdie</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># if $dieLevel &lt; 2;</span>
2420:       <span class='perl-Comment def-Comment def-Syntax'>#$SIG{__DIE__} = \&amp;DB::diehard if $dieLevel >= 2;</span>
2421:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Stack dump during die enabled"</span><span class='perl-Symb def-Symbol'>,</span> 
2422:         <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$dieLevel</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>" outside of evals"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>""</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>".</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
2423:       <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$I_m_init</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2424:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Dump printed too.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$dieLevel</span> <span class='perl-Symb def-Symbol'>></span> <span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2425:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2426:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>__DIE__</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prevdie</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2427:       <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Default die handler restored.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2428:     <span class='def-SymbolStrong def-Symbol'>}</span>
2429:   <span class='def-SymbolStrong def-Symbol'>}</span>
2430:   <span class='perl-Var def-Var'>$dieLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2431: <span class='def-SymbolStrong def-Symbol'>}</span>
2432: 
2433: <span class='perl-Word def-Keyword'>sub</span> signalLevel <span class='def-SymbolStrong def-Symbol'>{</span>
2434:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@_</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2435:     <span class='perl-Var def-Var'>$prevsegv</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>SEGV</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$signalLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2436:     <span class='perl-Var def-Var'>$prevbus</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>BUS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$signalLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2437:     <span class='perl-Var def-Var'>$signalLevel</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2438:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$signalLevel</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2439:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>SEGV</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>diesignal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2440:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>BUS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>diesignal</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2441:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2442:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>SEGV</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prevsegv</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2443:       <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>BUS</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prevbus</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2444:     <span class='def-SymbolStrong def-Symbol'>}</span>
2445:   <span class='def-SymbolStrong def-Symbol'>}</span>
2446:   <span class='perl-Var def-Var'>$signalLevel</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2447: <span class='def-SymbolStrong def-Symbol'>}</span>
2448: 
2449: <span class='perl-Word def-Keyword'>sub</span> CvGV_name <span class='def-SymbolStrong def-Symbol'>{</span>
2450:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$in</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2451:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$name</span> <span class='perl-Symb def-Symbol'>=</span> CvGV_name_or_bust<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$in</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2452:   <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$name</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$name</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$in</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2453: <span class='def-SymbolStrong def-Symbol'>}</span>
2454: 
2455: <span class='perl-Word def-Keyword'>sub</span> CvGV_name_or_bust <span class='def-SymbolStrong def-Symbol'>{</span>
2456:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$in</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2457:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$skipCvGV</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Backdoor to avoid problems if XS broken...</span>
2458:   <span class='perl-Var def-Var'>$in</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$in</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Hard reference...</span>
2459:   <span class='perl-Word def-Keyword'>eval</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Devel::Peek</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Numb def-Number'>1</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2460:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$gv</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Devel::Peek</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span>CvGV<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$in</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2461:   <span class='perl-Var def-Var'>*$gv</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>PACKAGE</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::'</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>*$gv</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>NAME</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2462: <span class='def-SymbolStrong def-Symbol'>}</span>
2463: 
2464: <span class='perl-Word def-Keyword'>sub</span> find_sub <span class='def-SymbolStrong def-Symbol'>{</span>
2465:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$subr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2466:   <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$subr</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Word def-Keyword'>do</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2467:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$subr</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2468:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$name</span> <span class='perl-Symb def-Symbol'>=</span> CvGV_name_or_bust<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$subr</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2469:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$data</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2470:     <span class='perl-Var def-Var'>$data</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$name</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$name</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2471:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$data</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$data</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2472: 
2473:     <span class='perl-Comment def-Comment def-Syntax'># Old stupid way...</span>
2474:     <span class='perl-Var def-Var'>$subr</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$subr</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Hard reference</span>
2475:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2476:     <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2477:       <span class='perl-Var def-Var'>$s</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$subr</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Var def-Var'>$_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2478:     <span class='def-SymbolStrong def-Symbol'>}</span>
2479:     <span class='perl-Var def-Var'>$sub</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$s</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$s</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2480:   <span class='def-SymbolStrong def-Symbol'>}</span>
2481: <span class='def-SymbolStrong def-Symbol'>}</span>
2482: 
2483: <span class='perl-Word def-Keyword'>sub</span> methods <span class='def-SymbolStrong def-Symbol'>{</span>
2484:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$class</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2485:   <span class='perl-Var def-Var'>$class</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>ref</span> <span class='perl-Var def-Var'>$class</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>ref</span> <span class='perl-Var def-Var'>$class</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2486:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>%seen</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2487:   <span class='perl-Word def-Keyword'>local</span> <span class='perl-Var def-Var'>%packs</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2488:   methods_via<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$class</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>''</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2489:   methods_via<span class='def-Symbol'>(</span><span class='perl-String def-String'>'UNIVERSAL'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>'UNIVERSAL'</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2490: <span class='def-SymbolStrong def-Symbol'>}</span>
2491: 
2492: <span class='perl-Word def-Keyword'>sub</span> methods_via <span class='def-SymbolStrong def-Symbol'>{</span>
2493:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$class</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2494:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$packs</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$class</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2495:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2496:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$prepend</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"via </span><span class='perl-Var def-Var'>$prefix</span><span class='perl-String def-String'>: "</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2497:   <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$name</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2498:   <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$name</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>grep</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='def-SymbolStrong def-Symbol'>{</span>$<span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>class</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>::"</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>$_</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-SymbolStrong def-Symbol'>}</span> 
2499:          <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Symb def-Symbol'>%</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>class</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>::"</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2500:     <span class='perl-Word def-Keyword'>next</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$seen</span><span class='perl-Symb def-Symbol'>{</span> <span class='perl-Var def-Var'>$name</span> <span class='perl-Symb def-Symbol'>}</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-Symb def-Symbol'>+</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2501:     <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$DB::OUT</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prepend</span><span class='perl-Var def-Var'>$name</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2502:   <span class='def-SymbolStrong def-Symbol'>}</span>
2503:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Recurse?</span>
2504:   <span class='perl-Word def-Keyword'>for</span> <span class='perl-Var def-Var'>$name</span> <span class='def-Symbol'>(</span>@<span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>class</span><span class='perl-Var def-Var'>}</span><span class='perl-String def-String'>::ISA"</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2505:     <span class='perl-Var def-Var'>$prepend</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>" -> </span><span class='perl-Var def-Var'>$name</span><span class='perl-String def-String'>"</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$name</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2506:     methods_via<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$name</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$prepend</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2507:   <span class='def-SymbolStrong def-Symbol'>}</span>
2508: <span class='def-SymbolStrong def-Symbol'>}</span>
2509: 
2510: <span class='perl-Word def-Keyword'>sub</span> setman <span class='def-SymbolStrong def-Symbol'>{</span> 
2511:     <span class='perl-Var def-Var'>$doccmd</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>!~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SpecQuote def-StringEdge def-String'>?</span><span class='regexp-SpecQuote def-StringEdge def-String'>:</span>MSWin32<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>VMS<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>os2<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>dos<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>amigaos<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>riscos<span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span>MacOS<span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Operator def-Keyword'>\z</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>s</span>
2512:         <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>"man"</span>             <span class='perl-Comment def-Comment def-Syntax'># O Happy Day!</span>
2513:         <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>"perldoc"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Alas, poor unfortunates</span>
2514: <span class='def-SymbolStrong def-Symbol'>}</span>
2515: 
2516: <span class='perl-Word def-Keyword'>sub</span> runman <span class='def-SymbolStrong def-Symbol'>{</span>
2517:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$page</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>shift</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2518:     <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$page</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2519:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2520:     <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2521:     <span class='def-SymbolStrong def-Symbol'>}</span> 
2522:     <span class='perl-Comment def-Comment def-Syntax'># this way user can override, like with $doccmd="man -Mwhatever"</span>
2523:     <span class='perl-Comment def-Comment def-Syntax'># or even just "man " to disable the path check.</span>
2524:     <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doccmd</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'man'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2525:     <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-String def-String'> </span><span class='perl-Var def-Var'>$page</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2526:     <span class='perl-Word def-Keyword'>return</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2527:     <span class='def-SymbolStrong def-Symbol'>}</span> 
2528: 
2529:     <span class='perl-Var def-Var'>$page</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'perl'</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Word def-Keyword'>lc</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$page</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'help'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2530: 
2531:     <span class='perl-Word def-Keyword'>require</span> <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>Config</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2532:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$man1dir</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$Config::Config</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'man1dir'</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2533:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$man3dir</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$Config::Config</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-String def-String'>'man3dir'</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2534:     <span class='perl-Word def-Keyword'>for</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$man1dir</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$man3dir</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>#</span><span class='perl-String def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Operator def-Keyword'>\z</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>#</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>#</span> <span class='perl-Symb def-Symbol'>if</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\S</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='def-SymbolStrong def-Symbol'>}</span> 
2535:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$manpath</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2536:     <span class='perl-Var def-Var'>$manpath</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$man1dir</span><span class='perl-String def-String'>:"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$man1dir</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\S</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2537:     <span class='perl-Var def-Var'>$manpath</span> <span class='perl-Symb def-Symbol'>.</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$man3dir</span><span class='perl-String def-String'>:"</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$man3dir</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\S</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Var def-Var'>$man1dir</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$man3dir</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2538:     <span class='perl-WordFun def-FunctionKeyword def-Keyword'>chop</span> <span class='perl-Var def-Var'>$manpath</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$manpath</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2539:     <span class='perl-Comment def-Comment def-Syntax'># harmless if missing, I figure</span>
2540:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$oldpath</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>MANPATH</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2541:     <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>MANPATH</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$manpath</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$manpath</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2542:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$nopathopt</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$^O</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>dunno what goes here</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2543:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-Symb def-Symbol'>,</span> 
2544:         <span class='perl-Comment def-Comment def-Syntax'># I just *know* there are men without -M</span>
2545:         <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$manpath</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$nopathopt</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>"-M"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$manpath</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>  
2546:         <span class='perl-Word def-Keyword'>split</span> <span class='perl-String def-String'>' '</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$page</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>)</span>
2547:     <span class='def-SymbolStrong def-Symbol'>{</span>
2548:     <span class='perl-Word def-Keyword'>unless</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$page</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>perl</span><span class='regexp-SymbClass def-Var'>\w</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2549:         <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>grep</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Var def-Var'>$page</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-Var def-Var'>$_</span> <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-ReType perl-Word def-Keyword'>qw</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-String def-String'> </span>
2550: <span class='perl-String def-String'>        5004delta 5005delta amiga api apio book boot bot call compile</span>
2551: <span class='perl-String def-String'>        cygwin data dbmfilter debug debguts delta diag doc dos dsc embed</span>
2552: <span class='perl-String def-String'>        faq faq1 faq2 faq3 faq4 faq5 faq6 faq7 faq8 faq9 filter fork</span>
2553: <span class='perl-String def-String'>        form func guts hack hist hpux intern ipc lexwarn locale lol mod</span>
2554: <span class='perl-String def-String'>        modinstall modlib number obj op opentut os2 os390 pod port </span>
2555: <span class='perl-String def-String'>        ref reftut run sec style sub syn thrtut tie toc todo toot tootc</span>
2556: <span class='perl-String def-String'>        trap unicode var vms win32 xs xstut</span>
2557: <span class='perl-String def-String'>          </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='def-Symbol'>)</span> 
2558:         <span class='def-SymbolStrong def-Symbol'>{</span>
2559:         <span class='perl-Var def-Var'>$page</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span> <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>perl</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2560:         <span class='perl-WordFun def-FunctionKeyword def-Keyword'>system</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$doccmd</span><span class='perl-Symb def-Symbol'>,</span> 
2561:             <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$manpath</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$nopathopt</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>"-M"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$manpath</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>  
2562:             <span class='perl-Var def-Var'>$page</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2563:         <span class='def-SymbolStrong def-Symbol'>}</span>
2564:     <span class='def-SymbolStrong def-Symbol'>}</span>
2565:     <span class='def-SymbolStrong def-Symbol'>}</span> 
2566:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$oldpath</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2567:     <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>MANPATH</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$manpath</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2568:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2569:     <span class='perl-Word def-Keyword'>delete</span> <span class='perl-Var def-Var'>$ENV</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>MANPATH</span><span class='perl-Symb def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2570:     <span class='def-SymbolStrong def-Symbol'>}</span> 
2571: <span class='def-SymbolStrong def-Symbol'>}</span> 
2572: 
2573: <span class='perl-Comment def-Comment def-Syntax'># The following BEGIN is very handy if debugger goes havoc, debugging debugger?</span>
2574: 
2575: <span class='perl-Word def-Keyword'>BEGIN</span> <span class='def-SymbolStrong def-Symbol'>{</span>            <span class='perl-Comment def-Comment def-Syntax'># This does not compile, alas.</span>
2576:   <span class='perl-Var def-Var'>$IN</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*STDIN</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># For bugs before DB::OUT has been opened</span>
2577:   <span class='perl-Var def-Var'>$OUT</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Var def-Var'>*STDERR</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># For errors before DB::OUT has been opened</span>
2578:   <span class='perl-Var def-Var'>$sh</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'!'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2579:   <span class='perl-Var def-Var'>$rc</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>','</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2580:   <span class='perl-Var def-Var'>@hist</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-String def-String'>'?'</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2581:   <span class='perl-Var def-Var'>$deep</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>100</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># warning if stack gets this deep</span>
2582:   <span class='perl-Var def-Var'>$window</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>10</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2583:   <span class='perl-Var def-Var'>$preview</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>3</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2584:   <span class='perl-Var def-Var'>$sub</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>''</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2585:   <span class='perl-Var def-Var'>$SIG</span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>INT</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>\</span><span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>catch</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2586:   <span class='perl-Comment def-Comment def-Syntax'># This may be enabled to debug debugger:</span>
2587:   <span class='perl-Comment def-Comment def-Syntax'>#$warnLevel = 1 unless defined $warnLevel;</span>
2588:   <span class='perl-Comment def-Comment def-Syntax'>#$dieLevel = 1 unless defined $dieLevel;</span>
2589:   <span class='perl-Comment def-Comment def-Syntax'>#$signalLevel = 1 unless defined $signalLevel;</span>
2590: 
2591:   <span class='perl-Var def-Var'>$db_stop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Compiler warning</span>
2592:   <span class='perl-Var def-Var'>$db_stop</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>&lt;</span><span class='perl-Symb def-Symbol'>&lt;</span> <span class='perl-Numb def-Number'>30</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2593:   <span class='perl-Var def-Var'>$level</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Level of recursive debugging</span>
2594:   <span class='perl-Comment def-Comment def-Syntax'># @stack and $doret are needed in sub sub, which is called for DB::postponed.</span>
2595:   <span class='perl-Comment def-Comment def-Syntax'># Triggers </span><span class='def-TODO def-Error'>bug (?) in perl is we postpone this until runtime:</span>
2596:   <span class='perl-Var def-Var'>@postponed</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@stack</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Numb def-Number'>0</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2597:   <span class='perl-Var def-Var'>$stack_depth</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>        <span class='perl-Comment def-Comment def-Syntax'># Localized $#stack</span>
2598:   <span class='perl-Var def-Var'>$doret</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2599:   <span class='perl-Var def-Var'>$frame</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>0</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2600: <span class='def-SymbolStrong def-Symbol'>}</span>
2601: 
2602: <span class='perl-Word def-Keyword'>BEGIN</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-Var def-Var'>$^W</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$ini_warn</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='def-SymbolStrong def-Symbol'>}</span>    <span class='perl-Comment def-Comment def-Syntax'># Switch warnings back</span>
2603: 
2604: <span class='perl-Comment def-Comment def-Syntax'>#use Carp;            # This did break, left for debuggin</span>
2605: 
2606: <span class='perl-Word def-Keyword'>sub</span> db_complete <span class='def-SymbolStrong def-Symbol'>{</span>
2607:   <span class='perl-Comment def-Comment def-Syntax'># Specific code for b c l V m f O, &amp;blah, $blah, @blah, %blah</span>
2608:   <span class='perl-Word def-Keyword'>my</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>@_</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2609:   <span class='perl-Word def-Keyword'>my</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$itext</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$search</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$prefix</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$pack</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span>
2610:     <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"^</span><span class='regexp-Operator def-Keyword'>\Q</span><span class='def-String'>${'package'}::</span><span class='regexp-Operator def-Keyword'>\E</span><span class='perl-String def-String'>([^:]+)</span><span class='perl-Slash def-StringContent def-String'>\$</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2611:   
2612:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-ReType perl-Word def-Keyword'>qw</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>(</span><span class='perl-String def-String'>postpone load compile</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Comment def-Comment def-Syntax'># subroutines</span>
2613:                                <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$search</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span>
2614:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>blc</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='perl-String def-String'>postpone</span><span class='regexp-MetaSymbStrong def-SymbolStrong def-Symbol'>|</span><span class='perl-String def-String'>compile</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2615:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>values</span> <span class='perl-Var def-Var'>%INC</span> <span class='perl-Comment def-Comment def-Syntax'># files</span>
2616:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-String def-String'>b</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='perl-String def-String'>load</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2617:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>,</span> db_complete<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"::"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"V "</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>}</span>
2618:     <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%::</span> <span class='perl-Comment def-Comment def-Syntax'># top-packages</span>
2619:       <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>Vm</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2620:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>,</span> db_complete<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$_</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"::"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-String def-String'>"V "</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>}</span>
2621:     <span class='perl-Word def-Keyword'>grep</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>main::</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span>
2622:       <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>"::</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>"</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%</span><span class='perl-Var def-Var'>{</span><span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::'</span><span class='perl-Var def-Var'>}</span>
2623:                  <span class='perl-Comment def-Comment def-Syntax'># packages</span>
2624:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>Vm</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> 
2625:       <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>:</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-SymbClass def-Var'>\w</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span>  <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2626:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$line</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-String def-String'>f</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># Loaded files</span>
2627:     <span class='perl-Comment def-Comment def-Syntax'># We may want to complete to (eval 9), so $text may be wrong</span>
2628:     <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>-</span> <span class='perl-Word def-Keyword'>length</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2629:     <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2630:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> 
2631:     <span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$_</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>2</span> <span class='perl-Symb def-Symbol'>+</span> <span class='perl-Var def-Var'>$prefix</span><span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>_&lt;</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%main::</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$0</span>
2632:   <span class='def-SymbolStrong def-Symbol'>}</span>
2633:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'&amp;'</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># subroutines</span>
2634:     <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2635:     <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"&amp;"</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2636:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Word def-Keyword'>map</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> 
2637:                <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> 
2638:                  <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span>
2639:                  <span class='def-Symbol'>(</span><span class='perl-Word def-Keyword'>map</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Var def-Var'>$search</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>}</span> 
2640:             <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%sub</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2641:   <span class='def-SymbolStrong def-Symbol'>}</span>
2642:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\$</span><span class='perl-String def-String'>@%</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>::</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># symbols in a package</span>
2643:     <span class='perl-Var def-Var'>$pack</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'main'</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>''</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2644:     <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-Var def-Var'>$1</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2645:     <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Var def-Var'>$2</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2646:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@out</span> 
2647:       <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>map</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>_</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>a</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>zA</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>Z</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%$pack</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2648:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@out</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$itext</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2649:       <span class='perl-Word def-Keyword'>return</span> db_complete<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2650:     <span class='def-SymbolStrong def-Symbol'>}</span>
2651:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Var def-Var'>@out</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2652:   <span class='def-SymbolStrong def-Symbol'>}</span>
2653:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\$</span><span class='perl-String def-String'>@%</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># symbols (in $package + packages in main)</span>
2654:     <span class='perl-Var def-Var'>$pack</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$package</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'main'</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-String def-String'>''</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-Var def-Var'>$package</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>.</span> <span class='perl-String def-String'>'::'</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2655:     <span class='perl-Var def-Var'>$prefix</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2656:     <span class='perl-Var def-Var'>$text</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$text</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2657:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Word def-Keyword'>map</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$prefix</span><span class='perl-Var def-Var'>$_</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> 
2658:        <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='perl-String def-String'>_</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='perl-String def-String'>a</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>zA</span><span class='regexp-MetaSymb def-Symbol'>-</span><span class='perl-String def-String'>Z</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%$pack</span><span class='def-Symbol'>)</span><span class='perl-Symb def-Symbol'>,</span> 
2659:        <span class='def-Symbol'>(</span> <span class='perl-Var def-Var'>$pack</span> <span class='perl-Symb def-Symbol'>eq</span> <span class='perl-String def-String'>'::'</span> <span class='perl-Symb def-Symbol'>?</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>:</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>keys</span> <span class='perl-Var def-Var'>%::</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>)</span> <span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2660:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@out</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-String def-String'>::</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span> <span class='perl-Symb def-Symbol'>and</span> <span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span> <span class='perl-Symb def-Symbol'>ne</span> <span class='perl-Var def-Var'>$itext</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2661:       <span class='perl-Word def-Keyword'>return</span> db_complete<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2662:     <span class='def-SymbolStrong def-Symbol'>}</span>
2663:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Var def-Var'>@out</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2664:   <span class='def-SymbolStrong def-Symbol'>}</span>
2665:   <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>substr</span> <span class='perl-Var def-Var'>$line</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$start</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\|</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='perl-String def-String'>O</span><span class='regexp-Symbol def-StringContent def-String'>\b</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>$</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='perl-Comment def-Comment def-Syntax'># Options after a space</span>
2666:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>@out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>grep</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-MetaSymb def-Symbol'>^</span><span class='regexp-Symbol def-StringContent def-String'>\Q</span><span class='perl-Var def-Var'>$text</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>@options</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2667:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span> option_val<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$out</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>0</span><span class='perl-Symb def-Symbol'>]</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>undef</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2668:     <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>'? '</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2669:     <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>not</span> <span class='perl-Word def-Keyword'>defined</span> <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>[</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='regexp-Symbol def-StringContent def-String'>\r</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2670:       <span class='perl-Comment def-Comment def-Syntax'># Can do nothing better</span>
2671:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>elsif</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$val</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>~</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='regexp-SymbClass def-Var'>\s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2672:       <span class='perl-Word def-Keyword'>my</span> <span class='perl-Var def-Var'>$found</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2673:       <span class='perl-Word def-Keyword'>foreach</span> <span class='perl-Var def-Var'>$l</span> <span class='def-Symbol'>(</span><span class='perl-Symb def-Symbol'>split</span><span class='perl-String def-String'> </span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-ReType perl-Word def-Keyword'>qq</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='perl-Slash def-StringContent def-String'>\"</span><span class='perl-Slash def-StringContent def-String'>\'</span><span class='perl-Slash def-StringContent def-String'>\#</span><span class='perl-Slash def-StringContent def-String'>\|</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>/</span><span class='def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2674:     <span class='perl-Var def-Var'>$out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$l</span><span class='perl-Var def-Var'>$val</span><span class='perl-Var def-Var'>$l</span><span class='perl-String def-String'> "</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Word def-Keyword'>last</span> <span class='perl-Word def-Keyword'>if</span> <span class='def-Symbol'>(</span><span class='perl-WordFun def-FunctionKeyword def-Keyword'>index</span> <span class='perl-Var def-Var'>$val</span><span class='perl-Symb def-Symbol'>,</span> <span class='perl-Var def-Var'>$l</span><span class='def-Symbol'>)</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>-</span><span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2675:       <span class='def-SymbolStrong def-Symbol'>}</span>
2676:     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='perl-Word def-Keyword'>else</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2677:       <span class='perl-Var def-Var'>$out</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-String def-String'>"=</span><span class='perl-Var def-Var'>$val</span><span class='perl-String def-String'> "</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2678:     <span class='def-SymbolStrong def-Symbol'>}</span>
2679:     <span class='perl-Comment def-Comment def-Syntax'># Default to value if one completion, to question if many</span>
2680:     <span class='perl-Var def-Var'>$rl_attribs</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>completer_terminator_character</span><span class='perl-Symb def-Symbol'>}</span> <span class='perl-Symb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='perl-Var def-Var'>@out</span> <span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Symb def-Symbol'>?</span> <span class='perl-Var def-Var'>$out</span> <span class='perl-Symb def-Symbol'>:</span> <span class='perl-String def-String'>'? '</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2681:     <span class='perl-Word def-Keyword'>return</span> <span class='perl-WordFun def-FunctionKeyword def-Keyword'>sort</span> <span class='perl-Var def-Var'>@out</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2682:   <span class='def-SymbolStrong def-Symbol'>}</span>
2683:   <span class='perl-Word def-Keyword'>return</span> <span class='perl-Var def-Var'>$term</span><span class='perl-Symb def-Symbol'>-></span>filename_list<span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$text</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span> <span class='perl-Comment def-Comment def-Syntax'># filenames</span>
2684: <span class='def-SymbolStrong def-Symbol'>}</span>
2685: 
2686: <span class='perl-Word def-Keyword'>sub</span> end_report <span class='def-SymbolStrong def-Symbol'>{</span>
2687:   <span class='perl-Word def-Keyword'>print</span> <span class='perl-Var def-Var'>$OUT</span> <span class='perl-String def-String'>"Use `q' to quit or `R' to restart.  `h q' for details.</span><span class='regexp-Symbol def-StringContent def-String'>\n</span><span class='perl-String def-String'>"</span>
2688: <span class='def-SymbolStrong def-Symbol'>}</span>
2689: 
2690: <span class='perl-Word def-Keyword'>END</span> <span class='def-SymbolStrong def-Symbol'>{</span>
2691:   <span class='perl-Var def-Var'>$finished</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>if</span> <span class='perl-Var def-Var'>$inhibit_exit</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>      <span class='perl-Comment def-Comment def-Syntax'># So that some keys may be disabled.</span>
2692:   <span class='perl-Var def-Var'>$fall_off_end</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Numb def-Number'>1</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$inhibit_exit</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2693:   <span class='perl-Comment def-Comment def-Syntax'># Do not stop in at_exit() and destructors on exit:</span>
2694:   <span class='perl-Var def-Var'>$DB::single</span> <span class='perl-Symb def-Symbol'>=</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$fall_off_end</span> <span class='perl-Symb def-Symbol'>&amp;</span><span class='perl-Symb def-Symbol'>&amp;</span> <span class='perl-Symb def-Symbol'>!</span><span class='perl-Var def-Var'>$runnonstop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2695:   <span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>DB</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-Symb def-Symbol'>:</span><span class='perl-packages perl-WordExt def-KeywordStrong def-Keyword'>fake</span><span class='perl-Symb def-Symbol'>::</span>at_exit<span class='def-Symbol'>(</span><span class='def-Symbol'>)</span> <span class='perl-Word def-Keyword'>unless</span> <span class='perl-Var def-Var'>$fall_off_end</span> <span class='perl-Symb def-Symbol'>or</span> <span class='perl-Var def-Var'>$runnonstop</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2696: <span class='def-SymbolStrong def-Symbol'>}</span>
2697: 
2698: <span class='perl-Word def-Keyword'>package</span> <span class='perl-packages-user def-Directive'>DB</span><span class='perl-Symb def-Symbol'>::</span><span class='perl-packages-user def-Directive'>fake</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2699: 
2700: <span class='perl-Word def-Keyword'>sub</span> at_exit <span class='def-SymbolStrong def-Symbol'>{</span>
2701:   <span class='perl-String def-String'>"Debugged program terminated.  Use `q' to quit or `R' to restart."</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2702: <span class='def-SymbolStrong def-Symbol'>}</span>
2703: 
2704: <span class='perl-Word def-Keyword'>package</span> <span class='perl-packages-user def-Directive'>DB</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>            <span class='perl-Comment def-Comment def-Syntax'># Do not trace this 1; below!</span>
2705: 
2706: <span class='perl-Numb def-Number'>1</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
2707: 
