  0: <span class='z80-aLComment def-Comment def-Syntax'>; screen.za</span>
  1: <span class='z80-aLComment def-Comment def-Syntax'>; Работа с видеобуфером</span>
  2: <span class='z80-aLComment def-Comment def-Syntax'>; 02.09.2000</span>
  3: 
  4: 
  5: 
  6: <span class='z80-aDirective def-Directive'>COMMENT</span><span class='z80-aBComment def-Comment def-Syntax'> -----------------------------------------------Требует-</span>
  7: <span class='z80-aBComment def-Comment def-Syntax'></span>
  8: <span class='z80-aBComment def-Comment def-Syntax'>Требует:</span>
  9: <span class='z80-aBComment def-Comment def-Syntax'></span>
 10: <span class='z80-aBComment def-Comment def-Syntax'>* FONT_4x8 - адрес шрифта 4x8 (специальный формат, с</span>
 11: <span class='z80-aBComment def-Comment def-Syntax'>             выравниванием на #100</span>
 12: <span class='z80-aBComment def-Comment def-Syntax'>* FONT_8x8 - адрес шрифта 8x8 (специальный формат, с</span>
 13: <span class='z80-aBComment def-Comment def-Syntax'>             выравниванием на #100</span>
 14: <span class='z80-aBComment def-Comment def-Syntax'>* cfg_COL_MAIN - атрибуты экрана</span>
 15: <span class='z80-aBComment def-Comment def-Syntax'></span>
 16: <span class='z80-aBComment def-Comment def-Syntax'>---------------------------------------------------------------</span>
 17: 
 18: <span class='z80-aDirective def-Directive'>COMMENT</span><span class='z80-aBComment def-Comment def-Syntax'> ----------------------------------------------Содержит-</span>
 19: <span class='z80-aBComment def-Comment def-Syntax'></span>
 20: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Pos2Scr: Макрос преобразует координаты в адрес экрана.</span>
 21: <span class='z80-aBComment def-Comment def-Syntax'>      d  - координата Y (0-23);</span>
 22: <span class='z80-aBComment def-Comment def-Syntax'>      e  - координата X (0-31).</span>
 23: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - адрес экрана, соответствующий X и Y,</span>
 24: <span class='z80-aBComment def-Comment def-Syntax'>              a  - изменен.</span>
 25: <span class='z80-aBComment def-Comment def-Syntax'></span>
 26: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Pos2Attr: Макрос преобразует координаты в адрес области</span>
 27: <span class='z80-aBComment def-Comment def-Syntax'>                атрибутов.</span>
 28: <span class='z80-aBComment def-Comment def-Syntax'>      d  - координата Y (0-23);</span>
 29: <span class='z80-aBComment def-Comment def-Syntax'>      e  - координата X (0-31).</span>
 30: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - адрес экрана, соответствующий X и Y,</span>
 31: <span class='z80-aBComment def-Comment def-Syntax'>              a  - изменен.</span>
 32: <span class='z80-aBComment def-Comment def-Syntax'></span>
 33: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Scr2Attr: Макрос преобразует адрес экрана в адрес области</span>
 34: <span class='z80-aBComment def-Comment def-Syntax'>                атрибутов.</span>
 35: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 36: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - полученный адрес атрибутов, a - изменен.</span>
 37: <span class='z80-aBComment def-Comment def-Syntax'></span>
 38: <span class='z80-aBComment def-Comment def-Syntax'>* scr_AddrDn: Макрос получает адрес экрана на одну пиксельную</span>
 39: <span class='z80-aBComment def-Comment def-Syntax'>              линейку ниже заданного.</span>
 40: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 41: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - полученный адрес экрана, a  - изменен.</span>
 42: <span class='z80-aBComment def-Comment def-Syntax'></span>
 43: <span class='z80-aBComment def-Comment def-Syntax'>* scr_AddrUp: Макрос получает адрес экрана на одну пиксельную</span>
 44: <span class='z80-aBComment def-Comment def-Syntax'>              линейку выше заданного.</span>
 45: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 46: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - полученный адрес экрана, a  - изменен.</span>
 47: <span class='z80-aBComment def-Comment def-Syntax'></span>
 48: <span class='z80-aBComment def-Comment def-Syntax'>* scr_AddrDn8: Макрос получает адрес экрана на одно знакоместо</span>
 49: <span class='z80-aBComment def-Comment def-Syntax'>               ниже заданного.</span>
 50: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 51: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - полученный адрес экрана, a  - изменен.</span>
 52: <span class='z80-aBComment def-Comment def-Syntax'></span>
 53: <span class='z80-aBComment def-Comment def-Syntax'>* scr_AddrUp8: Макрос получает адрес экрана на одну пиксельную</span>
 54: <span class='z80-aBComment def-Comment def-Syntax'>               линейку выше заданного.</span>
 55: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 56: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: de - полученный адрес экрана, a  - изменен.</span>
 57: <span class='z80-aBComment def-Comment def-Syntax'></span>
 58: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Clear: Очистка экрана в соответствии с атрибутами.</span>
 59: <span class='z80-aBComment def-Comment def-Syntax'></span>
 60: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Print8x8: Печать ASCIIZ-строки на экране в режиме 8x8.</span>
 61: <span class='z80-aBComment def-Comment def-Syntax'>      ix - адрес строки;</span>
 62: <span class='z80-aBComment def-Comment def-Syntax'>      bc - координаты экрана (см. scr_Pos2Scr).</span>
 63: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: a - 0, ix - последний элемент строки (0)</span>
 64: <span class='z80-aBComment def-Comment def-Syntax'>              hl,de,b - изменены.</span>
 65: <span class='z80-aBComment def-Comment def-Syntax'></span>
 66: <span class='z80-aBComment def-Comment def-Syntax'>* scr_SymOut8x8: Печать символа на экране в режиме 8x8</span>
 67: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 68: <span class='z80-aBComment def-Comment def-Syntax'>      a  - код символа.</span>
 69: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: hl,bc,a - измемены.</span>
 70: <span class='z80-aBComment def-Comment def-Syntax'></span>
 71: <span class='z80-aBComment def-Comment def-Syntax'>* scr_Print4x8: Печать ASCIIZ-строки на экране в режиме 4x8.</span>
 72: <span class='z80-aBComment def-Comment def-Syntax'>      ix - адрес строки;</span>
 73: <span class='z80-aBComment def-Comment def-Syntax'>      bc - координаты экрана (см. scr_Pos2Scr).</span>
 74: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: a - 0, ix - последний элемент строки (0)</span>
 75: <span class='z80-aBComment def-Comment def-Syntax'>              hl,de,bc - изменены.</span>
 76: <span class='z80-aBComment def-Comment def-Syntax'></span>
 77: <span class='z80-aBComment def-Comment def-Syntax'>* scr_SymOut4x8: Печать символа на экране в режиме 4x8</span>
 78: <span class='z80-aBComment def-Comment def-Syntax'>      de - адрес экрана;</span>
 79: <span class='z80-aBComment def-Comment def-Syntax'>      c  - маска символа (%11110000 или %00001111);</span>
 80: <span class='z80-aBComment def-Comment def-Syntax'>      a  - код символа.</span>
 81: <span class='z80-aBComment def-Comment def-Syntax'>  Возвращает: hl,bc,a - измемены.</span>
 82: <span class='z80-aBComment def-Comment def-Syntax'></span>
 83: <span class='z80-aBComment def-Comment def-Syntax'>---------------------------------------------------------------</span>
 84: 
 85: <span class='z80-aLabel def-Label'>scr_Pos2Scr</span><span class='z80-aLabel def-Label'>       MAC</span>
 86:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
 87:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00000111</span>
 88:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
 89:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
 90:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
 91:                   <span class='z80-aMnemonic def-Operator def-Symbol'>add</span>   <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>e</span>
 92:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
 93:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
 94:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00011000</span>
 95:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aNumHex def-NumberHex def-Number'>#40</span> <span class='z80-aLComment def-Comment def-Syntax'>;#C0</span>
 96:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
 97:                   <span class='z80-aDirective def-Directive'>ENDM</span>
 98: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
 99: 
100: <span class='z80-aLabel def-Label'>scr_Pos2Attr</span><span class='z80-aLabel def-Label'>      MAC</span>
101:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
102:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
103:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
104:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
105:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
106:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%11100000</span>
107:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aRegister def-Register'>e</span>
108:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
109:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
110:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00000011</span>
111:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aNumHex def-NumberHex def-Number'>#58</span> <span class='z80-aLComment def-Comment def-Syntax'>;#D8</span>
112:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
113:                   <span class='z80-aDirective def-Directive'>ENDM</span>
114: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
115: 
116: <span class='z80-aLabel def-Label'>scr_Scr2Attr</span><span class='z80-aLabel def-Label'>      MAC</span>
117:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
118:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00011000</span>
119:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
120:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
121:                   <span class='z80-aMnemonic def-Operator def-Symbol'>rrca</span>
122:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aNumHex def-NumberHex def-Number'>#58</span> <span class='z80-aLComment def-Comment def-Syntax'>;#D8</span>
123:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
124:                   <span class='z80-aDirective def-Directive'>ENDM</span>
125: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
126: 
127: <span class='z80-aLabel def-Label'>scr_AddrDn</span><span class='z80-aLabel def-Label'>        MAC</span>
128:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
129:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
130:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00000111</span>
131:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>nz</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>12</span>
132:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>e</span>
133:                   <span class='z80-aMnemonic def-Operator def-Symbol'>add</span>   <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#20</span>
134:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
135:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>6</span>
136:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
137:                   <span class='z80-aMnemonic def-Operator def-Symbol'>sub</span>   <span class='z80-aNumHex def-NumberHex def-Number'>#08</span>
138:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
139:                   <span class='z80-aDirective def-Directive'>ENDM</span>
140: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
141: 
142: <span class='z80-aLabel def-Label'>scr_AddrUp</span><span class='z80-aLabel def-Label'>        MAC</span>
143:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
144:                   <span class='z80-aMnemonic def-Operator def-Symbol'>dec</span>   <span class='z80-aRegister def-Register'>d</span>
145:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aNumBin def-NumberBin def-Number'>%00000111</span>
146:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>nz</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>12</span>
147:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>e</span>
148:                   <span class='z80-aMnemonic def-Operator def-Symbol'>sub</span>   <span class='z80-aNumHex def-NumberHex def-Number'>#20</span>
149:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
150:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>6</span>
151:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
152:                   <span class='z80-aMnemonic def-Operator def-Symbol'>add</span>   <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#08</span>
153:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
154:                   <span class='z80-aDirective def-Directive'>ENDM</span>
155: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
156: 
157: <span class='z80-aLabel def-Label'>scr_AddrDn8</span><span class='z80-aLabel def-Label'>       MAC</span>
158:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>e</span>
159:                   <span class='z80-aMnemonic def-Operator def-Symbol'>add</span>   <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#20</span>
160:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
161:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>nc</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>6</span>
162:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
163:                   <span class='z80-aMnemonic def-Operator def-Symbol'>add</span>   <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#08</span>
164:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
165:                   <span class='z80-aDirective def-Directive'>ENDM</span>
166: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
167: 
168: <span class='z80-aLabel def-Label'>scr_AddrUp8</span><span class='z80-aLabel def-Label'>       MAC</span>
169:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>e</span>
170:                   <span class='z80-aMnemonic def-Operator def-Symbol'>sub</span>   <span class='z80-aNumHex def-NumberHex def-Number'>#20</span>
171:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
172:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>nc</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>$</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>6</span>
173:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
174:                   <span class='z80-aMnemonic def-Operator def-Symbol'>sub</span>   <span class='z80-aNumHex def-NumberHex def-Number'>#08</span>
175:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
176:                   <span class='z80-aDirective def-Directive'>ENDM</span>
177: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
178: 
179: <span class='z80-aLabel def-Label'>scr_Clear</span><span class='z80-aLabel def-Label'>         PROC</span>
180:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#5AFF</span> <span class='z80-aLComment def-Comment def-Syntax'>;#DAFF</span>
181:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#5AFE</span> <span class='z80-aLComment def-Comment def-Syntax'>;#DAFE</span>
182:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>bc</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#02FF</span>
183:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span>cfg_COL_MAIN<span class='z80-aSymbol def-Symbol'>)</span>
184:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
185:                   <span class='z80-aMnemonic def-Operator def-Symbol'>lddr</span>
186:                   <span class='z80-aMnemonic def-Operator def-Symbol'>dec</span>   <span class='z80-aRegister def-Register'>hl</span>
187:                   <span class='z80-aMnemonic def-Operator def-Symbol'>dec</span>   <span class='z80-aRegister def-Register'>e</span>
188:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>c</span>
189:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>bc</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumHex def-NumberHex def-Number'>#17FF</span>
190:                   <span class='z80-aMnemonic def-Operator def-Symbol'>lddr</span>
191:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ret</span>
192: <span class='z80-aLabel def-Label'>scr_Clear</span><span class='z80-aLabel def-Label'>         ENDP</span>
193: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
194: 
195: <span class='z80-aLabel def-Label'>scr_Print4x8</span><span class='z80-aLabel def-Label'>      PROC</span>
196:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>b</span>
197:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>c</span>
198:                   scr_Pos2Scr
199:                   <span class='z80-aMnemonic def-Operator def-Symbol'>bit</span>   <span class='z80-aNumDec def-NumberDec def-Number'>0</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>c</span> <span class='z80-aLComment def-Comment def-Syntax'>;Чет/нечет? Нужно для маски</span>
200:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumBin def-NumberBin def-Number'>%00001111</span> <span class='z80-aLComment def-Comment def-Syntax'>;Для четных столбцов</span>
201:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aMnemonic def-Operator def-Symbol'>z</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aLabel def-Label'>@1</span>
202:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumBin def-NumberBin def-Number'>%11110000</span> <span class='z80-aLComment def-Comment def-Syntax'>;Для нечетных столбцов</span>
203: <span class='z80-aLabel def-Label'>@1</span><span class='z80-aLabel def-Label'>:</span>               <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>ix</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;a = очередной символ строки</span>
204:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aRegister def-Register'>a</span>
205:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ret</span>   <span class='z80-aMnemonic def-Operator def-Symbol'>z</span> <span class='z80-aLComment def-Comment def-Syntax'>;Возврат, если a=0</span>
206:                   <span class='z80-aMnemonic def-Operator def-Symbol'>call  </span><span class='z80-aSymbol def-Symbol'>scr_SymOut4x8</span> <span class='z80-aLComment def-Comment def-Syntax'>;Вывод символа</span>
207:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>ix</span>
208:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>c</span>      <span class='z80-aLComment def-Comment def-Syntax'>;\</span>
209:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jp    </span><span class='z80-aSymbol def-Symbol'>p,@1</span><span class='z80-aSymbol def-Symbol'>-</span><span class='z80-aNumDec def-NumberDec def-Number'>2</span> <span class='z80-aLComment def-Comment def-Syntax'>;- Проверим старший бит c</span>
210:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumBin def-NumberBin def-Number'>%00001111</span>
211:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>e</span> <span class='z80-aLComment def-Comment def-Syntax'>;Следующий адрес экрана</span>
212:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aLabel def-Label'>@1</span>
213: <span class='z80-aLabel def-Label'>scr_Print4x8</span><span class='z80-aLabel def-Label'>      ENDP</span>
214: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
215: 
216: <span class='z80-aLabel def-Label'>scr_Print8x8</span><span class='z80-aLabel def-Label'>      PROC</span>
217:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>b</span>
218:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>e</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>c</span>
219:                   scr_Pos2Scr
220:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>ix</span><span class='z80-aSymbol def-Symbol'>)</span>
221:                   <span class='z80-aMnemonic def-Operator def-Symbol'>or</span>    <span class='z80-aRegister def-Register'>a</span>
222:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ret</span>   <span class='z80-aMnemonic def-Operator def-Symbol'>z</span>
223:                   <span class='z80-aMnemonic def-Operator def-Symbol'>call  </span><span class='z80-aSymbol def-Symbol'>scr_SymOut8x8</span>
224:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>e</span>
225:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>ix</span>
226:                   <span class='z80-aMnemonic def-Operator def-Symbol'>jr</span>    <span class='z80-aLabel def-Label'>scr_Print8x8</span><span class='z80-aSymbol def-Symbol'>+</span><span class='z80-aNumDec def-NumberDec def-Number'>3</span>
227: <span class='z80-aLabel def-Label'>scr_Print8x8</span><span class='z80-aLabel def-Label'>      ENDP</span>
228: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
229: 
230: <span class='z80-aLabel def-Label'>scr_SymOut8x8</span><span class='z80-aLabel def-Label'>     PROC</span>
231:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>h</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>HIGH</span> FONT_8x8 <span class='z80-aLComment def-Comment def-Syntax'>;Д.б. выравнен на 256!</span>
232:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>l</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
233:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>c</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span>
234:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>b</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aNumDec def-NumberDec def-Number'>8</span>
235: <span class='z80-aLabel def-Label'>@1</span><span class='z80-aLabel def-Label'>:</span>               <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;Не разлинеиваем - и так быстро</span>
236:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
237:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
238:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
239:                   <span class='z80-aMnemonic def-Operator def-Symbol'>djnz  </span><span class='z80-aSymbol def-Symbol'>@1</span>
240:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>c</span>
241:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ret</span>
242: <span class='z80-aLabel def-Label'>scr_SymOut8x8</span><span class='z80-aLabel def-Label'>     ENDP</span>
243: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
244: 
245: <span class='z80-aLabel def-Label'>scr_SymOut4x8</span><span class='z80-aLabel def-Label'>     PROC</span>
246:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>h</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>HIGH</span> FONT_4x8 <span class='z80-aLComment def-Comment def-Syntax'>;Д.б. выравнен на 256!</span>
247:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>l</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span> <span class='z80-aLComment def-Comment def-Syntax'>;hl = FONT_4x8</span>
248:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>b</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>d</span> <span class='z80-aLComment def-Comment def-Syntax'>;Сохраним de</span>
249:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;a = содержимое видеобуфера</span>
250:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;\</span>
251:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>    <span class='z80-aLComment def-Comment def-Syntax'>; Наложение на экран по маске</span>
252:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;/</span>
253:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span> <span class='z80-aLComment def-Comment def-Syntax'>;Отразим изменение на экране</span>
254:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
255:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
256:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span> <span class='z80-aLComment def-Comment def-Syntax'>;Разлинеено для скорости</span>
257:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
258:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
259:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
260:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
261:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
262:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
263:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
264:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
265:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
266:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
267:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
268:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
269:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
270:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
271:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
272:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
273:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
274:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
275:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
276:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
277:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
278:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
279:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
280:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
281:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
282:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
283:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
284:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
285:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
286:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
287:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
288:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
289:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
290:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
291:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
292:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
293:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
294:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
295:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
296:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>h</span>
297:                   <span class='z80-aMnemonic def-Operator def-Symbol'>inc</span>   <span class='z80-aRegister def-Register'>d</span>
298:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>a</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span>
299:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
300:                   <span class='z80-aMnemonic def-Operator def-Symbol'>and</span>   <span class='z80-aRegister def-Register'>c</span>
301:                   <span class='z80-aMnemonic def-Operator def-Symbol'>xor</span>   <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>hl</span><span class='z80-aSymbol def-Symbol'>)</span>
302:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aSymbol def-Symbol'>(</span><span class='z80-aRegister def-Register'>de</span><span class='z80-aSymbol def-Symbol'>)</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>a</span>
303:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ld</span>    <span class='z80-aRegister def-Register'>d</span><span class='z80-aSymbol def-Symbol'>,</span><span class='z80-aRegister def-Register'>b</span> <span class='z80-aLComment def-Comment def-Syntax'>;Восстановим de</span>
304:                   <span class='z80-aMnemonic def-Operator def-Symbol'>ret</span>
305: <span class='z80-aLabel def-Label'>scr_SymOut4x8</span><span class='z80-aLabel def-Label'>     ENDP</span>
306: <span class='z80-aLComment def-Comment def-Syntax'>;-------------------------------------------------------------;</span>
307: 
