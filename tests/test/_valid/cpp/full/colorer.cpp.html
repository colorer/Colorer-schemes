   0: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//</span>
   1: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  Copyright (c) Cail Lomecb (Igor Ruskih) 1999-2001 </span><span class='def-String'>&lt;</span><span class='def-EMail def-URI'>ruiv@uic.nnov.ru</span><span class='def-String'>></span>
   2: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  You can use, modify, distribute this code or any other part</span>
   3: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  of colorer library in sources or in binaries only according</span>
   4: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  to Colorer License (see /doc/license.txt for more information).</span>
   5: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//</span>
   6: 
   7: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> __MSDOS__</span>
   8: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>io.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
   9: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>new.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  10: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>stdlib.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  11: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>conio.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  12: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
  13: 
  14: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> _WIN32</span>
  15: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>io.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  16: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>windows.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  17: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>sys/timeb.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  18: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>time.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  19: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>string</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  20: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>list</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  21: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>"</span><span class='c-PreprocInclude def-Path def-URI'>clip.hpp</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>"</span>
  22: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
  23: 
  24: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>fcntl.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  25: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>sys/stat.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  26: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>stdio.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  27: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>string.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  28: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>colorer/classes.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  29: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>regexp/cregexp.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  30: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>include</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>&lt;</span><span class='c-PreprocInclude def-Path def-URI'>sgml/sgml.h</span><span class='c-PreprocIncludeEdge def-StringEdge def-String'>></span>
  31: 
  32: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>define</span><span class='c-Preproc def-DirectiveContent def-Directive'> LEN 256</span>
  33: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>define</span><span class='c-Preproc def-DirectiveContent def-Directive'> UNIX_CFG </span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>/usr/share/colorer/bin/.colorer.ini</span><span class='def-StringEdge def-String'>"</span>
  34: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// load variants</span>
  35: <span class='c-KeywordANSI def-Keyword'>enum</span> <span class='def-SymbolStrong def-Symbol'>{</span> EREGEXP<span class='c-Symbol def-Symbol'>,</span> ELIST<span class='c-Symbol def-Symbol'>,</span> EVIEW<span class='c-Symbol def-Symbol'>,</span> EGEN <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  36: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// these structures contains file's lines</span>
  37: <span class='c-KeywordANSI def-Keyword'>struct</span> SLines
  38: <span class='def-SymbolStrong def-Symbol'>{</span>
  39:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span>  len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  40:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  41:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> newdata<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  42:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> dup<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  43:   SLines<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span> newdata <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  44:   <span class='c-Symbol def-Symbol'>~</span>SLines<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span> <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>newdata<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>delete</span> data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  45: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  46: 
  47: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> what <span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  48: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> fname<span class='c-Symbol def-Symbol'>[</span>LEN<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  49: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> basefname<span class='c-Symbol def-Symbol'>[</span>LEN<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  50: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> frules<span class='c-Symbol def-Symbol'>[</span>LEN<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  51: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> typedescr<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>64</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  52: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span>  totallines<span class='c-Symbol def-Symbol'>,</span> htmlsubst<span class='c-Symbol def-Symbol'>,</span> cpdis <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> bkcolor <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberHex def-Number'>0x1F</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  53: SLines <span class='c-Symbol def-Symbol'>*</span>lines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  54: 
  55: PAssignData ad<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  56: PAssign adata<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  57: PColorData cd<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  58: PColorer cc<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  59: PType type<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  60: PLineHL l1<span class='c-Symbol def-Symbol'>,</span> hlines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  61: 
  62: <span class='def-CommentDoc def-Comment def-Syntax'>/////////////////////////////////////////////////////////////////////////////</span>
  63: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// check for tabs</span>
  64: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> SLines<span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span>dup<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
  65: <span class='def-SymbolStrong def-Symbol'>{</span>
  66: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>od <span class='c-Symbol def-Symbol'>=</span> data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  67: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> chg <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  68: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span>  i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  69:   <span class='c-KeywordANSI def-Keyword'>for</span> <span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
  70:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\t'</span><span class='c-Symbol def-Symbol'>)</span> chg<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  71:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>chg<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  72: 
  73:   data <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>[</span>len <span class='c-Symbol def-Symbol'>+</span> chg<span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>4</span> <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  74:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>memset</span><span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> len <span class='c-Symbol def-Symbol'>+</span> chg<span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>4</span> <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  75:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strncpy</span><span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>,</span> od<span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  76:   <span class='c-KeywordANSI def-Keyword'>for</span> <span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
  77:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\t'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
  78:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j <span class='c-Symbol def-Symbol'>=</span> len<span class='c-Symbol def-Symbol'>-</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>)</span>
  79:         data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  80:       data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>' '</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  81:       data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>' '</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  82:       data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>' '</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  83:       data<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>' '</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  84:       len<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>3</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  85:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  86:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  87:   newdata <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  88: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  89: 
  90: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// tests regular expressions</span>
  91: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> retest<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
  92: <span class='def-SymbolStrong def-Symbol'>{</span>
  93: SMatches match<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  94: PRegExp re<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  95: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> res<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  96: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> text<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>255</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  97: 
  98:   re <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CRegExp<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  99:   <span class='c-KeywordANSI def-Keyword'>do</span><span class='def-SymbolStrong def-Symbol'>{</span>
 100:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-String def-String'>regexp:</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 101:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>gets</span><span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 102:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>re<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SetExpr<span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 103:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>exprn:</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 104:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>gets</span><span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 105:     res <span class='c-Symbol def-Symbol'>=</span> re<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>Parse<span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>match<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 106:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-String def-String'>match:  </span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span>res<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>ok</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>error</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 107:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> match<span class='c-Symbol def-Symbol'>.</span>cMatch<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 108:       <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringFormat def-VarStrong def-Var'>%d</span><span class='c-String def-String'>:(</span><span class='c-StringFormat def-VarStrong def-Var'>%d</span><span class='c-String def-String'>,</span><span class='c-StringFormat def-VarStrong def-Var'>%d</span><span class='c-String def-String'>), </span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span>i<span class='c-Symbol def-Symbol'>,</span>match<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>,</span>match<span class='c-Symbol def-Symbol'>.</span>e<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 109:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 110:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 111:   <span class='c-KeywordANSI def-Keyword'>delete</span> re<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 112: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 113: 
 114: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// loads all found types</span>
 115: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> <span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>list</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
 116: <span class='def-SymbolStrong def-Symbol'>{</span>
 117: PColorData cd<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 118: PType type<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 119: 
 120:   cd <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CColorData<span class='c-Symbol def-Symbol'>(</span>basefname<span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>./_colorer.log</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 121:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>IsOk<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 122:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot load colorer base from </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> basefname<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 123:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 124:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 125:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-String def-String'>loading file types. check _colorer.log</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 126:   <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>type <span class='c-Symbol def-Symbol'>=</span> cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>EnumTypes<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> type<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> type <span class='c-Symbol def-Symbol'>=</span> cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>EnumTypes<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 127:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> type<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>descr<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 128:     cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>LoadType<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 129:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 130: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 131: 
 132: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// function called from CColorer object</span>
 133: <span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> GetLine<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> <span class='c-Symbol def-Symbol'>*</span>param<span class='c-Symbol def-Symbol'>,</span> CColorer <span class='c-Symbol def-Symbol'>*</span>who<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> lno<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span><span class='c-Symbol def-Symbol'>*</span>len<span class='c-Symbol def-Symbol'>)</span>
 134: <span class='def-SymbolStrong def-Symbol'>{</span>
 135:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>lno <span class='c-Symbol def-Symbol'>></span> totallines<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span> <span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 136:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>len<span class='c-Symbol def-Symbol'>)</span> <span class='c-Symbol def-Symbol'>*</span>len <span class='c-Symbol def-Symbol'>=</span> lines<span class='c-Symbol def-Symbol'>[</span>lno<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 137:   <span class='c-KeywordANSI def-Keyword'>return</span> lines<span class='c-Symbol def-Symbol'>[</span>lno<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 138: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 139: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// search type with typedescr</span>
 140: PType seltype<span class='c-Symbol def-Symbol'>(</span>PColorData cd<span class='c-Symbol def-Symbol'>)</span>
 141: <span class='def-SymbolStrong def-Symbol'>{</span>
 142: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 143:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>*</span>typedescr<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span> <span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 144:   len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strlen</span><span class='c-Symbol def-Symbol'>(</span>typedescr<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 145:   <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>PType tp <span class='c-Symbol def-Symbol'>=</span> cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>EnumTypes<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> tp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> tp <span class='c-Symbol def-Symbol'>=</span> tp<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>next<span class='c-Symbol def-Symbol'>)</span>
 146:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>tp<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>descr <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>!</span>strnicmp<span class='c-Symbol def-Symbol'>(</span>tp<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>descr<span class='c-Symbol def-Symbol'>,</span> typedescr<span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span> tp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 147:   <span class='c-KeywordANSI def-Keyword'>return</span> <span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 148: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 149: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  load lines into array</span>
 150: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> formatlines<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>data<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> no<span class='c-Symbol def-Symbol'>)</span>
 151: <span class='def-SymbolStrong def-Symbol'>{</span>
 152: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>file<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 153: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>,</span> llen <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 154: 
 155:   totallines <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 156:   file <span class='c-Symbol def-Symbol'>=</span> data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 157:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>file <span class='c-Symbol def-Symbol'>&lt;</span> data <span class='c-Symbol def-Symbol'>+</span> len<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 158:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>*</span>file <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> <span class='c-Symbol def-Symbol'>*</span>file <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 159:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span><span class='c-Symbol def-Symbol'>)</span> file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 160:       <span class='c-KeywordANSI def-Keyword'>else</span> <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span><span class='c-Symbol def-Symbol'>)</span> file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 161:       totallines<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 162:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 163:     file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 164:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 165:   lines <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> SLines<span class='c-Symbol def-Symbol'>[</span>totallines<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 166:   file <span class='c-Symbol def-Symbol'>=</span> data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 167:   lines<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>data <span class='c-Symbol def-Symbol'>=</span> file<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 168:   i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 169:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>file <span class='c-Symbol def-Symbol'>&lt;</span> data <span class='c-Symbol def-Symbol'>+</span> len<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 170:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>*</span>file <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> <span class='c-Symbol def-Symbol'>*</span>file <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 171:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span><span class='c-Symbol def-Symbol'>)</span> file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 172:       <span class='c-KeywordANSI def-Keyword'>else</span> <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> file<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span><span class='c-Symbol def-Symbol'>)</span> file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 173:       lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len <span class='c-Symbol def-Symbol'>=</span> llen <span class='c-Symbol def-Symbol'>-</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 174:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>no<span class='c-Symbol def-Symbol'>)</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>dup<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 175:       llen <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 176:       i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 177:       lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>=</span> file <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 178:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 179:     file<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 180:     llen<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 181:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 182:   lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len <span class='c-Symbol def-Symbol'>=</span> llen <span class='c-Symbol def-Symbol'>-</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 183:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>no<span class='c-Symbol def-Symbol'>)</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>dup<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 184:   <span class='c-KeywordANSI def-Keyword'>return</span> <span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 185: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 186: 
 187: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// check and substitutes characters in HTML</span>
 188: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> SetLine<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>line<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>src<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len<span class='c-Symbol def-Symbol'>)</span>
 189: <span class='def-SymbolStrong def-Symbol'>{</span>
 190:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strncpy</span><span class='c-Symbol def-Symbol'>(</span>line<span class='c-Symbol def-Symbol'>,</span> src<span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 191:   line<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 192: 
 193:   <span class='c-KeywordANSI def-Keyword'>for</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 194:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>htmlsubst <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'&lt;'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 195:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j <span class='c-Symbol def-Symbol'>=</span> len<span class='c-Symbol def-Symbol'>-</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>)</span>
 196:         line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 197:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'&amp;'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 198:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'l'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 199:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'t'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 200:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>';'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 201:       len<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>3</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 202:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 203:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>htmlsubst <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'>'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 204:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j <span class='c-Symbol def-Symbol'>=</span> len<span class='c-Symbol def-Symbol'>-</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>)</span>
 205:         line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 206:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'&amp;'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 207:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'g'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 208:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'t'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 209:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>3</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>';'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 210:       len<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>3</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 211:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 212:     <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// for printf :)</span>
 213:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'%'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 214:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j <span class='c-Symbol def-Symbol'>=</span> len<span class='c-Symbol def-Symbol'>-</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>)</span>
 215:         line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span>j<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 216:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'%'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 217:       line<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'%'</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 218:       len<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 219:       i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 220:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 221:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 222: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 223: 
 224: <span class='c-KeywordANSI def-Keyword'>class</span> ScreenBuffer<span class='def-SymbolStrong def-Symbol'>{</span>
 225: <span class='c-KeywordANSI def-Keyword'>public</span><span class='c-Label def-Label'>:</span>
 226:   ScreenBuffer<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStructure def-StructKeyword def-Keyword'>HANDLE</span> con<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> w<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> h<span class='c-Symbol def-Symbol'>)</span>
 227:   <span class='def-SymbolStrong def-Symbol'>{</span>
 228:     buffer<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 229:     console<span class='c-Symbol def-Symbol'>=</span>con<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 230:     resize<span class='c-Symbol def-Symbol'>(</span>w<span class='c-Symbol def-Symbol'>,</span>h<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 231:   <span class='def-SymbolStrong def-Symbol'>}</span>
 232:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> resize<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> w<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> h<span class='c-Symbol def-Symbol'>)</span>
 233:   <span class='def-SymbolStrong def-Symbol'>{</span>
 234:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>buffer<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>delete</span> <span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>]</span> buffer<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 235:     width<span class='c-Symbol def-Symbol'>=</span>w<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 236:     height<span class='c-Symbol def-Symbol'>=</span>h<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 237:     size<span class='c-Symbol def-Symbol'>=</span>width<span class='c-Symbol def-Symbol'>*</span>height<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 238:     buffer<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>new</span> <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CHAR_INFO</span><span class='c-Symbol def-Symbol'>[</span>size<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 239:   <span class='def-SymbolStrong def-Symbol'>}</span>
 240:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> fillattr<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordStructure def-StructKeyword def-Keyword'>WORD</span> attr<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> cnt<span class='c-Symbol def-Symbol'>)</span>
 241:   <span class='def-SymbolStrong def-Symbol'>{</span>
 242:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>y<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>height<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 243:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>x<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>cnt<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>x<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span><span class='def-SymbolStrong def-Symbol'>}</span>
 244:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>cnt<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 245:     <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>x<span class='c-Symbol def-Symbol'>+</span>cnt<span class='c-Symbol def-Symbol'>&lt;</span>width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span>cnt<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span>width<span class='c-Symbol def-Symbol'>-</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 246:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CHAR_INFO</span> <span class='c-Symbol def-Symbol'>*</span>b<span class='c-Symbol def-Symbol'>=</span>buffer<span class='c-Symbol def-Symbol'>+</span>y<span class='c-Symbol def-Symbol'>*</span>width<span class='c-Symbol def-Symbol'>+</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 247:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>n<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 248:     <span class='def-SymbolStrong def-Symbol'>{</span>
 249:       b<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>Attributes<span class='c-Symbol def-Symbol'>=</span>attr<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 250:       b<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 251:     <span class='def-SymbolStrong def-Symbol'>}</span>
 252:   <span class='def-SymbolStrong def-Symbol'>}</span>
 253:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> fillchar<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> chr<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> cnt<span class='c-Symbol def-Symbol'>)</span>
 254:   <span class='def-SymbolStrong def-Symbol'>{</span>
 255:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>y<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>height<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 256:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>x<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>cnt<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>x<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span><span class='def-SymbolStrong def-Symbol'>}</span>
 257:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>cnt<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 258:     <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>x<span class='c-Symbol def-Symbol'>+</span>cnt<span class='c-Symbol def-Symbol'>&lt;</span>width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span>cnt<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span>width<span class='c-Symbol def-Symbol'>-</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 259:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CHAR_INFO</span> <span class='c-Symbol def-Symbol'>*</span>b<span class='c-Symbol def-Symbol'>=</span>buffer<span class='c-Symbol def-Symbol'>+</span>y<span class='c-Symbol def-Symbol'>*</span>width<span class='c-Symbol def-Symbol'>+</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 260:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>n<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 261:     <span class='def-SymbolStrong def-Symbol'>{</span>
 262:       b<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>Char<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>=</span>chr<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 263:       b<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 264:     <span class='def-SymbolStrong def-Symbol'>}</span>
 265:   <span class='def-SymbolStrong def-Symbol'>}</span>
 266:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> txt<span class='c-Symbol def-Symbol'>)</span>
 267:   <span class='def-SymbolStrong def-Symbol'>{</span>
 268:     <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span>x<span class='c-Symbol def-Symbol'>,</span>y<span class='c-Symbol def-Symbol'>,</span>txt<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strlen</span><span class='c-Symbol def-Symbol'>(</span>txt<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 269:   <span class='def-SymbolStrong def-Symbol'>}</span>
 270:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> txt<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> cnt<span class='c-Symbol def-Symbol'>)</span>
 271:   <span class='def-SymbolStrong def-Symbol'>{</span>
 272:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>y<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>height<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 273:     <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>x<span class='c-Symbol def-Symbol'>+</span>cnt<span class='c-Symbol def-Symbol'>&lt;</span>width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span>cnt<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span>width<span class='c-Symbol def-Symbol'>-</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 274:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CHAR_INFO</span> <span class='c-Symbol def-Symbol'>*</span>b<span class='c-Symbol def-Symbol'>=</span>buffer<span class='c-Symbol def-Symbol'>+</span>y<span class='c-Symbol def-Symbol'>*</span>width<span class='c-Symbol def-Symbol'>+</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 275:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>n<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 276:     <span class='def-SymbolStrong def-Symbol'>{</span>
 277:       b<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>Char<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>*</span>txt<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 278:       b<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>txt<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 279:     <span class='def-SymbolStrong def-Symbol'>}</span>
 280:   <span class='def-SymbolStrong def-Symbol'>}</span>
 281:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> flush<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
 282:   <span class='def-SymbolStrong def-Symbol'>{</span>
 283:     invalidate<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>width<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span>height<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 284:   <span class='def-SymbolStrong def-Symbol'>}</span>
 285:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> invalidate<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> w<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> h<span class='c-Symbol def-Symbol'>)</span>
 286:   <span class='def-SymbolStrong def-Symbol'>{</span>
 287:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>COORD</span> bufsize<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 288:     bufsize<span class='c-Symbol def-Symbol'>.</span>X<span class='c-Symbol def-Symbol'>=</span>width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 289:     bufsize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>=</span>height<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 290:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>COORD</span> to<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 291:     to<span class='c-Symbol def-Symbol'>.</span>X<span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 292:     to<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>=</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 293:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>SMALL_RECT</span> wnd<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 294:     wnd<span class='c-Symbol def-Symbol'>.</span>Left<span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 295:     wnd<span class='c-Symbol def-Symbol'>.</span>Top<span class='c-Symbol def-Symbol'>=</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 296:     wnd<span class='c-Symbol def-Symbol'>.</span>Right<span class='c-Symbol def-Symbol'>=</span>x<span class='c-Symbol def-Symbol'>+</span>w<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 297:     wnd<span class='c-Symbol def-Symbol'>.</span>Bottom<span class='c-Symbol def-Symbol'>=</span>y<span class='c-Symbol def-Symbol'>+</span>h<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 298:     <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>WriteConsoleOutput</span><span class='c-Symbol def-Symbol'>(</span>console<span class='c-Symbol def-Symbol'>,</span>buffer<span class='c-Symbol def-Symbol'>,</span>bufsize<span class='c-Symbol def-Symbol'>,</span>to<span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>&amp;</span>wnd<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 299:   <span class='def-SymbolStrong def-Symbol'>}</span>
 300:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='c-KeywordANSI def-Keyword'>return</span> width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span><span class='def-SymbolStrong def-Symbol'>}</span>
 301:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span><span class='c-KeywordANSI def-Keyword'>return</span> height<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span><span class='def-SymbolStrong def-Symbol'>}</span>
 302:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> hidecursor<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
 303:   <span class='def-SymbolStrong def-Symbol'>{</span>
 304:     savecur<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 305:     savecur<span class='c-Symbol def-Symbol'>.</span>bVisible<span class='c-Symbol def-Symbol'>=</span>TRUE<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 306:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetConsoleCursorInfo</span><span class='c-Symbol def-Symbol'>(</span>console<span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>&amp;</span>savecur<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 307:     <span class='def-SymbolStrong def-Symbol'>{</span>
 308:       <span class='c-KeywordStructure def-StructKeyword def-Keyword'>HANDLE</span> hnd<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetStdHandle</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>STD_OUTPUT_HANDLE</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 309:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetConsoleCursorInfo</span><span class='c-Symbol def-Symbol'>(</span>hnd<span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>&amp;</span>savecur<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 310:       <span class='def-SymbolStrong def-Symbol'>{</span>
 311:         <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> err<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetLastError</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 312:         savecur<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>10</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 313:         savecur<span class='c-Symbol def-Symbol'>.</span>bVisible<span class='c-Symbol def-Symbol'>=</span>TRUE<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 314:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 315:     <span class='def-SymbolStrong def-Symbol'>}</span>
 316:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CONSOLE_CURSOR_INFO</span> cci<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 317:     cci<span class='c-Symbol def-Symbol'>.</span>dwSize <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>100</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 318:     cci<span class='c-Symbol def-Symbol'>.</span>bVisible <span class='c-Symbol def-Symbol'>=</span> FALSE<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 319:     <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleCursorInfo</span><span class='c-Symbol def-Symbol'>(</span>console<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>cci<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 320:   <span class='def-SymbolStrong def-Symbol'>}</span>
 321:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> showcursor<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
 322:   <span class='def-SymbolStrong def-Symbol'>{</span>
 323:     <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleCursorInfo</span><span class='c-Symbol def-Symbol'>(</span>console<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>savecur<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 324:   <span class='def-SymbolStrong def-Symbol'>}</span>
 325:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> setcurpos<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>)</span>
 326:   <span class='def-SymbolStrong def-Symbol'>{</span>
 327:     <span class='c-KeywordStructure def-StructKeyword def-Keyword'>COORD</span> c<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 328:     c<span class='c-Symbol def-Symbol'>.</span>X<span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 329:     c<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>=</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 330:     <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleCursorPosition</span><span class='c-Symbol def-Symbol'>(</span>console<span class='c-Symbol def-Symbol'>,</span>c<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 331:   <span class='def-SymbolStrong def-Symbol'>}</span>
 332: <span class='c-KeywordANSI def-Keyword'>protected</span><span class='c-Label def-Label'>:</span>
 333:   <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CHAR_INFO</span> <span class='c-Symbol def-Symbol'>*</span>buffer<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 334:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> width<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 335:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> height<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 336:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> size<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 337:   <span class='c-KeywordStructure def-StructKeyword def-Keyword'>HANDLE</span> console<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 338:   <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CONSOLE_CURSOR_INFO</span> savecur<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 339: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 340: 
 341: ScreenBuffer <span class='c-Symbol def-Symbol'>*</span>scrbuf<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 342: 
 343: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> CTRL_PRESSED<span class='c-Symbol def-Symbol'>=</span>LEFT_CTRL_PRESSED<span class='c-Symbol def-Symbol'>|</span>RIGHT_CTRL_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 344: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> ALT_PRESSED<span class='c-Symbol def-Symbol'>=</span>LEFT_ALT_PRESSED<span class='c-Symbol def-Symbol'>|</span>RIGHT_ALT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 345: 
 346: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> CTRL_KEYS<span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>|</span>ALT_PRESSED<span class='c-Symbol def-Symbol'>|</span>SHIFT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 347: 
 348: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> word_left<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> str<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> pos<span class='c-Symbol def-Symbol'>)</span>
 349: <span class='def-SymbolStrong def-Symbol'>{</span>
 350:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 351:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 352:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>
 353:   <span class='def-SymbolStrong def-Symbol'>{</span>
 354:     <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 355:   <span class='def-SymbolStrong def-Symbol'>}</span>
 356:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 357:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>></span><span class='def-NumberDec def-Number'>1</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 358:   <span class='c-KeywordANSI def-Keyword'>return</span> pos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 359: <span class='def-SymbolStrong def-Symbol'>}</span>
 360: 
 361: 
 362: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> word_right<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> str<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> pos<span class='c-Symbol def-Symbol'>)</span>
 363: <span class='def-SymbolStrong def-Symbol'>{</span>
 364:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span> pos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 365:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 366:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>
 367:   <span class='def-SymbolStrong def-Symbol'>{</span>
 368:     <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 369:   <span class='def-SymbolStrong def-Symbol'>}</span>
 370:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>return</span> pos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 371:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 372:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>str<span class='c-Symbol def-Symbol'>[</span>pos<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span>pos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 373:   <span class='c-KeywordANSI def-Keyword'>return</span> pos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 374: <span class='def-SymbolStrong def-Symbol'>}</span>
 375: 
 376: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> extend_selection<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span><span class='c-Symbol def-Symbol'>&amp;</span> s<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span><span class='c-Symbol def-Symbol'>&amp;</span> e<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> op<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> p<span class='c-Symbol def-Symbol'>)</span>
 377: <span class='def-SymbolStrong def-Symbol'>{</span>
 378:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 379:   <span class='def-SymbolStrong def-Symbol'>{</span>
 380:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>op<span class='c-Symbol def-Symbol'>&lt;</span>p<span class='c-Symbol def-Symbol'>)</span>
 381:     <span class='def-SymbolStrong def-Symbol'>{</span>
 382:       s<span class='c-Symbol def-Symbol'>=</span>op<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 383:       e<span class='c-Symbol def-Symbol'>=</span>p<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 384:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 385:     <span class='def-SymbolStrong def-Symbol'>{</span>
 386:       s<span class='c-Symbol def-Symbol'>=</span>p<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 387:       e<span class='c-Symbol def-Symbol'>=</span>op<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 388:     <span class='def-SymbolStrong def-Symbol'>}</span>
 389:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 390:   <span class='def-SymbolStrong def-Symbol'>}</span>
 391:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>op<span class='c-Symbol def-Symbol'>)</span>s<span class='c-Symbol def-Symbol'>=</span>p<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 392:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>e<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>op<span class='c-Symbol def-Symbol'>)</span>e<span class='c-Symbol def-Symbol'>=</span>p<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 393:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>e<span class='c-Symbol def-Symbol'>)</span>s<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 394: <span class='def-SymbolStrong def-Symbol'>}</span>
 395: 
 396: <span class='c-KeywordANSI def-Keyword'>struct</span> ed_undo_struct<span class='def-SymbolStrong def-Symbol'>{</span>
 397:   <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> str<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 398:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 399:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 400:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> selstart<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 401:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> selend<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 402: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 403: <span class='c-KeywordANSI def-Keyword'>class</span> edundolist<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span><span class='c-KeywordANSI def-Keyword'>public</span> std<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>::</span>list<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>&lt;</span>ed_undo_struct<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>></span><span class='def-SymbolStrong def-Symbol'>{</span>
 404: <span class='c-KeywordANSI def-Keyword'>public</span><span class='c-Label def-Label'>:</span>
 405:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> push_back<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span><span class='c-Symbol def-Symbol'>&amp;</span> s<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> lp<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> cp<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> ss<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> se<span class='c-Symbol def-Symbol'>)</span>
 406:   <span class='def-SymbolStrong def-Symbol'>{</span>
 407:     ed_undo_struct st<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 408:     insert<span class='c-Symbol def-Symbol'>(</span>end<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>st<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 409:     back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>str<span class='c-Symbol def-Symbol'>=</span>s<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 410:     back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>leftpos<span class='c-Symbol def-Symbol'>=</span>lp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 411:     back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>curpos<span class='c-Symbol def-Symbol'>=</span>cp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 412:     back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selstart<span class='c-Symbol def-Symbol'>=</span>ss<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 413:     back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selend<span class='c-Symbol def-Symbol'>=</span>se<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 414:   <span class='def-SymbolStrong def-Symbol'>}</span>
 415:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> changed<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>const</span> <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span><span class='c-Symbol def-Symbol'>&amp;</span> s<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> lp<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> cp<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> ss<span class='c-Symbol def-Symbol'>,</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> se<span class='c-Symbol def-Symbol'>)</span>
 416:   <span class='def-SymbolStrong def-Symbol'>{</span>
 417:     <span class='c-KeywordANSI def-Keyword'>return</span> back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>leftpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>lp <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>curpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>cp <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span>
 418:            back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>ss <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selend<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>se <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span>
 419:            back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>str<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>s<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 420:   <span class='def-SymbolStrong def-Symbol'>}</span>
 421: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 422: 
 423: 
 424: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> search_input<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStructure def-StructKeyword def-Keyword'>HANDLE</span> conin<span class='c-Symbol def-Symbol'>,</span><span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span><span class='c-Symbol def-Symbol'>&amp;</span> findstring<span class='c-Symbol def-Symbol'>)</span>
 425: <span class='def-SymbolStrong def-Symbol'>{</span>
 426:   <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> s<span class='c-Symbol def-Symbol'>=</span>findstring<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 427:   scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>7</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 428:   scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillchar<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 429:   <span class='c-KeywordStructure def-StructKeyword def-Keyword'>INPUT_RECORD</span> ir<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 430:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 431:   <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> tmp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 432:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> quit<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 433:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> retval<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 434:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 435:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> selstart<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>=</span>findstring<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 436: 
 437:   scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>showcursor<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 438: 
 439:   edundolist undo<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 440:   undo<span class='c-Symbol def-Symbol'>.</span>push_back<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>,</span>curpos<span class='c-Symbol def-Symbol'>,</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 441:   <span class='c-KeywordANSI def-Keyword'>const</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> maxundo<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>256</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 442: 
 443:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> skipundo<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 444: 
 445:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>quit<span class='c-Symbol def-Symbol'>)</span>
 446:   <span class='def-SymbolStrong def-Symbol'>{</span>
 447:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>redraw<span class='c-Symbol def-Symbol'>)</span>
 448:     <span class='def-SymbolStrong def-Symbol'>{</span>
 449:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>skipundo <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> undo<span class='c-Symbol def-Symbol'>.</span>changed<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>,</span>curpos<span class='c-Symbol def-Symbol'>,</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 450:       <span class='def-SymbolStrong def-Symbol'>{</span>
 451:         undo<span class='c-Symbol def-Symbol'>.</span>push_back<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>,</span>curpos<span class='c-Symbol def-Symbol'>,</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 452:         <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//while(undo.size()>=maxundo)undo.pop_front();</span>
 453:       <span class='def-SymbolStrong def-Symbol'>}</span>
 454:       skipundo<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 455:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillchar<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 456:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>7</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 457:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 458:       <span class='def-SymbolStrong def-Symbol'>{</span>
 459:         scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberHex def-Number'>0x70</span><span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 460:       <span class='def-SymbolStrong def-Symbol'>}</span>
 461:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span><span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>+</span>leftpos<span class='c-Symbol def-Symbol'>,</span>s<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 462:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>invalidate<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 463:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>setcurpos<span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 464:     <span class='def-SymbolStrong def-Symbol'>}</span>
 465:     redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 466:     <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>ReadConsoleInput</span><span class='c-Symbol def-Symbol'>(</span>conin<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>ir<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>tmp<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 467:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>EventType <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> KEY_EVENT <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>bKeyDown<span class='c-Symbol def-Symbol'>)</span>
 468:     <span class='def-SymbolStrong def-Symbol'>{</span>
 469:       <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> state<span class='c-Symbol def-Symbol'>=</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>dwControlKeyState<span class='c-Symbol def-Symbol'>&amp;</span>CTRL_KEYS<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 470:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>&amp;</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span>state<span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 471:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>&amp;</span>ALT_PRESSED<span class='c-Symbol def-Symbol'>)</span>state<span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>=</span>ALT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 472:       <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> shift<span class='c-Symbol def-Symbol'>=</span>state<span class='c-Symbol def-Symbol'>&amp;</span>SHIFT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 473:       state<span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>~</span>SHIFT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 474:       <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> pos<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 475:       <span class='c-KeywordANSI def-Keyword'>switch</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>wVirtualKeyCode<span class='c-Symbol def-Symbol'>)</span>
 476:       <span class='def-SymbolStrong def-Symbol'>{</span>
 477:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_LEFT</span><span class='c-Label def-Label'>:</span>
 478:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span>
 479:           <span class='def-SymbolStrong def-Symbol'>{</span>
 480:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> wl<span class='c-Symbol def-Symbol'>=</span>word_left<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 481:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wl<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 482:             <span class='def-SymbolStrong def-Symbol'>{</span>
 483:               leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 484:               curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 485:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 486:             <span class='def-SymbolStrong def-Symbol'>{</span>
 487:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wl<span class='c-Symbol def-Symbol'>&lt;</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 488:               <span class='def-SymbolStrong def-Symbol'>{</span>
 489:                 leftpos<span class='c-Symbol def-Symbol'>=</span>wl<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 490:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 491:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 492:               <span class='def-SymbolStrong def-Symbol'>{</span>
 493:                 curpos<span class='c-Symbol def-Symbol'>=</span>wl<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 494:               <span class='def-SymbolStrong def-Symbol'>}</span>
 495:             <span class='def-SymbolStrong def-Symbol'>}</span>
 496:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 497:           <span class='def-SymbolStrong def-Symbol'>{</span>
 498:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 499:             <span class='def-SymbolStrong def-Symbol'>{</span>
 500:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>></span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span>leftpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 501:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 502:             <span class='def-SymbolStrong def-Symbol'>{</span>
 503:               curpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 504:             <span class='def-SymbolStrong def-Symbol'>}</span>
 505:           <span class='def-SymbolStrong def-Symbol'>}</span>
 506:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 507:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_RIGHT</span><span class='c-Label def-Label'>:</span>
 508:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span>
 509:           <span class='def-SymbolStrong def-Symbol'>{</span>
 510:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> wr<span class='c-Symbol def-Symbol'>=</span>word_right<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 511:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wr<span class='c-Symbol def-Symbol'>></span>leftpos<span class='c-Symbol def-Symbol'>+</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 512:             <span class='def-SymbolStrong def-Symbol'>{</span>
 513:               leftpos<span class='c-Symbol def-Symbol'>=</span>wr<span class='c-Symbol def-Symbol'>-</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 514:               curpos<span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 515:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 516:             <span class='def-SymbolStrong def-Symbol'>{</span>
 517:               curpos<span class='c-Symbol def-Symbol'>=</span>wr<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 518:             <span class='def-SymbolStrong def-Symbol'>}</span>
 519:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 520:           <span class='def-SymbolStrong def-Symbol'>{</span>
 521:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>s<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 522:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>leftpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 523:             <span class='c-KeywordANSI def-Keyword'>else</span> curpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 524:           <span class='def-SymbolStrong def-Symbol'>}</span>
 525:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 526:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_HOME</span><span class='c-Label def-Label'>:</span>
 527:           leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 528:           curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 529:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 530:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_END</span><span class='c-Label def-Label'>:</span>
 531:           curpos<span class='c-Symbol def-Symbol'>=</span>s<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 532:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 533:           <span class='def-SymbolStrong def-Symbol'>{</span>
 534:             leftpos<span class='c-Symbol def-Symbol'>=</span>curpos<span class='c-Symbol def-Symbol'>-</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 535:             curpos<span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 536:           <span class='def-SymbolStrong def-Symbol'>}</span>
 537:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 538:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'Z'</span><span class='c-Label def-Label'>:</span><span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 539:           state<span class='c-Symbol def-Symbol'>=</span>ALT_PRESSED<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 540:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_BACK</span><span class='c-Label def-Label'>:</span><span class='def-SymbolStrong def-Symbol'>{</span>
 541:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>ALT_PRESSED <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> undo<span class='c-Symbol def-Symbol'>.</span>size<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>></span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span>
 542:           <span class='def-SymbolStrong def-Symbol'>{</span>
 543:             undo<span class='c-Symbol def-Symbol'>.</span>pop_back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 544:             s<span class='c-Symbol def-Symbol'>=</span>undo<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>str<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 545:             leftpos<span class='c-Symbol def-Symbol'>=</span>undo<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 546:             curpos<span class='c-Symbol def-Symbol'>=</span>undo<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 547:             selstart<span class='c-Symbol def-Symbol'>=</span>undo<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selstart<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 548:             selend<span class='c-Symbol def-Symbol'>=</span>undo<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>selend<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 549:             skipundo<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 550:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 551:           <span class='def-SymbolStrong def-Symbol'>}</span>
 552:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span>
 553:           <span class='def-SymbolStrong def-Symbol'>{</span>
 554:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> p<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 555:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>p<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 556:             s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>p<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 557:             curpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 558:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span>
 559:             <span class='def-SymbolStrong def-Symbol'>{</span>
 560:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 561:               <span class='def-SymbolStrong def-Symbol'>{</span>
 562:                 leftpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 563:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 564:               <span class='def-SymbolStrong def-Symbol'>}</span>
 565:               <span class='c-KeywordANSI def-Keyword'>else</span>
 566:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 567:             <span class='def-SymbolStrong def-Symbol'>}</span>
 568:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 569:           <span class='def-SymbolStrong def-Symbol'>{</span>
 570:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> wl<span class='c-Symbol def-Symbol'>=</span>word_left<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 571:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>wl<span class='c-Symbol def-Symbol'>)</span>
 572:             <span class='def-SymbolStrong def-Symbol'>{</span>
 573:               s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>wl<span class='c-Symbol def-Symbol'>,</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>-</span>wl<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 574:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wl<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 575:               <span class='def-SymbolStrong def-Symbol'>{</span>
 576:                 leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 577:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 578:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 579:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wl<span class='c-Symbol def-Symbol'>&lt;</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 580:               <span class='def-SymbolStrong def-Symbol'>{</span>
 581:                 leftpos<span class='c-Symbol def-Symbol'>=</span>wl<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 582:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 583:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 584:               <span class='def-SymbolStrong def-Symbol'>{</span>
 585:                 curpos<span class='c-Symbol def-Symbol'>=</span>wl<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 586:               <span class='def-SymbolStrong def-Symbol'>}</span>
 587:             <span class='def-SymbolStrong def-Symbol'>}</span>
 588:           <span class='def-SymbolStrong def-Symbol'>}</span>
 589:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 590:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_INSERT</span><span class='c-Label def-Label'>:</span><span class='def-SymbolStrong def-Symbol'>{</span>
 591:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> shift<span class='c-Symbol def-Symbol'>)</span>
 592:             <span class='def-SymbolStrong def-Symbol'>{</span>
 593:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 594:               <span class='def-SymbolStrong def-Symbol'>{</span>
 595:                 s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 596:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selend<span class='c-Symbol def-Symbol'>)</span>
 597:                 <span class='def-SymbolStrong def-Symbol'>{</span>
 598:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 599:                   <span class='def-SymbolStrong def-Symbol'>{</span>
 600:                     leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 601:                     curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 602:                   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 603:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>&lt;</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 604:                   <span class='def-SymbolStrong def-Symbol'>{</span>
 605:                     leftpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 606:                     curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 607:                   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 608:                   <span class='def-SymbolStrong def-Symbol'>{</span>
 609:                     curpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 610:                   <span class='def-SymbolStrong def-Symbol'>}</span>
 611:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 612:                 selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 613:               <span class='def-SymbolStrong def-Symbol'>}</span>
 614: 
 615: 
 616:               <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>text<span class='c-Symbol def-Symbol'>=</span>PasteText<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 617:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>)</span>
 618:               <span class='def-SymbolStrong def-Symbol'>{</span>
 619:                 s<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>,</span>text<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 620:                 curpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strlen</span><span class='c-Symbol def-Symbol'>(</span>text<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 621:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 622:                 <span class='def-SymbolStrong def-Symbol'>{</span>
 623:                   leftpos<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>-</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 624:                   curpos<span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 625:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 626:                 <span class='c-KeywordANSI def-Keyword'>delete</span> text<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 627:               <span class='def-SymbolStrong def-Symbol'>}</span>
 628:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 629:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 630:             <span class='def-SymbolStrong def-Symbol'>{</span>
 631:               <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> c<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 632:               c<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>+</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 633:               CopyText<span class='c-Symbol def-Symbol'>(</span>c<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>c<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 634:             <span class='def-SymbolStrong def-Symbol'>}</span>
 635:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 636:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_DELETE</span><span class='c-Label def-Label'>:</span><span class='def-SymbolStrong def-Symbol'>{</span>
 637:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 638:           <span class='def-SymbolStrong def-Symbol'>{</span>
 639:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> shift<span class='c-Symbol def-Symbol'>)</span>
 640:             <span class='def-SymbolStrong def-Symbol'>{</span>
 641:               <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> c<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 642:               c<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>+</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 643:               CopyText<span class='c-Symbol def-Symbol'>(</span>c<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>c<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 644:             <span class='def-SymbolStrong def-Symbol'>}</span>
 645:             s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 646:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selend<span class='c-Symbol def-Symbol'>)</span>
 647:             <span class='def-SymbolStrong def-Symbol'>{</span>
 648:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 649:               <span class='def-SymbolStrong def-Symbol'>{</span>
 650:                 leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 651:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 652:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 653:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>&lt;</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 654:               <span class='def-SymbolStrong def-Symbol'>{</span>
 655:                 leftpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 656:                 curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 657:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 658:               <span class='def-SymbolStrong def-Symbol'>{</span>
 659:                 curpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 660:               <span class='def-SymbolStrong def-Symbol'>}</span>
 661:             <span class='def-SymbolStrong def-Symbol'>}</span>
 662:             pos<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 663:             selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 664:           <span class='def-SymbolStrong def-Symbol'>}</span>
 665:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span>
 666:           <span class='def-SymbolStrong def-Symbol'>{</span>
 667:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> p<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 668:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>p<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>s<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 669:             s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>p<span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 670:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 671:           <span class='def-SymbolStrong def-Symbol'>{</span>
 672:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 673:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> wr<span class='c-Symbol def-Symbol'>=</span>word_right<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>n<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 674:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>wr<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>n<span class='c-Symbol def-Symbol'>)</span>
 675:             <span class='def-SymbolStrong def-Symbol'>{</span>
 676:               s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>n<span class='c-Symbol def-Symbol'>,</span>wr<span class='c-Symbol def-Symbol'>-</span>n<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 677:             <span class='def-SymbolStrong def-Symbol'>}</span>
 678:           <span class='def-SymbolStrong def-Symbol'>}</span>
 679:           <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 680:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_ESCAPE</span><span class='c-Label def-Label'>:</span>
 681:           retval<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 682:           quit<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 683:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 684:         <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_RETURN</span><span class='c-Label def-Label'>:</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 685:           retval<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 686:           quit<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 687:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 688: <span class='c-Label def-Label'>        </span><span class='c-KeywordANSI def-Keyword'>default</span><span class='c-Label def-Label'>:</span>
 689:           redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 690:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 691:       <span class='def-SymbolStrong def-Symbol'>}</span>
 692:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>uChar<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>32</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-Symbol def-Symbol'>)</span>
 693:       <span class='def-SymbolStrong def-Symbol'>{</span>
 694:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 695:         <span class='def-SymbolStrong def-Symbol'>{</span>
 696:           s<span class='c-Symbol def-Symbol'>.</span>erase<span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>-</span>selstart<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 697:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>pos<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selend<span class='c-Symbol def-Symbol'>)</span>
 698:           <span class='def-SymbolStrong def-Symbol'>{</span>
 699:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 700:             <span class='def-SymbolStrong def-Symbol'>{</span>
 701:               leftpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 702:               curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 703:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 704:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>&lt;</span>leftpos<span class='c-Symbol def-Symbol'>)</span>
 705:             <span class='def-SymbolStrong def-Symbol'>{</span>
 706:               leftpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 707:               curpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 708:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 709:             <span class='def-SymbolStrong def-Symbol'>{</span>
 710:               curpos<span class='c-Symbol def-Symbol'>=</span>selstart<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 711:             <span class='def-SymbolStrong def-Symbol'>}</span>
 712:           <span class='def-SymbolStrong def-Symbol'>}</span>
 713:           selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 714:         <span class='def-SymbolStrong def-Symbol'>}</span>
 715: 
 716:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> str<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='def-SymbolStrong def-Symbol'>{</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>uChar<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 717:         s<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-Symbol def-Symbol'>,</span>str<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 718:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>curpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 719:         <span class='def-SymbolStrong def-Symbol'>{</span>
 720:           curpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 721:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 722:         <span class='def-SymbolStrong def-Symbol'>{</span>
 723:           leftpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 724:         <span class='def-SymbolStrong def-Symbol'>}</span>
 725:         redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 726:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 727:       <span class='def-SymbolStrong def-Symbol'>{</span>
 728:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> newpos<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>curpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 729:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>newpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>pos <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>(</span>state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> state<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>CTRL_PRESSED<span class='c-Symbol def-Symbol'>)</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> shift<span class='c-Symbol def-Symbol'>)</span>
 730:         <span class='def-SymbolStrong def-Symbol'>{</span>
 731:           extend_selection<span class='c-Symbol def-Symbol'>(</span>selstart<span class='c-Symbol def-Symbol'>,</span>selend<span class='c-Symbol def-Symbol'>,</span>pos<span class='c-Symbol def-Symbol'>,</span>newpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 732:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 733:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>newpos<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>pos<span class='c-Symbol def-Symbol'>)</span>
 734:         <span class='def-SymbolStrong def-Symbol'>{</span>
 735:           selstart<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 736:         <span class='def-SymbolStrong def-Symbol'>}</span>
 737:       <span class='def-SymbolStrong def-Symbol'>}</span>
 738:     <span class='def-SymbolStrong def-Symbol'>}</span>
 739:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 740:   scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>hidecursor<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 741:   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>retval<span class='c-Symbol def-Symbol'>)</span>
 742:   <span class='def-SymbolStrong def-Symbol'>{</span>
 743:     findstring<span class='c-Symbol def-Symbol'>=</span>s<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 744:   <span class='def-SymbolStrong def-Symbol'>}</span>
 745:   <span class='c-KeywordANSI def-Keyword'>return</span> retval<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 746: <span class='def-SymbolStrong def-Symbol'>}</span>
 747: 
 748: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// viewing file with coloring</span>
 749: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// note that it has different variants for different systems</span>
 750: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> view<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
 751: <span class='def-SymbolStrong def-Symbol'>{</span>
 752: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> topline<span class='c-Symbol def-Symbol'>,</span> leftpos<span class='c-Symbol def-Symbol'>,</span> i<span class='c-Symbol def-Symbol'>,</span> clr<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 753:   cd <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CColorData<span class='c-Symbol def-Symbol'>(</span>basefname<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 754:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>IsOk<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 755:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot load colorer base from </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> basefname<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 756:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 757:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 758:   adata <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CAssign<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 759:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>load<span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 760:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot load region rules from </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> frules<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 761:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 762:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 763: 
 764:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>*</span>typedescr<span class='c-Symbol def-Symbol'>)</span> type <span class='c-Symbol def-Symbol'>=</span> seltype<span class='c-Symbol def-Symbol'>(</span>cd<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 765:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>*</span>typedescr <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> <span class='c-Symbol def-Symbol'>!</span>type<span class='c-Symbol def-Symbol'>)</span> type <span class='c-Symbol def-Symbol'>=</span> cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SelType<span class='c-Symbol def-Symbol'>(</span>fname<span class='c-Symbol def-Symbol'>,</span> GetLine<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 766:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>type<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 767:   ad <span class='c-Symbol def-Symbol'>=</span> adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>getcdata<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 768:   bkcolor <span class='c-Symbol def-Symbol'>=</span> ad<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fore <span class='c-Symbol def-Symbol'>+</span> <span class='c-Symbol def-Symbol'>(</span>ad<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>back<span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>4</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 769: 
 770:   hlines <span class='c-Symbol def-Symbol'>=</span> clrCreateRegions<span class='c-Symbol def-Symbol'>(</span>totallines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 771:   cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>LoadType<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 772:   cc <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CColorer<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 773:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SetServices<span class='c-Symbol def-Symbol'>(</span>GetLine<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> clrAddRegion<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> hlines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 774:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SetColoringSrc<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 775:   clrSetFirstLine<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 776:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>QuickParse<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> totallines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 777: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  cc->FullParse(0, 0 ,totallines, totallines);</span>
 778: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  return;</span>
 779: 
 780:   clrAssignRegions<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>,</span> adata<span class='c-Symbol def-Symbol'>,</span> ad<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 781:   leftpos <span class='c-Symbol def-Symbol'>=</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 782: 
 783: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// WIN32 - draws through consoles</span>
 784: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> _WIN32</span>
 785: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>CONSOLE_SCREEN_BUFFER_INFO</span> csbi<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 786: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>HANDLE</span> hCon<span class='c-Symbol def-Symbol'>,</span> hConI<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 787: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>INPUT_RECORD</span> ir<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 788: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>COORD</span> coor<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 789: <span class='c-KeywordStructure def-StructKeyword def-Keyword'>DWORD</span> tmp<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 790: 
 791:   hCon <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetStdHandle</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>STD_OUTPUT_HANDLE</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 792:   hConI<span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetStdHandle</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>STD_INPUT_HANDLE</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 793:   <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetConsoleScreenBufferInfo</span><span class='c-Symbol def-Symbol'>(</span>hCon<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>csbi<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 794: 
 795: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifndef</span><span class='c-Preproc def-DirectiveContent def-Directive'> __DPMI32__</span>
 796:   hCon <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>CreateConsoleScreenBuffer</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>GENERIC_WRITE</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> CONSOLE_TEXTMODE_BUFFER<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 797:   <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleActiveScreenBuffer</span><span class='c-Symbol def-Symbol'>(</span>hCon<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 798: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
 799:   <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleMode</span><span class='c-Symbol def-Symbol'>(</span>hConI<span class='c-Symbol def-Symbol'>,</span>ENABLE_WINDOW_INPUT<span class='c-Symbol def-Symbol'>|</span>ENABLE_MOUSE_INPUT<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 800:   <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> findstring<span class='c-Symbol def-Symbol'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>/</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 801:   scrbuf<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>new</span> ScreenBuffer<span class='c-Symbol def-Symbol'>(</span>hCon<span class='c-Symbol def-Symbol'>,</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>X<span class='c-Symbol def-Symbol'>,</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 802: 
 803:   scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>hidecursor<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 804: 
 805:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> quit<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 806: 
 807:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> selstartline<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 808:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> selstartpos<span class='c-Symbol def-Symbol'>,</span>selendline<span class='c-Symbol def-Symbol'>,</span>selendpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 809: 
 810:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> fndline<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>fndpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 811: 
 812:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> mselecting<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 813: 
 814:   <span class='c-KeywordANSI def-Keyword'>do</span><span class='def-SymbolStrong def-Symbol'>{</span>
 815:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 816:     <span class='def-SymbolStrong def-Symbol'>{</span>
 817:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>i<span class='c-Symbol def-Symbol'>,</span>bkcolor<span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 818:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillchar<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>i<span class='c-Symbol def-Symbol'>,</span><span class='def-NumberHex def-Number'>0x20</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 819:     <span class='def-SymbolStrong def-Symbol'>}</span>
 820:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> topline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> topline <span class='c-Symbol def-Symbol'>+</span> csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>,</span> coor<span class='c-Symbol def-Symbol'>.</span>Y <span class='c-Symbol def-Symbol'>=</span> i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 821:       coor<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 822:       coor<span class='c-Symbol def-Symbol'>.</span>Y <span class='c-Symbol def-Symbol'>=</span> i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// my gcc has </span><span class='def-TODO def-Error'>bug here :(</span>
 823: 
 824:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span> totallines<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 825:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len <span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span> leftpos<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 826: 
 827:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>l1 <span class='c-Symbol def-Symbol'>=</span> hlines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>next<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1 <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>next<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 828:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>type <span class='c-Symbol def-Symbol'>></span> <span class='def-NumberHex def-Number'>0xFF</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 829:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 830:         coor<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start <span class='c-Symbol def-Symbol'>-</span> leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 831:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>-</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 832:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>coor<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 833:           len <span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span> coor<span class='c-Symbol def-Symbol'>.</span>X<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 834:           coor<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 835:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 836:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>len <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 837:         clr <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>fore <span class='c-Symbol def-Symbol'>+</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>4</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 838: 
 839:         scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span>coor<span class='c-Symbol def-Symbol'>.</span>X<span class='c-Symbol def-Symbol'>,</span>coor<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>,</span>clr<span class='c-Symbol def-Symbol'>,</span>len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 840:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 841:       coor<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 842:       <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>X <span class='c-Symbol def-Symbol'>&lt;</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>-</span>leftpos <span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span> csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>X <span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 843:       scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span><span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>coor<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>leftpos<span class='c-Symbol def-Symbol'>,</span>n<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 844:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 845:     <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstartline<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 846:     <span class='def-SymbolStrong def-Symbol'>{</span>
 847:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 848:       <span class='def-SymbolStrong def-Symbol'>{</span>
 849:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>&lt;</span>topline <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> i<span class='c-Symbol def-Symbol'>></span>topline<span class='c-Symbol def-Symbol'>+</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 850:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> s<span class='c-Symbol def-Symbol'>,</span>e<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 851:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selstartline <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-Symbol def-Symbol'>)</span>
 852:         <span class='def-SymbolStrong def-Symbol'>{</span>
 853:           s<span class='c-Symbol def-Symbol'>=</span>selstartpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 854:           e<span class='c-Symbol def-Symbol'>=</span>selendpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 855:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 856:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-Symbol def-Symbol'>)</span>
 857:         <span class='def-SymbolStrong def-Symbol'>{</span>
 858:           s<span class='c-Symbol def-Symbol'>=</span>selstartpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 859:           e<span class='c-Symbol def-Symbol'>=</span>s<span class='c-Symbol def-Symbol'>+</span>leftpos<span class='c-Symbol def-Symbol'>+</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 860:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 861:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-Symbol def-Symbol'>)</span>
 862:         <span class='def-SymbolStrong def-Symbol'>{</span>
 863:           s<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 864:           e<span class='c-Symbol def-Symbol'>=</span>selendpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 865:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 866:         <span class='def-SymbolStrong def-Symbol'>{</span>
 867:           s<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 868:           e<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 869:         <span class='def-SymbolStrong def-Symbol'>}</span>
 870:         scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-Symbol def-Symbol'>,</span>i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>,</span><span class='def-NumberHex def-Number'>0x30</span><span class='c-Symbol def-Symbol'>,</span>e<span class='c-Symbol def-Symbol'>-</span>s<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 871:       <span class='def-SymbolStrong def-Symbol'>}</span>
 872:     <span class='def-SymbolStrong def-Symbol'>}</span>
 873:     <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// flush buffer</span>
 874:     scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>flush<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 875: 
 876:     <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// managing the keyboard</span>
 877:     <span class='c-KeywordANSI def-Keyword'>do</span><span class='def-SymbolStrong def-Symbol'>{</span>
 878:       <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>ReadConsoleInput</span><span class='c-Symbol def-Symbol'>(</span>hConI<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>ir<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>tmp<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 879: 
 880:       <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>EventType <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> MOUSE_EVENT<span class='c-Symbol def-Symbol'>)</span>
 881:       <span class='def-SymbolStrong def-Symbol'>{</span>
 882:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwEventFlags <span class='c-Symbol def-Symbol'>&amp;</span> MOUSE_WHEELED<span class='c-Symbol def-Symbol'>)</span>
 883:         <span class='def-SymbolStrong def-Symbol'>{</span>
 884:           ir<span class='c-Symbol def-Symbol'>.</span>EventType<span class='c-Symbol def-Symbol'>=</span>KEY_EVENT<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 885:           ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>bKeyDown<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 886:           ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>wVirtualKeyCode<span class='c-Symbol def-Symbol'>=</span>
 887:             ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwButtonState<span class='c-Symbol def-Symbol'>&amp;</span><span class='def-NumberHex def-Number'>0xff000000</span><span class='def-NumberSuffix def-Number'>L</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span>VK_DOWN<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span>VK_UP<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 888:         <span class='def-SymbolStrong def-Symbol'>}</span>
 889:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwButtonState<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>FROM_LEFT_1ST_BUTTON_PRESSED <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>!</span>mselecting<span class='c-Symbol def-Symbol'>)</span>
 890:         <span class='def-SymbolStrong def-Symbol'>{</span>
 891:           mselecting<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 892:           <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>=</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwMousePosition<span class='c-Symbol def-Symbol'>.</span>X<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 893:           <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>=</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwMousePosition<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 894:           selstartline<span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-Symbol def-Symbol'>=</span>topline<span class='c-Symbol def-Symbol'>+</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 895:           selstartpos<span class='c-Symbol def-Symbol'>=</span>selendpos<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 896:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 897:         <span class='def-SymbolStrong def-Symbol'>}</span>
 898:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwButtonState<span class='c-Symbol def-Symbol'>&amp;</span>FROM_LEFT_1ST_BUTTON_PRESSED<span class='c-Symbol def-Symbol'>)</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> mselecting<span class='c-Symbol def-Symbol'>)</span>
 899:         <span class='def-SymbolStrong def-Symbol'>{</span>
 900:           mselecting<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 901:         <span class='def-SymbolStrong def-Symbol'>}</span>
 902:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwEventFlags <span class='c-Symbol def-Symbol'>&amp;</span> MOUSE_MOVED<span class='c-Symbol def-Symbol'>)</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>(</span>mselecting<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 903:         <span class='def-SymbolStrong def-Symbol'>{</span>
 904:           <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> x<span class='c-Symbol def-Symbol'>=</span>leftpos<span class='c-Symbol def-Symbol'>+</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwMousePosition<span class='c-Symbol def-Symbol'>.</span>X<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 905:           <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> y<span class='c-Symbol def-Symbol'>=</span>topline<span class='c-Symbol def-Symbol'>+</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>MouseEvent<span class='c-Symbol def-Symbol'>.</span>dwMousePosition<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 906:           selendline<span class='c-Symbol def-Symbol'>=</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 907:           selendpos<span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 908:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selendline<span class='c-Symbol def-Symbol'>&lt;</span>selstartline <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> <span class='c-Symbol def-Symbol'>(</span>selendline<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selstartline <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> selendpos<span class='c-Symbol def-Symbol'>&lt;</span>selstartpos<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
 909:           <span class='def-SymbolStrong def-Symbol'>{</span>
 910:             y<span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 911:             x<span class='c-Symbol def-Symbol'>=</span>selstartpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 912:             selstartline<span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 913:             selstartpos<span class='c-Symbol def-Symbol'>=</span>selendpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 914:             selendline<span class='c-Symbol def-Symbol'>=</span>y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 915:             selendpos<span class='c-Symbol def-Symbol'>=</span>x<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 916:           <span class='def-SymbolStrong def-Symbol'>}</span>
 917:           <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 918:         <span class='def-SymbolStrong def-Symbol'>}</span>
 919:       <span class='def-SymbolStrong def-Symbol'>}</span>
 920:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>EventType <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> KEY_EVENT <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>bKeyDown<span class='c-Symbol def-Symbol'>)</span>
 921:       <span class='def-SymbolStrong def-Symbol'>{</span>
 922:         <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// moving view position</span>
 923:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 924:         <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> oldtol<span class='c-Symbol def-Symbol'>=</span>topline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 925:         <span class='c-KeywordANSI def-Keyword'>switch</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>wVirtualKeyCode<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
 926:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_UP</span><span class='c-Label def-Label'>:</span>
 927:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline<span class='c-Symbol def-Symbol'>)</span> topline<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 928:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 929:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_DOWN</span><span class='c-Label def-Label'>:</span>
 930:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline<span class='c-Symbol def-Symbol'>+</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y <span class='c-Symbol def-Symbol'>&lt;</span> totallines<span class='c-Symbol def-Symbol'>)</span> topline<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 931:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 932:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_LEFT</span><span class='c-Label def-Label'>:</span>
 933:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>)</span> leftpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 934:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 935:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_RIGHT</span><span class='c-Label def-Label'>:</span>
 936:             leftpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 937:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 938:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_PRIOR</span><span class='c-Label def-Label'>:</span>
 939:             topline<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>=</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 940:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 941:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 942:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_NEXT</span><span class='c-Label def-Label'>:</span>
 943:             topline <span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span> csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 944:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>></span> totallines<span class='c-Symbol def-Symbol'>-</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> totallines<span class='c-Symbol def-Symbol'>-</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 945:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 946:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 947:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_HOME</span><span class='c-Label def-Label'>:</span>
 948:             leftpos <span class='c-Symbol def-Symbol'>=</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 949:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 950:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_END</span><span class='c-Label def-Label'>:</span>
 951:             topline <span class='c-Symbol def-Symbol'>=</span> totallines<span class='c-Symbol def-Symbol'>-</span>csbi<span class='c-Symbol def-Symbol'>.</span>dwSize<span class='c-Symbol def-Symbol'>.</span>Y<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 952:             <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 953:             leftpos <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 954:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 955:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_ESCAPE</span><span class='c-Label def-Label'>:</span>
 956:             quit<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 957:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 958:           <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>VK_INSERT</span><span class='c-Label def-Label'>:</span>
 959:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstartline<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span>
 960:             <span class='def-SymbolStrong def-Symbol'>{</span>
 961:               <span class='cpp-KeywordNamespace def-Prefix'>std</span><span class='c-PrefixSymbol def-SymbolStrong def-Symbol'>::</span><span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>string</span> s<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 962:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstartline<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-Symbol def-Symbol'>)</span>
 963:               <span class='def-SymbolStrong def-Symbol'>{</span>
 964:                 s<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>selstartline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>selstartpos<span class='c-Symbol def-Symbol'>,</span>selendpos<span class='c-Symbol def-Symbol'>-</span>selstartpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 965:               <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 966:               <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
 967:               <span class='def-SymbolStrong def-Symbol'>{</span>
 968:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-Symbol def-Symbol'>)</span>
 969:                 <span class='def-SymbolStrong def-Symbol'>{</span>
 970:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstartpos<span class='c-Symbol def-Symbol'>&lt;</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span>
 971:                   <span class='def-SymbolStrong def-Symbol'>{</span>
 972:                     s<span class='c-Symbol def-Symbol'>.</span>insert<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>-</span>selstartpos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 973:                     s<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\r</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 974:                   <span class='def-SymbolStrong def-Symbol'>}</span>
 975:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 976:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span>selendline<span class='c-Symbol def-Symbol'>)</span>
 977:                 <span class='def-SymbolStrong def-Symbol'>{</span>
 978:                   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> n<span class='c-Symbol def-Symbol'>=</span>selendpos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 979:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>&lt;</span>n<span class='c-Symbol def-Symbol'>)</span>n<span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 980:                   s<span class='c-Symbol def-Symbol'>.</span>append<span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>,</span>n<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 981:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selendpos<span class='c-Symbol def-Symbol'>></span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span>s<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\r</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 982:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
 983:                 <span class='def-SymbolStrong def-Symbol'>{</span>
 984:                   s<span class='c-Symbol def-Symbol'>.</span>append<span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 985:                   s<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\r</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 986:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 987:               <span class='def-SymbolStrong def-Symbol'>}</span>
 988:               CopyText<span class='c-Symbol def-Symbol'>(</span>s<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span>s<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 989:             <span class='def-SymbolStrong def-Symbol'>}</span>
 990: <span class='c-Label def-Label'>          </span><span class='c-KeywordANSI def-Keyword'>default</span><span class='c-Label def-Label'>:</span>
 991:             redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 992:             <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 993:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 994:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>oldtol<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span>topline<span class='c-Symbol def-Symbol'>)</span>
 995:         <span class='def-SymbolStrong def-Symbol'>{</span>
 996:           fndline<span class='c-Symbol def-Symbol'>=</span>topline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 997:           fndpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 998:         <span class='def-SymbolStrong def-Symbol'>}</span>
 999:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>uChar<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'/'</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>uChar<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'n'</span><span class='c-Symbol def-Symbol'>)</span>
1000:         <span class='def-SymbolStrong def-Symbol'>{</span>
1001:           <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>ir<span class='c-Symbol def-Symbol'>.</span>Event<span class='c-Symbol def-Symbol'>.</span>KeyEvent<span class='c-Symbol def-Symbol'>.</span>uChar<span class='c-Symbol def-Symbol'>.</span>AsciiChar<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'n'</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> search_input<span class='c-Symbol def-Symbol'>(</span>hConI<span class='c-Symbol def-Symbol'>,</span>findstring<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
1002:           <span class='def-SymbolStrong def-Symbol'>{</span>
1003:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1004:             <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>findstring<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
1005:             <span class='def-SymbolStrong def-Symbol'>{</span>
1006:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>findstring<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'/'</span><span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1007:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>findstring<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'\\'</span><span class='c-Symbol def-Symbol'>)</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1008:             <span class='def-SymbolStrong def-Symbol'>}</span>
1009:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> global<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1010:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>findstring<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>findstring<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>/</span><span class='def-StringEdge def-String'>"</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1011:             <span class='c-KeywordANSI def-Keyword'>else</span>
1012:             <span class='def-SymbolStrong def-Symbol'>{</span>
1013:               <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>j<span class='c-Symbol def-Symbol'>&lt;</span>findstring<span class='c-Symbol def-Symbol'>.</span>length<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>j<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
1014:               <span class='def-SymbolStrong def-Symbol'>{</span>
1015:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>findstring<span class='c-Symbol def-Symbol'>[</span>j<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'g'</span><span class='c-Symbol def-Symbol'>)</span>
1016:                 <span class='def-SymbolStrong def-Symbol'>{</span>
1017:                   global<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1018:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1019:               <span class='def-SymbolStrong def-Symbol'>}</span>
1020:             <span class='def-SymbolStrong def-Symbol'>}</span>
1021:             CRegExp re<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1022:             re<span class='c-Symbol def-Symbol'>.</span>SetExpr<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>const_cast</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>&lt;</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>></span><span class='c-Symbol def-Symbol'>(</span>findstring<span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1023:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>re<span class='c-Symbol def-Symbol'>.</span>IsOk<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
1024:             <span class='def-SymbolStrong def-Symbol'>{</span>
1025:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberHex def-Number'>0xce</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1026:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillchar<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1027:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span><span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>Invalid rexexp:</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>+</span>findstring<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>.</span>c_str<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1028:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>flush<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1029:               redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1030:               <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1031:             <span class='def-SymbolStrong def-Symbol'>}</span>
1032:             SMatches m<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1033:             <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> found<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1034:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>global<span class='c-Symbol def-Symbol'>)</span>
1035:             <span class='def-SymbolStrong def-Symbol'>{</span>
1036:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>re<span class='c-Symbol def-Symbol'>.</span>Parse<span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>fndpos<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>,</span>
1037:                           lines<span class='c-Symbol def-Symbol'>[</span>totallines<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>lines<span class='c-Symbol def-Symbol'>[</span>totallines<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>&amp;</span>m<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
1038:               <span class='def-SymbolStrong def-Symbol'>{</span>
1039:                 <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span>fndline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>totallines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
1040:                 <span class='def-SymbolStrong def-Symbol'>{</span>
1041:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span>
1042:                      lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span>
1043:                   <span class='def-SymbolStrong def-Symbol'>{</span>
1044:                     selstartline<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1045:                     selstartpos<span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>-</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1046:                   <span class='def-SymbolStrong def-Symbol'>}</span>
1047:                   <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>e<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span>
1048:                      lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>e<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span>
1049:                   <span class='def-SymbolStrong def-Symbol'>{</span>
1050:                     selendline<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1051:                     selendpos<span class='c-Symbol def-Symbol'>=</span>lines<span class='c-Symbol def-Symbol'>[</span>fndline<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>m<span class='c-Symbol def-Symbol'>.</span>e<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>-</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1052:                     <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1053:                   <span class='def-SymbolStrong def-Symbol'>}</span>
1054:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1055:                 fndline<span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1056:                 fndpos<span class='c-Symbol def-Symbol'>=</span>selstartpos<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1057:                 found<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1058:               <span class='def-SymbolStrong def-Symbol'>}</span>
1059:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
1060:             <span class='def-SymbolStrong def-Symbol'>{</span>
1061:               <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>=</span>fndline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>&lt;</span>totallines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span>
1062:               <span class='def-SymbolStrong def-Symbol'>{</span>
1063:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>re<span class='c-Symbol def-Symbol'>.</span>Parse<span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>fndpos<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>,</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>+</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>,</span><span class='c-Symbol def-Symbol'>&amp;</span>m<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span>
1064:                 <span class='def-SymbolStrong def-Symbol'>{</span>
1065:                   selstartline<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1066:                   fndline<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1067:                   fndpos<span class='c-Symbol def-Symbol'>=</span>m<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1068:                   selstartpos<span class='c-Symbol def-Symbol'>=</span>m<span class='c-Symbol def-Symbol'>.</span>s<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1069:                   selendline<span class='c-Symbol def-Symbol'>=</span>i<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1070:                   selendpos<span class='c-Symbol def-Symbol'>=</span>m<span class='c-Symbol def-Symbol'>.</span>e<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1071:                   found<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1072:                   <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1073:                 <span class='def-SymbolStrong def-Symbol'>}</span>
1074:                 fndpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1075:               <span class='def-SymbolStrong def-Symbol'>}</span>
1076:             <span class='def-SymbolStrong def-Symbol'>}</span>
1077:             <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>found<span class='c-Symbol def-Symbol'>)</span>
1078:             <span class='def-SymbolStrong def-Symbol'>{</span>
1079:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillattr<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberHex def-Number'>0xce</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1080:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>fillchar<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='c-Character def-Character def-String'>' '</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>W<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1081:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span><span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>write</span><span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span><span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>Not found</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1082:               scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>flush<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1083:               redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1084:               fndline<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1085:               fndpos<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1086:               <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1087:             <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>else</span>
1088:             <span class='def-SymbolStrong def-Symbol'>{</span>
1089:               <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>selstartline<span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span>topline<span class='c-Symbol def-Symbol'>+</span>scrbuf<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>H<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> selstartline<span class='c-Symbol def-Symbol'>&lt;</span>topline<span class='c-Symbol def-Symbol'>)</span>
1090:               <span class='def-SymbolStrong def-Symbol'>{</span>
1091:                 topline<span class='c-Symbol def-Symbol'>=</span>selstartline<span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>4</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1092:                 <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>topline<span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span>topline<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1093:               <span class='def-SymbolStrong def-Symbol'>}</span>
1094:             <span class='def-SymbolStrong def-Symbol'>}</span>
1095:           <span class='def-SymbolStrong def-Symbol'>}</span>
1096:           redraw<span class='c-Symbol def-Symbol'>=</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1097:         <span class='def-SymbolStrong def-Symbol'>}</span>
1098:         <span class='c-KeywordANSI def-Keyword'>if</span><span class='c-Symbol def-Symbol'>(</span>redraw<span class='c-Symbol def-Symbol'>)</span><span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1099:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1100:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI def-Keyword'>true</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1101:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>quit<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1102: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifndef</span><span class='c-Preproc def-DirectiveContent def-Directive'> __DPMI32__</span>
1103:   <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>SetConsoleActiveScreenBuffer</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetStdHandle</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordConstant def-Constant def-Keyword'>STD_OUTPUT_HANDLE</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1104: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
1105:   <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>CloseHandle</span><span class='c-Symbol def-Symbol'>(</span>hCon<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1106:   <span class='c-KeywordANSI def-Keyword'>delete</span> scrbuf<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1107: 
1108: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// ms dos uses video buffer</span>
1109: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>elif</span><span class='c-Preproc def-DirectiveContent def-Directive'> </span><span class='c-PreprocWord def-Directive'>defined</span><span class='c-Preproc def-DirectiveContent def-Directive'> __MSDOS__</span>
1110: 
1111: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> j<span class='c-Symbol def-Symbol'>,</span> ch<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1112: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>vm <span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span><span class='c-Symbol def-Symbol'>)</span><span class='def-NumberHex def-Number'>0xb8000000</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1113: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> _DPMI_</span>
1114: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>unsigned</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> vmsel<span class='c-Symbol def-Symbol'>=</span><span class='def-NumberHex def-Number'>0xb800</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1115: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
1116: 
1117: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// DataCompBoy: get selector for videobuffer</span>
1118: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> _DPMI_</span>
1119:   <span class='c-AsmCode def-Directive'>asm</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>{</span>
1120:     <span class='asm-asmiBase asm-asmMnemonics def-Keyword'>mov</span> <span class='asm-asmRegister def-Register'>ax</span><span class='asm-asmSymbol def-Symbol'>,</span> <span class='asm-asmNumHex def-NumberHex def-Number'>0002h</span>
1121:     <span class='asm-asmiBase asm-asmMnemonics def-Keyword'>mov</span> <span class='asm-asmRegister def-Register'>bx</span><span class='asm-asmSymbol def-Symbol'>,</span> vmsel
1122:     <span class='asm-asmiBase asm-asmMnemonics def-Keyword'>int</span> <span class='asm-asmNumHex def-NumberHex def-Number'>31h</span>
1123:     <span class='asm-asmiBase asm-asmMnemonics def-Keyword'>mov</span> vmsel<span class='asm-asmSymbol def-Symbol'>,</span> <span class='asm-asmRegister def-Register'>ax</span>
1124:   <span class='c-StructureSymbol def-SymbolStrong def-Symbol'>}</span>
1125:   vm<span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>(</span>vmsel<span class='c-Symbol def-Symbol'>*</span><span class='def-NumberHex def-Number'>0x10000</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1126: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
1127: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// DataCompBoy: end</span>
1128: 
1129:   topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1130:   <span class='c-KeywordANSI def-Keyword'>do</span><span class='def-SymbolStrong def-Symbol'>{</span>
1131:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> topline<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> topline <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>25</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1132:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>></span><span class='c-Symbol def-Symbol'>=</span> totallines<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1133:       l1 <span class='c-Symbol def-Symbol'>=</span> hlines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>next<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1134:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>j <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>80</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>j<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1135:         vm<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>80</span> <span class='c-Symbol def-Symbol'>+</span> j<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberHex def-Number'>0x20</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1136:         vm<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>80</span> <span class='c-Symbol def-Symbol'>+</span> j<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>2</span> <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> bkcolor<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1137:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>-</span>leftpos <span class='c-Symbol def-Symbol'>></span> j<span class='c-Symbol def-Symbol'>)</span>
1138:           vm<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>80</span> <span class='c-Symbol def-Symbol'>+</span> j<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data<span class='c-Symbol def-Symbol'>[</span>j<span class='c-Symbol def-Symbol'>+</span>leftpos<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1139:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1140:       <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1 <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>next<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1141:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>-</span>leftpos <span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1142:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>type <span class='c-Symbol def-Symbol'>></span> <span class='def-NumberHex def-Number'>0xFF</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1143:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1144:         clr <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>fore <span class='c-Symbol def-Symbol'>+</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>back<span class='c-Symbol def-Symbol'>&lt;</span><span class='c-Symbol def-Symbol'>&lt;</span><span class='def-NumberDec def-Number'>4</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1145:         <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>j <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j <span class='c-Symbol def-Symbol'>&lt;</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> j<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1146:           <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>j<span class='c-Symbol def-Symbol'>-</span>leftpos <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1147:           vm<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>-</span>topline<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>80</span> <span class='c-Symbol def-Symbol'>+</span> j<span class='c-Symbol def-Symbol'>-</span>leftpos<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>*</span><span class='def-NumberDec def-Number'>2</span> <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> clr<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1148:         <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1149:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1150:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1151:     <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>ch <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> ch<span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='def-NumberDec def-Number'>27</span><span class='c-Symbol def-Symbol'>)</span>
1152:       ch <span class='c-Symbol def-Symbol'>=</span> getch<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1153:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>ch<span class='c-Symbol def-Symbol'>)</span> ch <span class='c-Symbol def-Symbol'>=</span> getch<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1154:     <span class='c-KeywordANSI def-Keyword'>switch</span><span class='c-Symbol def-Symbol'>(</span>ch<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1155:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'H'</span><span class='c-Label def-Label'>:</span>
1156:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline<span class='c-Symbol def-Symbol'>)</span> topline<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1157:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1158:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'P'</span><span class='c-Label def-Label'>:</span>
1159:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>25</span> <span class='c-Symbol def-Symbol'>&lt;</span> totallines<span class='c-Symbol def-Symbol'>)</span> topline<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1160:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1161:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'K'</span><span class='c-Label def-Label'>:</span>
1162:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>leftpos<span class='c-Symbol def-Symbol'>)</span> leftpos<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1163:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1164:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'M'</span><span class='c-Label def-Label'>:</span>
1165:         leftpos<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1166:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1167:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'I'</span><span class='c-Label def-Label'>:</span>
1168:         topline <span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>25</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1169:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1170:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1171:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'Q'</span><span class='c-Label def-Label'>:</span>
1172:         topline <span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>25</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1173:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>></span> totallines <span class='c-Symbol def-Symbol'>-</span> <span class='def-NumberDec def-Number'>25</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> totallines <span class='c-Symbol def-Symbol'>-</span> <span class='def-NumberDec def-Number'>25</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1174:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1175:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1176:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'G'</span><span class='c-Label def-Label'>:</span>
1177:         topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1178:         leftpos <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1179:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1180:       <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-Character def-Character def-String'>'O'</span><span class='c-Label def-Label'>:</span>
1181:         leftpos <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1182:         topline <span class='c-Symbol def-Symbol'>=</span> totallines <span class='c-Symbol def-Symbol'>-</span> <span class='def-NumberDec def-Number'>25</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1183:         <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>topline <span class='c-Symbol def-Symbol'>&lt;</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span> topline <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1184:         <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1185:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1186:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>ch <span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>27</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1187: 
1188: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  UNIX systems - hmm...</span>
1189: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>else</span>
1190: 
1191: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> ll<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1192: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>line<span class='c-Symbol def-Symbol'>,</span> t<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1024</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1193:   <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> totallines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1194:     line <span class='c-Symbol def-Symbol'>=</span> GetLine<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> i<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>ll<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1195:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strncpy</span><span class='c-Symbol def-Symbol'>(</span>t<span class='c-Symbol def-Symbol'>,</span> line<span class='c-Symbol def-Symbol'>,</span> ll<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1196:     t<span class='c-Symbol def-Symbol'>[</span>ll<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1197:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span>t<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1198:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1199: 
1200: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
1201: 
1202:   clrDestroyRegions<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1203:   <span class='c-KeywordANSI def-Keyword'>delete</span> adata<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1204:   <span class='c-KeywordANSI def-Keyword'>delete</span> cc<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1205:   <span class='c-KeywordANSI def-Keyword'>delete</span> cd<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1206: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1207: 
1208: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// prints to stdout formatted and colored text with selected rules (-i&lt;fname>)</span>
1209: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> htmlout<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
1210: <span class='def-SymbolStrong def-Symbol'>{</span>
1211: PAssignData ad<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1212: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> tmpline<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>512</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1213: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i<span class='c-Symbol def-Symbol'>,</span> pos<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1214: 
1215:   cd <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CColorData<span class='c-Symbol def-Symbol'>(</span>basefname<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordConstant def-Constant def-Keyword'>NULL</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1216:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>IsOk<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1217:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot load colorer base from </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> basefname<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1218:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1219:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1220:   adata <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CAssign<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1221:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>load<span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1222:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot load region rules from </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> frules<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1223:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1224:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1225:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>*</span>typedescr<span class='c-Symbol def-Symbol'>)</span> type <span class='c-Symbol def-Symbol'>=</span> seltype<span class='c-Symbol def-Symbol'>(</span>cd<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1226:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>*</span>typedescr <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> <span class='c-Symbol def-Symbol'>!</span>type<span class='c-Symbol def-Symbol'>)</span> type <span class='c-Symbol def-Symbol'>=</span> cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SelType<span class='c-Symbol def-Symbol'>(</span>fname<span class='c-Symbol def-Symbol'>,</span> GetLine<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1227:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>type<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1228: 
1229:   hlines <span class='c-Symbol def-Symbol'>=</span> clrCreateRegions<span class='c-Symbol def-Symbol'>(</span>totallines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1230:   cd<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>LoadType<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1231:   cc <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> CColorer<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1232:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SetServices<span class='c-Symbol def-Symbol'>(</span>GetLine<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> clrAddRegion<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> hlines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1233:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>SetColoringSrc<span class='c-Symbol def-Symbol'>(</span>type<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1234:   cc<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>QuickParse<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> totallines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1235: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//  cc->FullParse(0, 0 ,totallines, totallines);</span>
1236: 
1237:   <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// in this order only!</span>
1238:   clrAssignRegions<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>,</span> adata<span class='c-Symbol def-Symbol'>,</span> adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>getcdata<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1239:   clrCompactRegions<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1240: 
1241:   ad <span class='c-Symbol def-Symbol'>=</span> adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>getcdata<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1242:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>ad<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>stext<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1243:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>bad rules file</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1244:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1245:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1246:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>ad<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>stext<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1247:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>cpdis<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-String def-String'>created with colorer library version 4ever. type '</span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-String def-String'>'</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> type<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>descr<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1248:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1249:   <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> totallines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1250:     pos <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1251:     <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span>l1 <span class='c-Symbol def-Symbol'>=</span> hlines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>next<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> l1 <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>next<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1252:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>=</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1253:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>type <span class='c-Symbol def-Symbol'>></span> <span class='def-NumberHex def-Number'>0xFF</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1254:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start <span class='c-Symbol def-Symbol'>></span> pos<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1255:         SetLine<span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>,</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>+</span> pos<span class='c-Symbol def-Symbol'>,</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start <span class='c-Symbol def-Symbol'>-</span> pos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1256:         pos <span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1257:         <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1258:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1259:       SetLine<span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>,</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>+</span> pos<span class='c-Symbol def-Symbol'>,</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>-</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1260:       pos <span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>=</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>end <span class='c-Symbol def-Symbol'>-</span> l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>start<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1261: 
1262:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>bsback<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>sback<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1263:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>bstext<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>stext<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1264:       <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1265:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>betext<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>etext<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1266:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>beback<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>l1<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>ad<span class='c-Symbol def-Symbol'>.</span>eback<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1267:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1268:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>pos <span class='c-Symbol def-Symbol'>&lt;</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1269:       SetLine<span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>,</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>data <span class='c-Symbol def-Symbol'>+</span> pos<span class='c-Symbol def-Symbol'>,</span> lines<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>.</span>len <span class='c-Symbol def-Symbol'>-</span> pos<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1270:       <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>tmpline<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1271:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1272:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1273:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1274:   ad <span class='c-Symbol def-Symbol'>=</span> adata<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>getcdata<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1275:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>printf</span><span class='c-Symbol def-Symbol'>(</span>ad<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>></span>etext<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1276: 
1277:   clrDestroyRegions<span class='c-Symbol def-Symbol'>(</span>hlines<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1278:   <span class='c-KeywordANSI def-Keyword'>delete</span> adata<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1279:   <span class='c-KeywordANSI def-Keyword'>delete</span> cc<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1280:   <span class='c-KeywordANSI def-Keyword'>delete</span> cd<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1281: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1282: 
1283: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// opens file and reads it</span>
1284: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> parse<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> no<span class='c-Symbol def-Symbol'>)</span>
1285: <span class='def-SymbolStrong def-Symbol'>{</span>
1286: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1287: <span class='c-KeywordANSI def-Keyword'>struct</span> <span class='c-KeywordUnix c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>stat</span> fst<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1288:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> file <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>open</span><span class='c-Symbol def-Symbol'>(</span>fname<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1289:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>file <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1290:     <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>cannot open file </span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> fname<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1291:     <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1292:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1293:   <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>fstat</span><span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>,</span> <span class='c-Symbol def-Symbol'>&amp;</span>fst<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1294:   <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len <span class='c-Symbol def-Symbol'>=</span> fst<span class='c-Symbol def-Symbol'>.</span>st_size<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1295:   data <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>new</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1296:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>memset</span><span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1297:   len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>read</span><span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>,</span> data<span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1298:   <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>close</span><span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1299: 
1300:   formatlines<span class='c-Symbol def-Symbol'>(</span>data<span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>,</span> no<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1301: 
1302:   no<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>?</span>view<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>:</span>htmlout<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1303: 
1304:   <span class='c-KeywordANSI def-Keyword'>delete</span><span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>]</span> lines<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1305:   <span class='c-KeywordANSI def-Keyword'>delete</span> data<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1306: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1307: 
1308: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// parameters</span>
1309: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> printerr<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span>
1310: <span class='def-SymbolStrong def-Symbol'>{</span>
1311: <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>use: colorer -(l|r|h|v) [-i&lt;name>] [-c] [-d] [-t&lt;type>] &lt;fname></span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1312:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -l        test and load full database</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1313:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -r        regexp tests</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1314:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -h        generates plain coloring from file &lt;fname> (uses rulesgen param)</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1315:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -v        view file &lt;fname> (uses rulesview param)</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1316:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -i&lt;name>  load coloring rules with name 'rules&lt;name>'</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1317:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -t&lt;type>  try to use type &lt;type> instead of type autodetection</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1318:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -d        disable html symbols substitutions</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1319:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>  -c        disable information header</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1320:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>colorer uses colorer.ini file, placed in its directory(win/dos)</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1321:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>or .colorer.ini in /usr/share/colorer/bin/ in unix systems</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1322:        <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>this file contain base file paths.</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span>
1323:        <span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1324: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1325: 
1326: 
1327: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> getparams<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> argc<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>argv<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span>
1328: <span class='def-SymbolStrong def-Symbol'>{</span>
1329:   <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// checking parameters</span>
1330:   <span class='c-Symbol def-Symbol'>*</span>frules <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1331:   htmlsubst <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1332:   <span class='c-KeywordANSI def-Keyword'>for</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> i <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i <span class='c-Symbol def-Symbol'>&lt;</span> argc<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span> i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1333:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span><span class='c-Character def-Character def-String'>'-'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'/'</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1334:       <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>fname<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1335:       <span class='c-KeywordANSI def-Keyword'>continue</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1336:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1337:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'r'</span><span class='c-Symbol def-Symbol'>)</span> what <span class='c-Symbol def-Symbol'>=</span> EREGEXP<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1338:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'l'</span><span class='c-Symbol def-Symbol'>)</span> what <span class='c-Symbol def-Symbol'>=</span> ELIST<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1339:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'v'</span><span class='c-Symbol def-Symbol'>)</span> what <span class='c-Symbol def-Symbol'>=</span> EVIEW<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1340:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'h'</span><span class='c-Symbol def-Symbol'>)</span> what <span class='c-Symbol def-Symbol'>=</span> EGEN<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1341:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'d'</span><span class='c-Symbol def-Symbol'>)</span> htmlsubst <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1342:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'c'</span><span class='c-Symbol def-Symbol'>)</span> cpdis <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1343:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'t'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span> <span class='c-Symbol def-Symbol'>&lt;</span> argc <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1344:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>typedescr<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1345:       <span class='c-KeywordANSI def-Keyword'>else</span><span class='def-SymbolStrong def-Symbol'>{</span>
1346:         <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>typedescr<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1347:         i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1348:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1349:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1350:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'i'</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> <span class='c-Symbol def-Symbol'>(</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span> <span class='c-Symbol def-Symbol'>&lt;</span> argc <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1351:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>2</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1352:       <span class='c-KeywordANSI def-Keyword'>else</span><span class='def-SymbolStrong def-Symbol'>{</span>
1353:         <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>[</span>i<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1354:         i<span class='c-Symbol def-Symbol'>+</span><span class='c-Symbol def-Symbol'>+</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1355:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1356:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1357:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1358:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>*</span>frules <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> what <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> EVIEW<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>view</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1359:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>*</span>frules <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> what <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> EGEN<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>gen</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1360: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1361: 
1362: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>void</span> getfparams<span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span><span class='c-Symbol def-Symbol'>*</span> param0<span class='c-Comment def-Comment def-Syntax'>/*DCB*/</span><span class='c-Symbol def-Symbol'>)</span>
1363: <span class='def-SymbolStrong def-Symbol'>{</span>
1364: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> cname<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>256</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>tmpname</span><span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>64</span><span class='c-Symbol def-Symbol'>]</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1365: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> len<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1366: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>bool</span> setrules <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>false</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1367: <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>FILE</span> <span class='c-Symbol def-Symbol'>*</span>file<span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1368: 
1369: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>ifdef</span><span class='c-Preproc def-DirectiveContent def-Directive'> _WIN32</span>
1370:   len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetModuleFileName</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordWin32 c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>GetModuleHandle</span><span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>,</span> cname<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>256</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1371:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\\'</span><span class='c-Symbol def-Symbol'>)</span> len<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1372:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>+</span>len<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>colorer.ini</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1373: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>elif</span><span class='c-Preproc def-DirectiveContent def-Directive'> </span><span class='c-PreprocWord def-Directive'>defined</span><span class='c-Preproc def-DirectiveContent def-Directive'> __MSDOS__</span>
1374: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//DataCompBoy: begin</span>
1375:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> param0<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1376:   len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strlen</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1377:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>&amp;</span><span class='c-Symbol def-Symbol'>&amp;</span> cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>!</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\\'</span><span class='c-Symbol def-Symbol'>)</span> len<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1378:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>+</span>len<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>colorer.ini</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1379: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>//DataCompBoy: end</span>
1380: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>else</span>
1381:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> UNIX_CFG<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1382: <span class='c-PreprocPref def-DirectiveEdge def-DirectiveContent def-Directive'>#</span><span class='c-PreprocWord def-Directive'>endif</span>
1383: 
1384: 
1385:   file <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fopen</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>r</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1386:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>file<span class='c-Symbol def-Symbol'>)</span> <span class='c-KeywordANSI def-Keyword'>return</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1387: 
1388:   <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fgets</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>256</span><span class='c-Symbol def-Symbol'>,</span> file<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1389:     len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strlen</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1390:     <span class='c-KeywordANSI def-Keyword'>while</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\r'</span> <span class='c-Symbol def-Symbol'>|</span><span class='c-Symbol def-Symbol'>|</span> cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Character def-Character def-String'>'\n'</span><span class='c-Symbol def-Symbol'>)</span>
1391:       cname<span class='c-Symbol def-Symbol'>[</span>len<span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>-</span><span class='c-Symbol def-Symbol'>]</span> <span class='c-Symbol def-Symbol'>=</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1392:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strncmp</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>base=</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-NumberDec def-Number'>5</span><span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1393:        <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>basefname<span class='c-Symbol def-Symbol'>,</span> cname<span class='c-Symbol def-Symbol'>+</span><span class='def-NumberDec def-Number'>5</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1394:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1395:     <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span>setrules<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1396:       len <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>sprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>tmpname</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>rules.</span><span class='c-StringFormat def-VarStrong def-Var'>%s</span><span class='c-String def-String'>=</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>,</span> frules<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1397:       <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>!</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strncmp</span><span class='c-Symbol def-Symbol'>(</span>cname<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordUnixIO c-KeywordStructure def-StructKeyword def-Keyword'>tmpname</span><span class='c-Symbol def-Symbol'>,</span> len<span class='c-Symbol def-Symbol'>)</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1398:         <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>strcpy</span><span class='c-Symbol def-Symbol'>(</span>frules<span class='c-Symbol def-Symbol'>,</span> cname<span class='c-Symbol def-Symbol'>+</span>len<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1399:         setrules <span class='c-Symbol def-Symbol'>=</span> <span class='c-KeywordANSI def-Keyword'>true</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1400:       <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1401:     <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1402:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1403:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fclose</span><span class='c-Symbol def-Symbol'>(</span>file<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1404: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1405: 
1406: <span class='c-LineComment def-LineComment def-Comment def-Syntax'>// hm...</span>
1407: <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> <span class='c-KeywordLibFunctions def-FunctionKeyword def-Keyword'>main</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>int</span> argc<span class='c-Symbol def-Symbol'>,</span> <span class='c-KeywordANSI-typenames c-KeywordANSI def-Keyword'>char</span> <span class='c-Symbol def-Symbol'>*</span>argv<span class='c-Symbol def-Symbol'>[</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Symbol def-Symbol'>)</span>
1408: <span class='def-SymbolStrong def-Symbol'>{</span>
1409:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-String def-String'>colorer library ``forever''</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1410:   <span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>fprintf</span><span class='c-Symbol def-Symbol'>(</span><span class='c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>stderr</span><span class='c-Symbol def-Symbol'>,</span> <span class='def-StringEdge def-String'>"</span><span class='c-String def-String'>copyright (c) 1999-2001 cail lomecb/igor ruskih</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='c-StringEscape def-StringContent def-String'>\n</span><span class='def-StringEdge def-String'>"</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1411: 
1412:   getparams<span class='c-Symbol def-Symbol'>(</span>argc<span class='c-Symbol def-Symbol'>,</span> argv<span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1413:   getfparams<span class='c-Symbol def-Symbol'>(</span>argv<span class='c-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>]</span><span class='c-Comment def-Comment def-Syntax'>/*DCB*/</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1414: 
1415:   <span class='c-KeywordANSI def-Keyword'>if</span> <span class='c-Symbol def-Symbol'>(</span>what <span class='c-Symbol def-Symbol'>=</span><span class='c-Symbol def-Symbol'>=</span> <span class='c-Symbol def-Symbol'>-</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1416:     printerr<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1417:     <span class='c-KeywordANSI def-Keyword'>return</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1418:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1419:   <span class='c-KeywordANSI def-Keyword'>switch</span><span class='c-Symbol def-Symbol'>(</span>what<span class='c-Symbol def-Symbol'>)</span><span class='def-SymbolStrong def-Symbol'>{</span>
1420:     <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>EREGEXP</span><span class='c-Label def-Label'>:</span>
1421:       retest<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1422:       <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1423:     <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>ELIST</span><span class='c-Label def-Label'>:</span>
1424:       <span class='cpp-KeywordSTL c-KeywordStdio c-KeywordStructure def-StructKeyword def-Keyword'>list</span><span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1425:       <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1426:     <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>EVIEW</span><span class='c-Label def-Label'>:</span>
1427:       parse<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>1</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1428:       <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1429:     <span class='c-KeywordANSI def-Keyword'>case </span><span class='c-KeywordConstant def-Constant def-Keyword'>EGEN</span><span class='c-Label def-Label'>:</span>
1430:       parse<span class='c-Symbol def-Symbol'>(</span><span class='def-NumberDec def-Number'>0</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1431:       <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1432: <span class='c-Label def-Label'>    </span><span class='c-KeywordANSI def-Keyword'>default</span><span class='c-Label def-Label'>:</span>
1433:       printerr<span class='c-Symbol def-Symbol'>(</span><span class='c-Symbol def-Symbol'>)</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1434:       <span class='c-KeywordANSI def-Keyword'>break</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1435:   <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1436:   <span class='c-KeywordANSI def-Keyword'>return</span> <span class='def-NumberDec def-Number'>0</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1437: <span class='def-SymbolStrong def-Symbol'>}</span><span class='c-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
1438: 
