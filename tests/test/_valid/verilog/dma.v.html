  0: <span class='def-Comment def-Syntax'>// 5.02.98      - date of creation</span>
  1: <span class='def-Comment def-Syntax'>// Verilog HDL for "btx3_v3", "DMA" "functional"</span>
  2: 
  3: <span class='verilog-verWord def-Keyword'>module DMA</span><span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> DMA_BusReq<span class='verilog-verSymb def-Symbol'>,</span> BusGnt<span class='verilog-verSymb def-Symbol'>,</span> DMA_Sel<span class='verilog-verSymb def-Symbol'>,</span> DMA_Ack<span class='verilog-verSymb def-Symbol'>,</span> DMA_IntReq<span class='verilog-verSymb def-Symbol'>,</span> DMA_IntAck<span class='verilog-verSymb def-Symbol'>,</span> ADInput<span class='verilog-verSymb def-Symbol'>,</span> DMA_ADOutput<span class='verilog-verSymb def-Symbol'>,</span> DMA_ADOutEn<span class='verilog-verSymb def-Symbol'>,</span> SRd<span class='verilog-verSymb def-Symbol'>,</span> SWr<span class='verilog-verSymb def-Symbol'>,</span> InRun<span class='verilog-verSymb def-Symbol'>,</span> InAdr<span class='verilog-verSymb def-Symbol'>,</span> SysReset<span class='verilog-verSymb def-Symbol'>,</span> Ack<span class='verilog-verSymb def-Symbol'>,</span> Berr<span class='verilog-verSymb def-Symbol'>,</span> DMA_Rd<span class='verilog-verSymb def-Symbol'>,</span> DMA_Wr<span class='verilog-verSymb def-Symbol'>,</span> DMA_Burst<span class='verilog-verSymb def-Symbol'>,</span> DMA_ALE<span class='verilog-verSymb def-Symbol'>,</span> DMA_DataEn<span class='verilog-verSymb def-Symbol'>,</span> DMA_Cycle<span class='verilog-verSymb def-Symbol'>,</span> DMA_Adr3_2<span class='verilog-verSymb def-Symbol'>,</span> ADPInput<span class='verilog-verSymb def-Symbol'>,</span> DMA_ADPOutput<span class='verilog-verSymb def-Symbol'>,</span> DMA_ADPOutEn<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>;</span>
  4: <span class='def-Keyword'>input</span>   InSysClk<span class='def-Keyword'>;</span>
  5: <span class='def-Keyword'>output</span>  DMA_BusReq<span class='def-Keyword'>;</span>
  6: <span class='def-Keyword'>reg</span>     DMA_BusReq<span class='def-Keyword'>;</span>
  7: <span class='def-Keyword'>input</span>   BusGnt<span class='def-Keyword'>;</span>
  8: <span class='def-Keyword'>input</span>   DMA_Sel<span class='def-Keyword'>;</span>
  9: <span class='def-Keyword'>output</span>  DMA_Ack<span class='def-Keyword'>;</span>
 10: <span class='def-Keyword'>output</span>  DMA_IntReq<span class='def-Keyword'>;</span>
 11: <span class='def-Keyword'>input</span>   DMA_IntAck<span class='def-Keyword'>;</span>
 12: <span class='def-Keyword'>input</span>   <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  ADInput<span class='def-Keyword'>;</span>
 13: <span class='def-Keyword'>output</span>  <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  DMA_ADOutput<span class='def-Keyword'>;</span>
 14: <span class='def-Keyword'>output</span>  DMA_ADOutEn<span class='def-Keyword'>;</span>
 15: <span class='def-Keyword'>input</span>   SRd<span class='verilog-verSymb def-Symbol'>,</span> SWr<span class='verilog-verSymb def-Symbol'>,</span> InRun<span class='def-Keyword'>;</span>
 16: <span class='def-Keyword'>input</span>   <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span>   InAdr<span class='def-Keyword'>;</span>
 17: <span class='def-Keyword'>input</span>   SysReset<span class='def-Keyword'>;</span>
 18: <span class='def-Keyword'>input</span>   Ack<span class='verilog-verSymb def-Symbol'>,</span> Berr<span class='def-Keyword'>;</span>
 19: <span class='def-Keyword'>output</span>  DMA_Rd<span class='verilog-verSymb def-Symbol'>,</span> DMA_Wr<span class='verilog-verSymb def-Symbol'>,</span> DMA_ALE<span class='verilog-verSymb def-Symbol'>,</span> DMA_DataEn<span class='verilog-verSymb def-Symbol'>,</span> DMA_Burst<span class='def-Keyword'>;</span>
 20: <span class='def-Keyword'>output</span>  DMA_Cycle<span class='def-Keyword'>;</span>
 21: <span class='def-Keyword'>output</span>  <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   DMA_Adr3_2<span class='def-Keyword'>;</span>
 22: <span class='def-Keyword'>input</span>   <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   ADPInput<span class='def-Keyword'>;</span>
 23: <span class='def-Keyword'>output</span>  <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   DMA_ADPOutput<span class='def-Keyword'>;</span>
 24: <span class='def-Keyword'>output</span>          DMA_ADPOutEn<span class='def-Keyword'>;</span>
 25: 
 26: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  InitAdr_A<span class='verilog-verSymb def-Symbol'>,</span> InitAdr_B<span class='verilog-verSymb def-Symbol'>,</span> InitTransfLengh<span class='def-Keyword'>;</span>
 27: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  CurrentAdr_A<span class='verilog-verSymb def-Symbol'>,</span> CurrentAdr_B<span class='verilog-verSymb def-Symbol'>,</span> CurrentTransfLengh<span class='def-Keyword'>;</span>
 28: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   BurstLengh<span class='verilog-verSymb def-Symbol'>,</span> TimeOutLengh<span class='def-Keyword'>;</span>
 29: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  RegOut<span class='def-Keyword'>;</span>
 30: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  StatusRegOut<span class='def-Keyword'>;</span>
 31: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  StoreReg<span class='verilog-verSymb def-Symbol'>,</span> DataOut<span class='def-Keyword'>;</span>
 32: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   StoreParReg<span class='def-Keyword'>;</span>
 33: <span class='def-Keyword'>wire</span>    WrReg<span class='def-Keyword'>;</span>
 34: <span class='def-Keyword'>reg</span>     DMA_Ack<span class='verilog-verSymb def-Symbol'>,</span> SDMA_DataEn<span class='verilog-verSymb def-Symbol'>,</span> DMA_Burst<span class='verilog-verSymb def-Symbol'>,</span> DMA_IntReq<span class='def-Keyword'>;</span>
 35: <span class='def-Keyword'>reg</span>     SAck<span class='verilog-verSymb def-Symbol'>,</span> SBerr<span class='verilog-verSymb def-Symbol'>,</span> SEnd<span class='def-Keyword'>;</span>
 36: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   state<span class='def-Keyword'>;</span>
 37: <span class='def-Keyword'>wire</span>    AtoB<span class='verilog-verSymb def-Symbol'>,</span> BtoA<span class='verilog-verSymb def-Symbol'>,</span> DMAReg_Out<span class='verilog-verSymb def-Symbol'>,</span> DelAfterRead<span class='verilog-verSymb def-Symbol'>,</span> WordFill<span class='def-Keyword'>;</span>
 38: <span class='def-Keyword'>reg</span>     WrState<span class='verilog-verSymb def-Symbol'>,</span> RdState<span class='verilog-verSymb def-Symbol'>,</span>  LoadTimeOut<span class='def-Keyword'>;</span>
 39: <span class='def-Keyword'>reg</span>     LoadCounter<span class='verilog-verSymb def-Symbol'>,</span> DMA_InProgress<span class='verilog-verSymb def-Symbol'>,</span> TimeOutDone<span class='def-Keyword'>;</span>
 40: <span class='def-Keyword'>wire</span>    Burst_Done<span class='verilog-verSymb def-Symbol'>,</span>LoadBurst<span class='verilog-verSymb def-Symbol'>,</span> BurstLengh_En<span class='verilog-verSymb def-Symbol'>,</span> ParError<span class='verilog-verSymb def-Symbol'>,</span> DMA_Done<span class='def-Keyword'>;</span>
 41: <span class='def-Keyword'>reg</span>     BusErrFlag<span class='def-Keyword'>;</span>
 42: 
 43: <span class='def-Comment def-Syntax'>//</span>
 44: <span class='def-Comment def-Syntax'>//********* state</span>
 45: <span class='def-Keyword'>parameter</span>       IDLE            <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h0</span><span class='def-Keyword'>;</span>
 46: <span class='def-Keyword'>parameter</span>       READ            <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h1</span><span class='def-Keyword'>;</span>
 47: <span class='def-Keyword'>parameter</span>       WRITE           <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h2</span><span class='def-Keyword'>;</span>
 48: <span class='def-Keyword'>parameter</span>       WAIT_ACK_Read   <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h3</span><span class='def-Keyword'>;</span>
 49: <span class='def-Keyword'>parameter</span>       WAIT_ACK_Write  <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h4</span><span class='def-Keyword'>;</span>
 50: <span class='def-Keyword'>parameter</span>       TIME_OUT        <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h5</span><span class='def-Keyword'>;</span>
 51: <span class='def-Keyword'>parameter</span>       ERROR           <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h6</span><span class='def-Keyword'>;</span>
 52: <span class='def-Keyword'>parameter</span>       STOP            <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h7</span><span class='def-Keyword'>;</span>
 53: <span class='def-Keyword'>parameter</span>       DEL_AFTER_READ  <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h8</span><span class='def-Keyword'>;</span>
 54: <span class='def-Keyword'>parameter</span>       BUS_REQ         <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h9</span><span class='def-Keyword'>;</span>
 55: <span class='def-Comment def-Syntax'>//***********</span>
 56: <span class='def-Keyword'>wire</span>    InitAdr_ASel    <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h1</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span> <span class='def-Comment def-Syntax'>//0x4</span>
 57: <span class='def-Keyword'>wire</span>    InitAdr_BSel    <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h2</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span> <span class='def-Comment def-Syntax'>//0x8</span>
 58: <span class='def-Keyword'>wire</span>    CurrentAdr_ASel <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h3</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span> <span class='def-Comment def-Syntax'>//0xc</span>
 59: <span class='def-Keyword'>wire</span>    CurrentAdr_BSel <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h4</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span> <span class='def-Comment def-Syntax'>//0x10</span>
 60: <span class='def-Keyword'>wire</span>    InitTransfLenghSel      <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h5</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span><span class='def-Comment def-Syntax'>//0x14</span>
 61: <span class='def-Keyword'>wire</span>    CurrentTransfLenghSel   <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h6</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span><span class='def-Comment def-Syntax'>//0x18</span>
 62: <span class='def-Keyword'>wire</span>    BurstLenghSel           <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h7</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span><span class='def-Comment def-Syntax'>//0x1c</span>
 63: <span class='def-Keyword'>wire</span>    TimeOutLenghSel         <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h8</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span><span class='def-Comment def-Syntax'>//0x20</span>
 64: <span class='def-Keyword'>wire</span>    StatusRegSel            <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>InAdr<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h0</span><span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span><span class='def-Comment def-Syntax'>//0x0</span>
 65: 
 66: <span class='def-Comment def-Syntax'>// read/write registers</span>
 67: <span class='def-Comment def-Syntax'>// initAdrA</span>
 68: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 69:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    InitAdr_A       <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>32'h00000000</span><span class='verilog-verSymb def-Symbol'>;</span>
 70:         else
 71:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> InitAdr_ASel<span class='def-Symbol'>)</span>        InitAdr_A       <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='def-SymbolStrong def-Symbol'>{</span>ADInput<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>2'b00</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='verilog-verSymb def-Symbol'>;</span>
 72: <span class='def-Comment def-Syntax'>// initAdrB</span>
 73: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 74:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    InitAdr_B       <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>32'h00000000</span><span class='verilog-verSymb def-Symbol'>;</span>
 75:         else
 76:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> InitAdr_BSel<span class='def-Symbol'>)</span>        InitAdr_B       <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='def-SymbolStrong def-Symbol'>{</span>ADInput<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>2'b00</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='verilog-verSymb def-Symbol'>;</span>
 77: <span class='def-Comment def-Syntax'>//</span>
 78: <span class='def-Comment def-Syntax'>// initTransfLengh</span>
 79: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 80:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    InitTransfLengh <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>32'h00000000</span><span class='verilog-verSymb def-Symbol'>;</span>
 81:         else
 82:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> InitTransfLenghSel<span class='def-Symbol'>)</span>  InitTransfLengh <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='def-SymbolStrong def-Symbol'>{</span>ADInput<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>2'b0</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='verilog-verSymb def-Symbol'>;</span>
 83: <span class='def-Comment def-Syntax'>//</span>
 84: <span class='def-Comment def-Syntax'>// BurstLengh</span>
 85: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 86:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    BurstLengh      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>8'h00</span><span class='verilog-verSymb def-Symbol'>;</span>
 87:         else
 88:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> BurstLenghSel<span class='def-Symbol'>)</span>       BurstLengh      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>;</span>
 89: <span class='def-Comment def-Syntax'>// TimeOutLengh</span>
 90: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 91:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    TimeOutLengh    <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>8'h00</span><span class='verilog-verSymb def-Symbol'>;</span>
 92:         else
 93:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> TimeOutLenghSel<span class='def-Symbol'>)</span>     TimeOutLengh    <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>;</span>
 94: <span class='def-Comment def-Syntax'>//</span>
 95: <span class='def-Keyword'>reg</span>     Status0<span class='verilog-verSymb def-Symbol'>,</span>Status1<span class='verilog-verSymb def-Symbol'>,</span>Status2<span class='verilog-verSymb def-Symbol'>,</span>Status3<span class='verilog-verSymb def-Symbol'>,</span>Status4<span class='verilog-verSymb def-Symbol'>,</span>Status5<span class='verilog-verSymb def-Symbol'>,</span>Status6<span class='verilog-verSymb def-Symbol'>,</span> Status7<span class='verilog-verSymb def-Symbol'>,</span>Status8<span class='verilog-verSymb def-Symbol'>,</span>Status9<span class='verilog-verSymb def-Symbol'>,</span> Status10<span class='verilog-verSymb def-Symbol'>,</span>Status14<span class='verilog-verSymb def-Symbol'>,</span>Status15<span class='def-Keyword'>;</span>
 96: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
 97:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    <span class='def-Keyword'>begin</span>                   
 98:                         Status3 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
 99:                         Status4 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
100:                         Status5 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
101:                         Status6 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
102:                         Status7 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
103:                         Status8 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
104:                         Status9 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
105:                         Status14        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
106:                         <span class='def-Keyword'>end</span>
107:         else    
108:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel<span class='def-Symbol'>)</span>
109:                         <span class='def-Keyword'>begin</span>   
110:                                 Status3         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verSymb def-Symbol'>;</span>
111:                                 Status4         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[4]</span><span class='verilog-verSymb def-Symbol'>;</span>
112:                                 Status5         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[5]</span><span class='verilog-verSymb def-Symbol'>;</span>
113:                                 Status6         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[6]</span><span class='verilog-verSymb def-Symbol'>;</span>
114:                                 Status7         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[7]</span><span class='verilog-verSymb def-Symbol'>;</span>
115:                                 Status8         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[8]</span><span class='verilog-verSymb def-Symbol'>;</span>
116:                                 Status9         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[9]</span><span class='verilog-verSymb def-Symbol'>;</span>
117:                                 Status14        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[14]</span><span class='verilog-verSymb def-Symbol'>;</span>
118:                 <span class='def-Keyword'>end</span>
119: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
120:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    Status0 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
121:         else
122:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel<span class='def-Symbol'>)</span>        Status0 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verNumb def-Number'>[0]</span><span class='verilog-verSymb def-Symbol'>;</span>
123:         else
124:         if<span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> STOP<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>  Status0 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
125: <span class='def-Comment def-Syntax'>//</span>
126: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
127:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    Status1 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
128:         else
129:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ADInput<span class='def-Symbol'>)</span>     Status1 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
130:         else
131:         if<span class='def-Symbol'>(</span>BusErrFlag <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> RdState<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> WrState<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>       Status1 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
132: <span class='def-Comment def-Syntax'>//</span>
133: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
134:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    Status2 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
135:         else
136:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ADInput<span class='def-Symbol'>)</span>     Status2 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
137:         else
138:         if<span class='def-Symbol'>(</span>BusErrFlag <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> RdState<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> WrState<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>       Status2 <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
139: <span class='def-Comment def-Syntax'>//</span>
140: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
141:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    Status10        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
142:         else
143:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ADInput<span class='def-Symbol'>)</span>     Status10        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
144:         else
145:         if<span class='def-Symbol'>(</span>ParError<span class='def-Symbol'>)</span>    Status10        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
146: <span class='def-Comment def-Syntax'>//</span>
147: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
148:         if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    Status15        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
149:         else
150:         if<span class='def-Symbol'>(</span>WrReg <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ADInput<span class='def-Symbol'>)</span>     Status15        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
151:         else
152:         if<span class='def-Symbol'>(</span>DMA_IntAck<span class='def-Symbol'>)</span>                          Status15        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
153:         else
154:         if<span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> STOP<span class='def-Symbol'>)</span>       Status15        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
155: 
156: <span class='def-Keyword'>assign</span>  StatusRegOut <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-SymbolStrong def-Symbol'>{</span>Status15<span class='verilog-verSymb def-Symbol'>,</span> Status14<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>3'h0</span><span class='verilog-verSymb def-Symbol'>,</span> Status10<span class='verilog-verSymb def-Symbol'>,</span> Status9<span class='verilog-verSymb def-Symbol'>,</span> Status8<span class='verilog-verSymb def-Symbol'>,</span> Status7<span class='verilog-verSymb def-Symbol'>,</span> Status6<span class='verilog-verSymb def-Symbol'>,</span> Status5<span class='verilog-verSymb def-Symbol'>,</span> Status4<span class='verilog-verSymb def-Symbol'>,</span> Status3<span class='verilog-verSymb def-Symbol'>,</span> Status2<span class='verilog-verSymb def-Symbol'>,</span> Status1<span class='verilog-verSymb def-Symbol'>,</span> Status0<span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Keyword'>;</span>          
157: 
158: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> InitAdr_ASel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> InitAdr_A <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
159: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> InitAdr_BSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> InitAdr_B <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
160: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> CurrentAdr_ASel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> CurrentAdr_A <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
161: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> CurrentAdr_BSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> CurrentAdr_B <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
162: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> InitTransfLenghSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> InitTransfLengh <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
163: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> CurrentTransfLenghSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> CurrentTransfLengh <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
164: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> BurstLenghSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='verilog-verNumb def-Number'>24'h000000</span><span class='verilog-verSymb def-Symbol'>,</span> BurstLengh<span class='def-SymbolStrong def-Symbol'>}</span> <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
165: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> TimeOutLenghSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='verilog-verNumb def-Number'>24'h000000</span><span class='verilog-verSymb def-Symbol'>,</span> TimeOutLengh<span class='def-SymbolStrong def-Symbol'>}</span> <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
166: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMAReg_Out <span class='verilog-verSymb def-Symbol'>&amp;</span> StatusRegSel<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> <span class='def-SymbolStrong def-Symbol'>{</span><span class='verilog-verNumb def-Number'>16'h0000</span><span class='verilog-verSymb def-Symbol'>,</span> StatusRegOut<span class='def-SymbolStrong def-Symbol'>}</span> <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hzzzzzzzz<span class='def-Keyword'>;</span>
167: <span class='def-Keyword'>wire</span>    BusPullDown     <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>~</span>DMAReg_Out<span class='def-Keyword'>;</span>
168: <span class='def-Keyword'>assign</span>  RegOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>BusPullDown<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> <span class='verilog-verNumb def-Number'>32'h0</span> <span class='verilog-verSymb def-Symbol'>:</span> <span class='verilog-verNumb def-Number'>32</span>'hz<span class='def-Keyword'>;</span>
169: <span class='def-Comment def-Syntax'>//************</span>
170: <span class='def-Keyword'>assign</span>  DMAReg_Out      <span class='verilog-verSymb def-Symbol'>=</span> SRd <span class='verilog-verSymb def-Symbol'>&amp;</span> DMA_Sel<span class='def-Keyword'>;</span>
171: 
172: <span class='def-Comment def-Syntax'>//****************</span>
173: <span class='def-Keyword'>assign</span>  WrReg   <span class='verilog-verSymb def-Symbol'>=</span> SWr <span class='verilog-verSymb def-Symbol'>&amp;</span> DMA_Sel <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>DMA_Ack<span class='def-Keyword'>;</span>
174: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
175:         DMA_Ack <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> DMA_Sel<span class='verilog-verSymb def-Symbol'>;</span>
176: <span class='def-Comment def-Syntax'>//</span>
177: <span class='def-Comment def-Syntax'>//********</span>
178: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>InRun</span>)
179:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>InRun<span class='def-Symbol'>)</span>
180:                 <span class='def-Keyword'>begin</span>
181:                 assign  DMA_Ack <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>    
182:                 <span class='def-Keyword'>end</span>
183:         else    <span class='def-Keyword'>begin</span>
184:                 deassign        DMA_Ack<span class='verilog-verSymb def-Symbol'>;</span>
185:                 <span class='def-Keyword'>end</span>
186: <span class='def-Comment def-Syntax'>//******************************************************************</span>
187: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
188: if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>    state <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE<span class='verilog-verSymb def-Symbol'>;</span>
189: else
190: case<span class='def-Symbol'>(</span>state<span class='def-Symbol'>)</span>
191: IDLE<span class='verilog-verSymb def-Symbol'>:</span>   <span class='def-Keyword'>begin</span>
192:         <span class='verilog-verWord def-Keyword'>if</span>(Status0) state <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> BUS_REQ<span class='verilog-verSymb def-Symbol'>;</span>
193:         <span class='verilog-verWord def-Keyword'>else</span> state      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE<span class='verilog-verSymb def-Symbol'>;</span>
194:         <span class='def-Keyword'>end</span>
195: BUS_REQ<span class='verilog-verSymb def-Symbol'>:</span>        
196:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>BusGnt <span class='verilog-verSymb def-Symbol'>|</span> <span class='verilog-verSymb def-Symbol'>~</span>DMA_BusReq<span class='def-Symbol'>)</span>       state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> BUS_REQ<span class='verilog-verSymb def-Symbol'>;</span>
197:         else
198:         if<span class='def-Symbol'>(</span>RdState<span class='def-Symbol'>)</span>     state <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='verilog-verSymb def-Symbol'>;</span>
199:         else                    state <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='verilog-verSymb def-Symbol'>;</span>  
200: 
201: READ<span class='verilog-verSymb def-Symbol'>:</span>   if<span class='def-Symbol'>(</span>ParError<span class='def-Symbol'>)</span>    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='verilog-verSymb def-Symbol'>;</span>
202:         else    state <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read<span class='verilog-verSymb def-Symbol'>;</span>
203: WAIT_ACK_Read<span class='verilog-verSymb def-Symbol'>:</span>
204:         if<span class='def-Symbol'>(</span>SBerr<span class='def-Symbol'>)</span>       state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='verilog-verSymb def-Symbol'>;</span>
205:         else
206:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>SAck<span class='def-Symbol'>)</span>       state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read<span class='verilog-verSymb def-Symbol'>;</span>
207:         else
208:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>WordFill<span class='def-Symbol'>)</span>           
209:                 if<span class='def-Symbol'>(</span>DelAfterRead<span class='def-Symbol'>)</span>        state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> DEL_AFTER_READ<span class='verilog-verSymb def-Symbol'>;</span>
210:                 else                    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='verilog-verSymb def-Symbol'>;</span>
211:         else    
212:                 if<span class='def-Symbol'>(</span>DelAfterRead<span class='def-Symbol'>)</span>        state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> DEL_AFTER_READ<span class='verilog-verSymb def-Symbol'>;</span>
213:                 else                    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='verilog-verSymb def-Symbol'>;</span>
214: DEL_AFTER_READ<span class='verilog-verSymb def-Symbol'>:</span> if<span class='def-Symbol'>(</span>ParError<span class='def-Symbol'>)</span>    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='verilog-verSymb def-Symbol'>;</span>
215:                 else
216:                 if<span class='def-Symbol'>(</span>WordFill<span class='def-Symbol'>)</span>    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='verilog-verSymb def-Symbol'>;</span>
217:                 else            state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='verilog-verSymb def-Symbol'>;</span>
218: 
219: WRITE<span class='verilog-verSymb def-Symbol'>:</span>  if<span class='def-Symbol'>(</span>ParError<span class='def-Symbol'>)</span>    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='verilog-verSymb def-Symbol'>;</span>
220:         else    state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write<span class='verilog-verSymb def-Symbol'>;</span>
221: WAIT_ACK_Write<span class='verilog-verSymb def-Symbol'>:</span>
222:         if<span class='def-Symbol'>(</span>SBerr<span class='def-Symbol'>)</span>       state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='verilog-verSymb def-Symbol'>;</span>
223:         else
224:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>SAck<span class='def-Symbol'>)</span>       state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write<span class='verilog-verSymb def-Symbol'>;</span>
225:         else    
226:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>WordFill<span class='def-Symbol'>)</span>
227:                 state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='verilog-verSymb def-Symbol'>;</span>
228:         else                    
229:         if<span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>DMA_Done<span class='def-Symbol'>)</span>   
230:                 if<span class='def-Symbol'>(</span>Burst_Done<span class='def-Symbol'>)</span>  state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> TIME_OUT<span class='verilog-verSymb def-Symbol'>;</span>
231:                 else
232:                 state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='verilog-verSymb def-Symbol'>;</span>
233:         else
234:         state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> STOP<span class='verilog-verSymb def-Symbol'>;</span>                                                                                        
235: STOP<span class='verilog-verSymb def-Symbol'>:</span>   state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE<span class='verilog-verSymb def-Symbol'>;</span>
236: ERROR<span class='verilog-verSymb def-Symbol'>:</span>  state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> STOP<span class='verilog-verSymb def-Symbol'>;</span>
237: TIME_OUT<span class='verilog-verSymb def-Symbol'>:</span>
238:         if<span class='def-Symbol'>(</span>TimeOutDone<span class='def-Symbol'>)</span> state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> BUS_REQ<span class='verilog-verSymb def-Symbol'>;</span>                             
239:         else            state   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> TIME_OUT<span class='verilog-verSymb def-Symbol'>;</span>
240: endcase
241: 
242: <span class='def-Comment def-Syntax'>//</span>
243: <span class='def-Keyword'>assign</span>  DelAfterRead    <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>~</span>Status8<span class='def-Keyword'>;</span>
244: 
245: <span class='def-Comment def-Syntax'>//********* counters</span>
246: <span class='def-Keyword'>reg</span>     LoadAdrCounters<span class='verilog-verSymb def-Symbol'>,</span> IncAdrA_En<span class='verilog-verSymb def-Symbol'>,</span> IncAdrB_En<span class='def-Keyword'>;</span>
247: <span class='def-Keyword'>wire</span>     TransfLengh_En<span class='def-Keyword'>;</span>
248: <span class='def-Keyword'>wire</span>    LoadAll <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>Status0 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> SysReset<span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
249: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
250:         <span class='def-Keyword'>begin</span>
251:         LoadAdrCounters         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> LoadAll<span class='verilog-verSymb def-Symbol'>;</span>
252:         DMA_InProgress          <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> Status0 <span class='verilog-verSymb def-Symbol'>&amp;</span> BusGnt<span class='verilog-verSymb def-Symbol'>;</span>
253:         IncAdrA_En      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError <span class='verilog-verSymb def-Symbol'>&amp;</span> (AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ)) <span class='verilog-verSymb def-Symbol'>|</span> (BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE)) <span class='verilog-verSymb def-Symbol'>|</span> LoadAll<span class='verilog-verSymb def-Symbol'>;</span>
254:         IncAdrB_En      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (<span class='verilog-verSymb def-Symbol'>~</span>ParError <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> (BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ))) <span class='verilog-verSymb def-Symbol'>|</span> (<span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> (AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE))) <span class='verilog-verSymb def-Symbol'>|</span> LoadAll<span class='verilog-verSymb def-Symbol'>;</span>
255:         <span class='def-Keyword'>end</span>
256: <span class='def-Keyword'>assign</span>          TransfLengh_En  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>ParError <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> AtoB<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> LoadAdrCounters<span class='def-Keyword'>;</span>
257: 
258: <span class='def-Keyword'>wire</span>    EnAdr1  <span class='verilog-verSymb def-Symbol'>=</span> Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7<span class='def-Keyword'>;</span>
259: <span class='def-Keyword'>wire</span>    EnAdr0  <span class='verilog-verSymb def-Symbol'>=</span> Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7<span class='def-Keyword'>;</span>
260: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   CurrentBurstLengh<span class='verilog-verSymb def-Symbol'>,</span> CurrentTimeOut<span class='def-Keyword'>;</span>
261: 
262: bt83DMAcounter32        IncAdr_ACounter<span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> IncAdrA_En<span class='verilog-verSymb def-Symbol'>,</span> LoadAdrCounters<span class='verilog-verSymb def-Symbol'>,</span> InitAdr_A<span class='verilog-verSymb def-Symbol'>,</span> CurrentAdr_A<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>1'b0</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>1'b0</span><span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
263: bt83DMAcounter32        IncAdr_BCounter<span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> IncAdrB_En<span class='verilog-verSymb def-Symbol'>,</span> LoadAdrCounters<span class='verilog-verSymb def-Symbol'>,</span> InitAdr_B<span class='verilog-verSymb def-Symbol'>,</span> CurrentAdr_B<span class='verilog-verSymb def-Symbol'>,</span> EnAdr1<span class='verilog-verSymb def-Symbol'>,</span> EnAdr0<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
264: 
265: bt83DMAcounter32        TransfLenghCounter<span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> TransfLengh_En<span class='verilog-verSymb def-Symbol'>,</span> LoadAdrCounters<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>32'h00000000</span><span class='verilog-verSymb def-Symbol'>,</span> CurrentTransfLengh<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>1'b0</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>1'b0</span><span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
266: 
267: bt83DMAcounter8 BurstLenghCounter<span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> BurstLengh_En<span class='verilog-verSymb def-Symbol'>,</span> LoadBurst<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>8'h00</span><span class='verilog-verSymb def-Symbol'>,</span> CurrentBurstLengh<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
268: 
269: bt83DMAcounter8 TimeOutCounter<span class='def-Symbol'>(</span>InSysClk<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>1'b1</span><span class='verilog-verSymb def-Symbol'>,</span> LoadTimeOut<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>8'h00</span><span class='verilog-verSymb def-Symbol'>,</span> CurrentTimeOut<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
270: 
271: <span class='def-Keyword'>assign</span>  Burst_Done      <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>CurrentBurstLengh <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> BurstLengh<span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
272: <span class='def-Keyword'>assign</span>  LoadBurst       <span class='verilog-verSymb def-Symbol'>=</span> LoadAll <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> TIME_OUT<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> TimeOutDone<span class='def-Symbol'>)</span> <span class='def-Keyword'>;</span>
273: <span class='def-Keyword'>assign</span>  BurstLengh_En   <span class='verilog-verSymb def-Symbol'>=</span> LoadAll <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> TIME_OUT<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> TimeOutDone<span class='def-Symbol'>)</span> 
274:                         <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>&amp;</span> AtoB<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
275: <span class='def-Keyword'>assign</span>  DMA_Done        <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>CurrentTransfLengh<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span> <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> InitTransfLengh<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='def-Symbol'>]</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span> 
276: 
277: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
278:         <span class='def-Keyword'>begin</span>
279:         TimeOutDone     <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (CurrentTimeOut <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> TimeOutLengh)<span class='verilog-verSymb def-Symbol'>;</span>
280:         <span class='def-Keyword'>end</span>
281: <span class='def-Comment def-Syntax'>// Count En</span>
282: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
283:         <span class='def-Keyword'>begin</span>
284:         LoadTimeOut     <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> SysReset 
285:                         <span class='verilog-verSymb def-Symbol'>|</span> (state !<span class='verilog-verSymb def-Symbol'>=</span> TIME_OUT)<span class='verilog-verSymb def-Symbol'>;</span>
286:         <span class='def-Keyword'>end</span>
287: <span class='def-Comment def-Syntax'>// ****** WordFill</span>
288: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   BtCounter<span class='def-Keyword'>;</span>
289: <span class='def-Keyword'>assign</span>  AtoB    <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>~</span>Status3<span class='def-Keyword'>;</span>
290: <span class='def-Keyword'>assign</span>  BtoA    <span class='verilog-verSymb def-Symbol'>=</span> Status3<span class='def-Keyword'>;</span>
291: <span class='def-Keyword'>assign</span>  WordFill <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>RdState <span class='verilog-verSymb def-Symbol'>&amp;</span> AtoB<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>WrState <span class='verilog-verSymb def-Symbol'>&amp;</span> BtoA<span class='def-Symbol'>)</span> 
292:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>RdState <span class='verilog-verSymb def-Symbol'>&amp;</span> BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>
293:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>WrState <span class='verilog-verSymb def-Symbol'>&amp;</span> AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
294: 
295: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
296:         <span class='def-Keyword'>begin</span>
297:         <span class='verilog-verWord def-Keyword'>if</span>(SysReset <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE) <span class='verilog-verSymb def-Symbol'>|</span> ParError)       BtCounter <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verSymb def-Symbol'>;</span>
298:         <span class='verilog-verWord def-Keyword'>if</span> (((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>&amp;</span> BtoA) <span class='verilog-verSymb def-Symbol'>|</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE) <span class='verilog-verSymb def-Symbol'>&amp;</span> AtoB))
299:          <span class='def-Keyword'>case</span><span class='verilog-verWord def-Keyword'>(</span><span class='verilog-verWord def-Keyword'>{</span>Status6<span class='verilog-verWord def-Keyword'>,</span> Status5<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>)</span>
300:                 <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>  BtCounter       <span class='verilog-verWord def-Keyword'>&lt;=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verWord def-Keyword'>;</span>
301:                 <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>  BtCounter       <span class='verilog-verWord def-Keyword'>&lt;=</span> BtCounter + <span class='verilog-verNumb def-Number'>2</span><span class='verilog-verWord def-Keyword'>;</span>
302:                 <span class='verilog-verNumb def-Number'>2'b11</span><span class='verilog-verWord def-Keyword'>:</span>  BtCounter       <span class='verilog-verWord def-Keyword'>&lt;=</span> BtCounter + <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verWord def-Keyword'>;</span>
303:                 <span class='verilog-verNumb def-Number'>2'b01</span><span class='verilog-verWord def-Keyword'>:</span>  BtCounter       <span class='verilog-verWord def-Keyword'>&lt;=</span> BtCounter<span class='verilog-verWord def-Keyword'>;</span>   
304:          <span class='def-Keyword'>endcase</span>
305:         <span class='def-Keyword'>end</span>
306: <span class='def-Comment def-Syntax'>//******</span>
307: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
308:         <span class='def-Keyword'>begin</span>
309:         <span class='verilog-verWord def-Keyword'>if</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE))
310:                 <span class='def-Keyword'>begin</span>
311:                 RdState <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read <span class='verilog-verSymb def-Symbol'>&amp;</span> (<span class='verilog-verSymb def-Symbol'>~</span>SEnd <span class='verilog-verSymb def-Symbol'>|</span> <span class='verilog-verSymb def-Symbol'>~</span>WordFill)) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd <span class='verilog-verSymb def-Symbol'>&amp;</span> WordFill) <span class='verilog-verSymb def-Symbol'>;</span>
312:                 WrState <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd <span class='verilog-verSymb def-Symbol'>&amp;</span> WordFill) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write <span class='verilog-verSymb def-Symbol'>&amp;</span> (<span class='verilog-verSymb def-Symbol'>~</span>SEnd <span class='verilog-verSymb def-Symbol'>|</span> <span class='verilog-verSymb def-Symbol'>~</span>WordFill)) <span class='verilog-verSymb def-Symbol'>;</span>
313:                 <span class='def-Keyword'>end</span>
314:         <span class='def-Keyword'>end</span>
315: <span class='def-Comment def-Syntax'>//******* Data Path</span>
316: <span class='def-Comment def-Syntax'>//read</span>
317: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
318:         <span class='def-Keyword'>begin</span>
319:         <span class='verilog-verWord def-Keyword'>if</span>(state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE)       <span class='def-Keyword'>begin</span>   StoreReg        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>32'h0</span><span class='verilog-verSymb def-Symbol'>;</span>
320:                                         StoreParReg     <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>4'h0</span><span class='verilog-verSymb def-Symbol'>;</span>
321:                                 <span class='def-Keyword'>end</span>
322:         <span class='verilog-verWord def-Keyword'>else</span>
323:         <span class='verilog-verWord def-Keyword'>if</span>((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read) <span class='verilog-verSymb def-Symbol'>&amp;</span> SAck)
324:                 <span class='verilog-verWord def-Keyword'>if</span>(AtoB)
325:                         <span class='def-Keyword'>begin</span>   StoreReg        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADInput<span class='verilog-verSymb def-Symbol'>;</span>
326:                                 StoreParReg     <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ADPInput<span class='verilog-verSymb def-Symbol'>;</span>
327:                         <span class='def-Keyword'>end</span>     
328:                 <span class='verilog-verWord def-Keyword'>else</span>
329:         <span class='def-Keyword'>case</span><span class='verilog-verWord def-Keyword'>(</span><span class='verilog-verWord def-Keyword'>{</span>Status6<span class='verilog-verWord def-Keyword'>,</span> Status5<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>)</span>
330: <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>          begin   StoreReg        <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput<span class='verilog-verWord def-Keyword'>;</span>
331:                         StoreParReg     <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verWord def-Keyword'>;</span>
332:                 end
333: <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>          if<span class='verilog-verWord def-Keyword'>(</span>BtCounter == <span class='verilog-verNumb def-Number'>2'h2</span><span class='verilog-verWord def-Keyword'>)</span>   
334:                     if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span> begin StoreReg[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>;</span>
335:                                         StoreParReg[<span class='verilog-verNumb def-Number'>3</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>2</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput[<span class='verilog-verNumb def-Number'>3</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>2</span>]<span class='verilog-verWord def-Keyword'>;</span>
336:                                 end     
337:                     else        begin   StoreReg[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>;</span>
338:                                         StoreParReg[<span class='verilog-verNumb def-Number'>3</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>2</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput[<span class='verilog-verNumb def-Number'>3</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>2</span>]<span class='verilog-verWord def-Keyword'>;</span>
339:                                 end
340:                 else
341:                 if<span class='verilog-verWord def-Keyword'>(</span>BtCounter == <span class='verilog-verNumb def-Number'>2'h0</span><span class='verilog-verWord def-Keyword'>)</span>   
342:                    if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span>  begin StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>;</span>
343:                                         StoreParReg[<span class='verilog-verNumb def-Number'>1</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput[<span class='verilog-verNumb def-Number'>3</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>2</span>]<span class='verilog-verWord def-Keyword'>;</span>
344:                                 end
345:                     else        begin   StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>;</span>
346:                                         StoreParReg[<span class='verilog-verNumb def-Number'>1</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput[<span class='verilog-verNumb def-Number'>1</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>;</span>
347:                                 end
348: <span class='verilog-verNumb def-Number'>2'b11</span><span class='verilog-verWord def-Keyword'>:</span>          case<span class='verilog-verWord def-Keyword'>(</span>BtCounter<span class='verilog-verWord def-Keyword'>)</span>
349:         <span class='verilog-verNumb def-Number'>2'b01</span><span class='verilog-verWord def-Keyword'>:</span>  if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span>     begin StoreReg[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]&lt;=ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]<span class='verilog-verWord def-Keyword'>;</span>
350:                                         StoreParReg<span class='verilog-verNumb def-Number'>[3]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verWord def-Keyword'>;</span>
351:                                 end
352:                 else            begin   StoreReg[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]<span class='verilog-verWord def-Keyword'>;</span>
353:                                         StoreParReg<span class='verilog-verNumb def-Number'>[3]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verWord def-Keyword'>;</span>
354:                                 end
355:         <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>  if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span>     begin StoreReg[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]<span class='verilog-verWord def-Keyword'>;</span>
356:                                         StoreParReg<span class='verilog-verNumb def-Number'>[2]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verWord def-Keyword'>;</span>
357:                                 end     
358:                 else            begin   StoreReg[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>;</span>
359:                                         StoreParReg<span class='verilog-verNumb def-Number'>[2]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[2]</span><span class='verilog-verWord def-Keyword'>;</span>
360:                                 end
361:         <span class='verilog-verNumb def-Number'>2'b11</span><span class='verilog-verWord def-Keyword'>:</span>  if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span>     begin StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>8</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]<span class='verilog-verWord def-Keyword'>;</span>
362:                                         StoreParReg<span class='verilog-verNumb def-Number'>[1]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verWord def-Keyword'>;</span>
363:                                 end
364:                 else            begin   StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>8</span>]  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>8</span>]<span class='verilog-verWord def-Keyword'>;</span>
365:                                         StoreParReg<span class='verilog-verNumb def-Number'>[1]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[1]</span><span class='verilog-verWord def-Keyword'>;</span>
366:                                 end
367:         <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>  if<span class='verilog-verWord def-Keyword'>(</span>Status7|Status4<span class='verilog-verWord def-Keyword'>)</span>     begin StoreReg[<span class='verilog-verNumb def-Number'>7</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>] <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>31</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>24</span>]<span class='verilog-verWord def-Keyword'>;</span>
368:                                         StoreParReg<span class='verilog-verNumb def-Number'>[0]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verWord def-Keyword'>;</span>
369:                                 end
370:                 else            begin   StoreReg[<span class='verilog-verNumb def-Number'>7</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]   <span class='verilog-verWord def-Keyword'>&lt;=</span> ADInput[<span class='verilog-verNumb def-Number'>7</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>;</span>
371:                                         StoreParReg<span class='verilog-verNumb def-Number'>[0]</span>  <span class='verilog-verWord def-Keyword'>&lt;=</span> ADPInput<span class='verilog-verNumb def-Number'>[0]</span><span class='verilog-verWord def-Keyword'>;</span>
372:                                 end
373:                 <span class='def-Keyword'>endcase</span>
374:         endcase
375:         <span class='def-Keyword'>end</span>
376: <span class='def-Comment def-Syntax'>//*** BE</span>
377: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   BE<span class='def-Keyword'>;</span>
378: <span class='def-Keyword'>assign</span>  BE<span class='verilog-verNumb def-Number'>[0]</span> <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
379:                 <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
380:                 <span class='def-Symbol'>(</span>
381:                 <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
382:                 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5<span class='def-Symbol'>)</span> 
383:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
384:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h3</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>
385:                 <span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
386: <span class='def-Keyword'>assign</span>  BE<span class='verilog-verNumb def-Number'>[1]</span> <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
387:                 <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
388:                 <span class='def-Symbol'>(</span>
389:                 <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
390:                 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5<span class='def-Symbol'>)</span> 
391:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
392:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status7 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h2</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>
393:                 <span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
394: <span class='def-Keyword'>assign</span>  BE<span class='verilog-verNumb def-Number'>[2]</span> <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
395:                 <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
396:                 <span class='def-Symbol'>(</span>
397:                 <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
398:                 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h0</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h1</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>
399:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status4<span class='def-Symbol'>)</span> 
400:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status7<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
401: 
402: <span class='def-Keyword'>assign</span>  BE<span class='verilog-verNumb def-Number'>[3]</span> <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
403:                 <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span>
404:                 <span class='def-Symbol'>(</span>
405:                 <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> 
406:                 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h0</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>BtCounter <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>2'h0</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span>
407:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status7<span class='def-Symbol'>)</span>
408:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status4<span class='def-Symbol'>)</span>
409:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status4<span class='def-Symbol'>)</span>
410:                 <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>Status6 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status5 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status7<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
411: 
412: <span class='def-Comment def-Syntax'>// write</span>
413: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
414:  if<span class='def-Symbol'>(</span>SysReset<span class='def-Symbol'>)</span>   DataOut <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>31'h0</span><span class='verilog-verSymb def-Symbol'>;</span>
415:  else   
416:  if<span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span>
417:  <span class='def-Keyword'>begin</span>
418:         <span class='verilog-verWord def-Keyword'>if</span>(BtoA)
419:         DataOut <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> StoreReg<span class='verilog-verSymb def-Symbol'>;</span>
420:         <span class='verilog-verWord def-Keyword'>else</span>
421:  <span class='def-Keyword'>case</span><span class='verilog-verWord def-Keyword'>(</span><span class='verilog-verWord def-Keyword'>{</span>Status6<span class='verilog-verWord def-Keyword'>,</span> Status5<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>)</span>
422: <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> StoreReg<span class='verilog-verWord def-Keyword'>;</span>
423: <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>  if<span class='verilog-verWord def-Keyword'>(</span>~Status7 &amp; ~Status4<span class='verilog-verWord def-Keyword'>)</span> DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> StoreReg<span class='verilog-verWord def-Keyword'>;</span>
424:         else            
425:         case<span class='verilog-verWord def-Keyword'>(</span>BtCounter<span class='verilog-verWord def-Keyword'>)</span>
426:                 <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> StoreReg<span class='verilog-verWord def-Keyword'>;</span>
427:                 <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> <span class='verilog-verWord def-Keyword'>{</span>StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>,</span> StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>;</span>
428:         <span class='def-Keyword'>endcase</span>
429: <span class='verilog-verNumb def-Number'>2'b11</span><span class='verilog-verSymb def-Symbol'>:</span>  <span class='verilog-verWord def-Keyword'>if</span>(<span class='verilog-verSymb def-Symbol'>~</span>Status7 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>Status4)         DataOut <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> StoreReg<span class='verilog-verSymb def-Symbol'>;</span>
430:         <span class='verilog-verWord def-Keyword'>else</span>
431:         <span class='def-Keyword'>case</span><span class='verilog-verWord def-Keyword'>(</span>BtCounter<span class='verilog-verWord def-Keyword'>)</span>
432:                 <span class='verilog-verNumb def-Number'>2'b00</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> StoreReg<span class='verilog-verWord def-Keyword'>;</span>
433:                 <span class='verilog-verNumb def-Number'>2'b01</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> <span class='verilog-verWord def-Keyword'>{</span>StoreReg[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>16</span>]<span class='verilog-verWord def-Keyword'>,</span> StoreReg[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>;</span>
434:                 <span class='verilog-verNumb def-Number'>2'b10</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> <span class='verilog-verWord def-Keyword'>{</span>StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>,</span> StoreReg[<span class='verilog-verNumb def-Number'>15</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>;</span>
435:                 <span class='verilog-verNumb def-Number'>2'b11</span><span class='verilog-verWord def-Keyword'>:</span>  DataOut <span class='verilog-verWord def-Keyword'>&lt;=</span> <span class='verilog-verWord def-Keyword'>{</span>StoreReg[<span class='verilog-verNumb def-Number'>7</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>,</span> StoreReg[<span class='verilog-verNumb def-Number'>23</span><span class='verilog-verWord def-Keyword'>:</span><span class='verilog-verNumb def-Number'>0</span>]<span class='verilog-verWord def-Keyword'>}</span><span class='verilog-verWord def-Keyword'>;</span>
436:         <span class='def-Keyword'>endcase</span>         
437:  endcase         
438:  <span class='def-Keyword'>end</span>
439: <span class='def-Comment def-Syntax'>// BE</span>
440: 
441: <span class='def-Comment def-Syntax'>//</span>
442: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>negedge InSysClk</span>)      
443:         <span class='def-Keyword'>begin</span>
444:         SAck    <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> Ack<span class='verilog-verSymb def-Symbol'>;</span>
445:         SBerr   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> Berr<span class='verilog-verSymb def-Symbol'>;</span>
446:         SEnd    <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> Ack <span class='verilog-verSymb def-Symbol'>|</span> Berr<span class='verilog-verSymb def-Symbol'>;</span>
447:         <span class='verilog-verWord def-Keyword'>if</span>((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> IDLE) <span class='verilog-verSymb def-Symbol'>|</span> SBerr)
448:         BusErrFlag      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> SBerr<span class='verilog-verSymb def-Symbol'>;</span>
449:         <span class='def-Keyword'>end</span>
450: <span class='def-Comment def-Syntax'>//</span>
451: <span class='def-Keyword'>reg</span>     SDMA_Rd<span class='verilog-verSymb def-Symbol'>,</span> SDMA_Wr<span class='verilog-verSymb def-Symbol'>,</span> DMA_ALE<span class='verilog-verSymb def-Symbol'>,</span> ResRead<span class='verilog-verSymb def-Symbol'>,</span> ResWrite<span class='verilog-verSymb def-Symbol'>,</span> ResALE<span class='def-Keyword'>;</span>
452: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>negedge InSysClk</span>)
453: <span class='def-Keyword'>begin</span>
454: SDMA_Rd <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read)) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError<span class='verilog-verSymb def-Symbol'>;</span>
455: SDMA_Wr <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write)) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError<span class='verilog-verSymb def-Symbol'>;</span>
456: DMA_ALE <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE)) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError <span class='verilog-verSymb def-Symbol'>;</span>
457: 
458: <span class='def-Keyword'>end</span>
459: <span class='def-Comment def-Syntax'>//</span>
460: <span class='def-Keyword'>reg</span>     DMA_DataOutEn<span class='def-Keyword'>;</span>
461: <span class='verilog-verWord def-Keyword'>always</span>  @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
462:         <span class='def-Keyword'>begin</span>
463:         ResRead         <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read) <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd<span class='verilog-verSymb def-Symbol'>;</span>
464:         ResWrite        <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write) <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd<span class='verilog-verSymb def-Symbol'>;</span>
465:         ResALE          <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE)<span class='verilog-verSymb def-Symbol'>;</span>
466:         SDMA_DataEn     <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError) <span class='verilog-verSymb def-Symbol'>|</span> ((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>SEnd)<span class='verilog-verSymb def-Symbol'>;</span>
467:         DMA_Burst       <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
468:         DMA_IntReq      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span>  Status14 <span class='verilog-verSymb def-Symbol'>&amp;</span> Status15<span class='verilog-verSymb def-Symbol'>;</span>
469: 
470:         <span class='def-Keyword'>end</span>
471: <span class='def-Keyword'>assign</span>  DMA_DataEn      <span class='verilog-verSymb def-Symbol'>=</span> SDMA_DataEn <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>DMA_ALE<span class='def-Keyword'>;</span>
472: 
473: <span class='verilog-verComment def-Comment def-Syntax'>/*</span>
474: <span class='verilog-verComment def-Comment def-Syntax'>always @(ResRead)</span>
475: <span class='verilog-verComment def-Comment def-Syntax'>        if(ResRead)     assign  DMA_Rd  = 0;</span>
476: <span class='verilog-verComment def-Comment def-Syntax'>        else            deassign DMA_Rd;</span>
477: <span class='verilog-verComment def-Comment def-Syntax'>always @(ResWrite)</span>
478: <span class='verilog-verComment def-Comment def-Syntax'>        if(ResWrite)    assign  DMA_Wr  = 0;</span>
479: <span class='verilog-verComment def-Comment def-Syntax'>        else            deassign DMA_Wr;</span>
480: <span class='verilog-verComment def-Comment def-Syntax'>*/</span>
481: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>ResALE</span>)
482:         if<span class='def-Symbol'>(</span>ResALE<span class='def-Symbol'>)</span>      <span class='def-Keyword'>assign</span>  DMA_ALE <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='def-Keyword'>;</span>
483:         else            deassign        DMA_ALE<span class='verilog-verSymb def-Symbol'>;</span>
484: <span class='def-Comment def-Syntax'>//</span>
485: <span class='def-Keyword'>wire</span>    DMA_Rd<span class='verilog-verSymb def-Symbol'>,</span> DMA_Wr<span class='verilog-verSymb def-Symbol'>,</span> ResReadAsync<span class='verilog-verSymb def-Symbol'>,</span> ResWriteAsync<span class='def-Keyword'>;</span>
486: <span class='def-Keyword'>assign</span>  ResWriteAsync   <span class='verilog-verSymb def-Symbol'>=</span> ResWrite <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd<span class='def-Keyword'>;</span>
487: <span class='def-Keyword'>assign</span>  ResReadAsync    <span class='verilog-verSymb def-Symbol'>=</span> ResRead <span class='verilog-verSymb def-Symbol'>&amp;</span> SEnd<span class='def-Keyword'>;</span>
488: <span class='def-Keyword'>assign</span>  DMA_Rd  <span class='verilog-verSymb def-Symbol'>=</span> SDMA_Rd <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ResReadAsync<span class='def-Keyword'>;</span>
489: <span class='def-Keyword'>assign</span>  DMA_Wr  <span class='verilog-verSymb def-Symbol'>=</span> SDMA_Wr <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ResWriteAsync<span class='def-Keyword'>;</span>
490: 
491: <span class='def-Comment def-Syntax'>//</span>
492: <span class='def-Keyword'>wire</span>    <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>  AdrOut<span class='def-Keyword'>;</span>
493: <span class='def-Keyword'>assign</span>  AdrOut  <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>AtoB <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state<span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>BtoA <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> CurrentAdr_A <span class='verilog-verSymb def-Symbol'>:</span> CurrentAdr_B<span class='def-Keyword'>;</span>
494: <span class='def-Keyword'>assign</span>  DMA_ADOutput    <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMA_ALE<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> <span class='def-SymbolStrong def-Symbol'>{</span>AdrOut<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>4</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>BE<span class='def-SymbolStrong def-Symbol'>}</span> <span class='verilog-verSymb def-Symbol'>:</span> <span class='def-Symbol'>(</span>DMAReg_Out<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>?</span> RegOut <span class='verilog-verSymb def-Symbol'>:</span> DataOut<span class='def-Keyword'>;</span>
495: <span class='def-Keyword'>assign</span>  DMA_ADOutEn     <span class='verilog-verSymb def-Symbol'>=</span> DMA_ALE <span class='verilog-verSymb def-Symbol'>|</span> DMA_DataOutEn <span class='verilog-verSymb def-Symbol'>|</span> DMAReg_Out<span class='def-Keyword'>;</span> 
496: <span class='def-Comment def-Syntax'>//</span>
497: <span class='def-Keyword'>reg</span>     <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span>   DMA_Adr3_2<span class='def-Keyword'>;</span>
498: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>negedge InSysClk</span>)
499:         <span class='def-Keyword'>begin</span>
500:         <span class='verilog-verWord def-Keyword'>if</span>((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE))
501:         DMA_Adr3_2      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span>  AdrOut<span class='verilog-verSymb def-Symbol'>[</span><span class='verilog-verNumb def-Number'>3</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>2</span><span class='verilog-verSymb def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>;</span>
502: 
503:         DMA_DataOutEn   <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> (((state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE) <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>ParError) <span class='verilog-verSymb def-Symbol'>|</span> (state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write))<span class='verilog-verSymb def-Symbol'>;</span>
504: 
505:         <span class='def-Keyword'>end</span>
506: <span class='def-Comment def-Syntax'>//</span>
507: <span class='def-Keyword'>assign</span>  DMA_Cycle       <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>DMA_BusReq <span class='verilog-verSymb def-Symbol'>&amp;</span> BusGnt<span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
508: <span class='verilog-verWord def-Keyword'>always</span> @(<span class='verilog-verString def-String'>posedge InSysClk</span>)
509:         DMA_BusReq      <span class='verilog-verSymb def-Symbol'>&lt;</span><span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> BUS_REQ<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> READ<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Read<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WRITE<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> WAIT_ACK_Write<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> DEL_AFTER_READ<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>state <span class='verilog-verSymb def-Symbol'>=</span><span class='verilog-verSymb def-Symbol'>=</span> ERROR<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
510: 
511: <span class='def-Comment def-Syntax'>//*********** parity section</span>
512: <span class='def-Keyword'>wire</span>    DMA_ParErr0<span class='verilog-verSymb def-Symbol'>,</span> DMA_ParErr1<span class='verilog-verSymb def-Symbol'>,</span> DMA_ParErr2<span class='verilog-verSymb def-Symbol'>,</span> DMA_ParErr3<span class='def-Keyword'>;</span>
513: <span class='def-Keyword'>assign</span>  DMA_ADPOutEn    <span class='verilog-verSymb def-Symbol'>=</span> DMA_DataOutEn <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='verilog-verSymb def-Symbol'>~</span>DMA_ALE<span class='def-Keyword'>;</span>
514: 
515: <span class='def-Keyword'>assign</span>  DMA_ADPOutput<span class='verilog-verNumb def-Number'>[0]</span>        <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span>DataOut<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span><span class='def-Keyword'>;</span>
516: <span class='def-Keyword'>assign</span>  DMA_ADPOutput<span class='verilog-verNumb def-Number'>[1]</span>        <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span>DataOut<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>15</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>8</span><span class='def-Symbol'>]</span><span class='def-Keyword'>;</span>
517: <span class='def-Keyword'>assign</span>  DMA_ADPOutput<span class='verilog-verNumb def-Number'>[2]</span>        <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span>DataOut<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>23</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>16</span><span class='def-Symbol'>]</span><span class='def-Keyword'>;</span>
518: <span class='def-Keyword'>assign</span>  DMA_ADPOutput<span class='verilog-verNumb def-Number'>[3]</span>        <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span>DataOut<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>24</span><span class='def-Symbol'>]</span><span class='def-Keyword'>;</span>
519: <span class='def-Comment def-Syntax'>//</span>
520: <span class='def-Keyword'>assign</span>  DMA_ParErr3     <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span><span class='def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>{</span>StoreReg<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>31</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>24</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> StoreParReg<span class='verilog-verNumb def-Number'>[3]</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
521: <span class='def-Keyword'>assign</span>  DMA_ParErr2     <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span><span class='def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>{</span>StoreReg<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>23</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>16</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> StoreParReg<span class='verilog-verNumb def-Number'>[2]</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
522: <span class='def-Keyword'>assign</span>  DMA_ParErr1     <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span><span class='def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>{</span>StoreReg<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>15</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>8</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> StoreParReg<span class='verilog-verNumb def-Number'>[1]</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
523: <span class='def-Keyword'>assign</span>  DMA_ParErr0     <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verSymb def-Symbol'>^</span><span class='def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>{</span>StoreReg<span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span><span class='verilog-verSymb def-Symbol'>,</span> StoreParReg<span class='verilog-verNumb def-Number'>[0]</span><span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
524: 
525: <span class='def-Keyword'>assign</span>  ParError        <span class='verilog-verSymb def-Symbol'>=</span> Status9 <span class='verilog-verSymb def-Symbol'>&amp;</span> <span class='def-Symbol'>(</span>DMA_ParErr0 <span class='verilog-verSymb def-Symbol'>|</span> DMA_ParErr1 <span class='verilog-verSymb def-Symbol'>|</span> DMA_ParErr2 <span class='verilog-verSymb def-Symbol'>|</span> DMA_ParErr3<span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
526: 
527: <span class='verilog-verWord def-Keyword'>endmodule</span>
528: 
