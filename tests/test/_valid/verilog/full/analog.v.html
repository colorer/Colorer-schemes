  0: <span class='def-Comment def-Syntax'>//title netlist for analog to digital converter</span>
  1: <span class='def-Comment def-Syntax'>// file adc_gate.v</span>
  2: <span class='verilog-verComment def-Comment def-Syntax'>/*      This file demonstrates the following capabilities for SILOS III for</span>
  3: <span class='verilog-verComment def-Comment def-Syntax'>    mixed analog and digital simulation:</span>
  4: <span class='verilog-verComment def-Comment def-Syntax'>    -  passing analog values in module ports</span>
  5: <span class='verilog-verComment def-Comment def-Syntax'>    -  modeling a simple analog comparator</span>
  6: <span class='verilog-verComment def-Comment def-Syntax'>    -  modeling a simple digital to analog converter</span>
  7: <span class='verilog-verComment def-Comment def-Syntax'>    -  nested `define macros (OVI 2.0 feature)</span>
  8: <span class='verilog-verComment def-Comment def-Syntax'>    -  UDP primitives for D flip-flop and JK flip-flop</span>
  9: <span class='verilog-verComment def-Comment def-Syntax'>*/</span>
 10: 
 11: <span class='def-Error'>!con</span> <span class='def-Error'>.ext=all</span>        <span class='def-Comment def-Syntax'>// This is a switch to allow the SILOS III analog extensions</span>
 12: 
 13: <span class='def-Directive'>`define</span> <span class='def-Keyword'>abs1(a)</span> <span class='def-Identifier'>(((a)&lt;0)?-(a):(a))</span>
 14: <span class='def-Directive'>`define</span> <span class='def-Keyword'>close(a,b)</span> <span class='def-Identifier'>(`abs1(a-b) &lt; 0.01) ? 1:0</span>
 15: <span class='def-Directive'>`define</span> <span class='def-Keyword'>high</span>  <span class='def-Identifier'>'b1                       </span>
 16: <span class='def-Directive'>`define</span> <span class='def-Keyword'>low</span>   <span class='def-Identifier'>'b0</span>
 17: 
 18: <span class='def-Comment def-Syntax'>// this module defines the stimulus and instantiates the circuit</span>
 19: 
 20: <span class='def-Directive'>`timescale</span> <span class='def-Keyword'>1ns</span> / <span class='def-Keyword'>1ns</span>
 21: 
 22: <span class='verilog-verWord def-Keyword'>module top</span><span class='verilog-verSymb def-Symbol'>;</span>
 23:     <span class='def-Keyword'>wire</span>     up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='def-Keyword'>;</span>       
 24:     real  analog_in<span class='verilog-verSymb def-Symbol'>;</span>
 25:     <span class='def-Keyword'>wire</span> real  feedback<span class='def-Keyword'>;</span>
 26:     <span class='def-Keyword'>wire</span> <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> count<span class='def-Keyword'>;</span>
 27:     <span class='def-Keyword'>reg</span> <span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> in<span class='def-Keyword'>;</span>
 28:     <span class='def-Keyword'>reg</span>     clock<span class='def-Keyword'>;</span>
 29:     <span class='def-Keyword'>wire</span>    down_up<span class='def-Keyword'>;</span>
 30:     <span class='def-Keyword'>wire</span>    enable<span class='def-Keyword'>;</span>
 31:     <span class='def-Keyword'>reg</span>     load_inputs<span class='def-Keyword'>;</span>
 32:     <span class='def-Keyword'>reg</span>     clear<span class='def-Keyword'>;</span>
 33:     integer counter_value<span class='verilog-verSymb def-Symbol'>;</span>
 34: 
 35:     comparator comp<span class='def-Symbol'>(</span>analog_in<span class='verilog-verSymb def-Symbol'>,</span>feedback<span class='verilog-verSymb def-Symbol'>,</span>up<span class='verilog-verSymb def-Symbol'>,</span>down<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 36:     dac dig2an<span class='def-Symbol'>(</span>feedback<span class='verilog-verSymb def-Symbol'>,</span> count<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 37:     sr_flop_gate sr_flop<span class='def-Symbol'>(</span>up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 38:     counter_gate counter <span class='def-Symbol'>(</span>in<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='verilog-verSymb def-Symbol'>,</span> load_inputs<span class='verilog-verSymb def-Symbol'>,</span> count<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 39: 
 40:     initial
 41:         <span class='def-Keyword'>begin</span>
 42:         clock <span class='verilog-verSymb def-Symbol'>=</span> 'b0<span class='verilog-verSymb def-Symbol'>;</span>
 43:         forever
 44:             <span class='def-Keyword'>begin</span>
 45:             #<span class='verilog-verNumb def-Number'>2000</span> clock <span class='verilog-verSymb def-Symbol'>=</span> 'b1<span class='verilog-verSymb def-Symbol'>;</span>
 46:             #<span class='verilog-verNumb def-Number'>2000</span> clock <span class='verilog-verSymb def-Symbol'>=</span> 'b0<span class='verilog-verSymb def-Symbol'>;</span>
 47:             #<span class='verilog-verNumb def-Number'>500</span> clock <span class='verilog-verSymb def-Symbol'>=</span> 'b1<span class='verilog-verSymb def-Symbol'>;</span>
 48:             <span class='def-Keyword'>end</span>
 49:         <span class='def-Keyword'>end</span>
 50:     initial
 51:         fork
 52:                  in <span class='verilog-verSymb def-Symbol'>=</span> 'b0<span class='verilog-verSymb def-Symbol'>;</span>
 53: 
 54:                  clear <span class='verilog-verSymb def-Symbol'>=</span> 'b0<span class='verilog-verSymb def-Symbol'>;</span>
 55:             #<span class='verilog-verNumb def-Number'>100</span> clear <span class='verilog-verSymb def-Symbol'>=</span> 'b1<span class='verilog-verSymb def-Symbol'>;</span>
 56: 
 57:                  load_inputs <span class='verilog-verSymb def-Symbol'>=</span> 'b1<span class='verilog-verSymb def-Symbol'>;</span>
 58:             #<span class='verilog-verNumb def-Number'>1</span>   load_inputs <span class='verilog-verSymb def-Symbol'>=</span> 'b0<span class='verilog-verSymb def-Symbol'>;</span>
 59:             #<span class='verilog-verNumb def-Number'>600</span> load_inputs <span class='verilog-verSymb def-Symbol'>=</span> 'b1<span class='verilog-verSymb def-Symbol'>;</span>
 60: 
 61:                  analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
 62:             #1k  analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>;</span>
 63:             #30k analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
 64:             #50k analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>8</span><span class='verilog-verSymb def-Symbol'>;</span>
 65:             #90k analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
 66:             #130k analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>5</span><span class='verilog-verSymb def-Symbol'>;</span>
 67:             #150k analog_in <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
 68:             #180k $finish<span class='verilog-verSymb def-Symbol'>;</span>
 69:         join
 70:     always @count counter_value <span class='verilog-verSymb def-Symbol'>=</span> integer<span class='def-Symbol'>(</span>feedback*<span class='verilog-verNumb def-Number'>10</span><span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 71: <span class='verilog-verWord def-Keyword'>endmodule</span>
 72: 
 73: <span class='def-Comment def-Syntax'>// this module models an analog comparator</span>
 74: <span class='verilog-verWord def-Keyword'>module comparator</span><span class='def-Symbol'>(</span>analog_in<span class='verilog-verSymb def-Symbol'>,</span>feedback<span class='verilog-verSymb def-Symbol'>,</span>up<span class='verilog-verSymb def-Symbol'>,</span>down<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>  <span class='def-Comment def-Syntax'>// analog signals are passed in</span>
 75:     <span class='def-Keyword'>input</span> analog_in<span class='verilog-verSymb def-Symbol'>,</span>feedback<span class='def-Keyword'>;</span>
 76:     <span class='def-Keyword'>output</span> up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='def-Keyword'>;</span>
 77:     real analog_in<span class='verilog-verSymb def-Symbol'>,</span>feedback<span class='verilog-verSymb def-Symbol'>;</span>                <span class='def-Comment def-Syntax'>// ports (analog_in, feedback)</span>
 78:     <span class='def-Keyword'>reg</span> up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='def-Keyword'>;</span>
 79:     always
 80:         <span class='def-Keyword'>begin</span>
 81:             @ (analog_in or feedback)<span class='verilog-verSymb def-Symbol'>;</span>
 82:             up <span class='verilog-verSymb def-Symbol'>=</span> `low<span class='verilog-verSymb def-Symbol'>;</span>
 83:             down <span class='verilog-verSymb def-Symbol'>=</span> `low<span class='verilog-verSymb def-Symbol'>;</span>
 84:             <span class='verilog-verWord def-Keyword'>if</span> (!`close(analog_in<span class='verilog-verSymb def-Symbol'>,</span>feedback))
 85:                 <span class='def-Keyword'>begin</span>
 86:                 <span class='verilog-verWord def-Keyword'>if</span> ( analog_in <span class='verilog-verSymb def-Symbol'>></span> feedback )
 87:                     up <span class='verilog-verSymb def-Symbol'>=</span> `high<span class='verilog-verSymb def-Symbol'>;</span>
 88:                 <span class='verilog-verWord def-Keyword'>else</span> <span class='verilog-verWord def-Keyword'>if</span> ( analog_in <span class='verilog-verSymb def-Symbol'>&lt;</span> feedback )
 89:                     down <span class='verilog-verSymb def-Symbol'>=</span> `high<span class='verilog-verSymb def-Symbol'>;</span>
 90:                 <span class='def-Keyword'>end</span>
 91:         <span class='def-Keyword'>end</span>
 92: <span class='verilog-verWord def-Keyword'>endmodule</span>
 93: 
 94: <span class='def-Comment def-Syntax'>//this module models a digital to analog converter</span>
 95: <span class='verilog-verWord def-Keyword'>module dac</span><span class='def-Symbol'>(</span>feedback<span class='verilog-verSymb def-Symbol'>,</span> count<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
 96:     <span class='def-Keyword'>input</span><span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> count<span class='def-Keyword'>;</span>
 97:     <span class='def-Keyword'>output</span> feedback<span class='def-Keyword'>;</span>
 98:     real feedback<span class='verilog-verSymb def-Symbol'>;</span>
 99:     initial
100:         feedback <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
101:     always
102:         @ <span class='def-Symbol'>(</span>count<span class='def-Symbol'>)</span> #<span class='verilog-verNumb def-Number'>121</span> feedback <span class='verilog-verSymb def-Symbol'>=</span> real<span class='def-Symbol'>(</span>integer<span class='def-Symbol'>(</span>count<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span> / <span class='verilog-verNumb def-Number'>10</span><span class='verilog-verSymb def-Symbol'>.</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
103: <span class='verilog-verWord def-Keyword'>endmodule</span>
104: 
105: <span class='def-Comment def-Syntax'>//  Gate level latching logic</span>
106: <span class='verilog-verWord def-Keyword'>module sr_flop_gate</span> <span class='def-Symbol'>(</span>up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
107:     <span class='def-Comment def-Syntax'>// this module models latching circuitry at the gate level:</span>
108:     supply1 vdd<span class='verilog-verSymb def-Symbol'>;</span>
109:     <span class='def-Keyword'>input</span> up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Keyword'>;</span>
110:     <span class='def-Keyword'>output</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='def-Keyword'>;</span>
111:     <span class='def-Keyword'>wire</span> up<span class='verilog-verSymb def-Symbol'>,</span> down<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Keyword'>;</span>
112:     <span class='def-Keyword'>wire</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='def-Keyword'>;</span>
113:     and     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>320</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>280</span><span class='def-Symbol'>)</span> 
114:         <span class='def-Symbol'>(</span>and1<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> up<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
115:         <span class='def-Symbol'>(</span>and2<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
116:         <span class='def-Symbol'>(</span>and3<span class='verilog-verSymb def-Symbol'>,</span> ff1_q<span class='verilog-verSymb def-Symbol'>,</span> ff2_qb<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
117:         <span class='def-Symbol'>(</span>down_up<span class='verilog-verSymb def-Symbol'>,</span> ff2_q<span class='verilog-verSymb def-Symbol'>,</span> ff1_qb<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
118:     and     #<span class='verilog-verNumb def-Number'>330</span>
119:         <span class='def-Symbol'>(</span>clock_d<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
120:     nor     #<span class='verilog-verNumb def-Number'>150</span> nor1 <span class='def-Symbol'>(</span>enable<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> and3<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
121:     
122:     d_flip_flop     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>220</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>210</span><span class='def-Symbol'>)</span>
123:             <span class='def-Symbol'>(</span>ff1_q<span class='verilog-verSymb def-Symbol'>,</span> clock_d<span class='verilog-verSymb def-Symbol'>,</span> and1<span class='verilog-verSymb def-Symbol'>,</span> vdd<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
124:             <span class='def-Symbol'>(</span>ff2_q<span class='verilog-verSymb def-Symbol'>,</span> clock_d<span class='verilog-verSymb def-Symbol'>,</span> and2<span class='verilog-verSymb def-Symbol'>,</span> vdd<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
125:     not     <span class='def-Symbol'>(</span>ff1_qb<span class='verilog-verSymb def-Symbol'>,</span>ff1_q<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
126:         <span class='def-Symbol'>(</span>ff2_qb<span class='verilog-verSymb def-Symbol'>,</span>ff2_q<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
127: <span class='verilog-verWord def-Keyword'>endmodule</span>
128: 
129: <span class='def-Comment def-Syntax'>// ls191 up-down counter</span>
130: <span class='verilog-verWord def-Keyword'>module ls191</span> <span class='def-Symbol'>(</span>d<span class='verilog-verSymb def-Symbol'>,</span>b<span class='verilog-verSymb def-Symbol'>,</span>c<span class='verilog-verSymb def-Symbol'>,</span>a<span class='verilog-verSymb def-Symbol'>,</span> clk<span class='verilog-verSymb def-Symbol'>,</span> du<span class='verilog-verSymb def-Symbol'>,</span> ct<span class='verilog-verSymb def-Symbol'>,</span> ld<span class='verilog-verSymb def-Symbol'>,</span> od<span class='verilog-verSymb def-Symbol'>,</span> oc<span class='verilog-verSymb def-Symbol'>,</span> ob<span class='verilog-verSymb def-Symbol'>,</span> oa<span class='verilog-verSymb def-Symbol'>,</span> rco<span class='verilog-verSymb def-Symbol'>,</span> mo<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
131:     <span class='def-Keyword'>input</span> a<span class='verilog-verSymb def-Symbol'>,</span>b<span class='verilog-verSymb def-Symbol'>,</span>c<span class='verilog-verSymb def-Symbol'>,</span>d<span class='verilog-verSymb def-Symbol'>,</span>clk<span class='verilog-verSymb def-Symbol'>,</span>du<span class='verilog-verSymb def-Symbol'>,</span>ct<span class='verilog-verSymb def-Symbol'>,</span>ld<span class='def-Keyword'>;</span>
132:     <span class='def-Keyword'>output</span> oa<span class='verilog-verSymb def-Symbol'>,</span>ob<span class='verilog-verSymb def-Symbol'>,</span>oc<span class='verilog-verSymb def-Symbol'>,</span>od<span class='verilog-verSymb def-Symbol'>,</span>rco<span class='verilog-verSymb def-Symbol'>,</span>mo<span class='def-Keyword'>;</span>
133:     <span class='def-Keyword'>wire</span> clk<span class='def-Keyword'>;</span>
134:     <span class='def-Keyword'>wire</span> a<span class='verilog-verSymb def-Symbol'>,</span>b<span class='verilog-verSymb def-Symbol'>,</span>c<span class='verilog-verSymb def-Symbol'>,</span>d<span class='verilog-verSymb def-Symbol'>,</span>du<span class='verilog-verSymb def-Symbol'>,</span>ct<span class='verilog-verSymb def-Symbol'>,</span>ld<span class='def-Keyword'>;</span>
135:     <span class='def-Keyword'>wire</span> s0<span class='verilog-verSymb def-Symbol'>,</span> s1<span class='verilog-verSymb def-Symbol'>,</span> s2<span class='verilog-verSymb def-Symbol'>,</span> s3<span class='def-Keyword'>;</span>
136:     <span class='def-Keyword'>wire</span> c0<span class='verilog-verSymb def-Symbol'>,</span> c1<span class='verilog-verSymb def-Symbol'>,</span> c2<span class='verilog-verSymb def-Symbol'>,</span> c3<span class='def-Keyword'>;</span>
137:     
138:     jk_flip_flop
139:         <span class='def-Symbol'>(</span>q0<span class='verilog-verSymb def-Symbol'>,</span> ck<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>ct<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>ct<span class='verilog-verSymb def-Symbol'>,</span> s0<span class='verilog-verSymb def-Symbol'>,</span> c0<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
140:         <span class='def-Symbol'>(</span>q1<span class='verilog-verSymb def-Symbol'>,</span> ck<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d1<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d1<span class='verilog-verSymb def-Symbol'>,</span> s1<span class='verilog-verSymb def-Symbol'>,</span> c1<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
141:         <span class='def-Symbol'>(</span>q2<span class='verilog-verSymb def-Symbol'>,</span> ck<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d2<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d2<span class='verilog-verSymb def-Symbol'>,</span> s2<span class='verilog-verSymb def-Symbol'>,</span> c2<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
142:         <span class='def-Symbol'>(</span>q3<span class='verilog-verSymb def-Symbol'>,</span> ck<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d3<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>d3<span class='verilog-verSymb def-Symbol'>,</span> s3<span class='verilog-verSymb def-Symbol'>,</span> c3<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
143:     not     <span class='def-Symbol'>(</span>q0n<span class='verilog-verSymb def-Symbol'>,</span>q0<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
144:         <span class='def-Symbol'>(</span>q1n<span class='verilog-verSymb def-Symbol'>,</span>q1<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
145:         <span class='def-Symbol'>(</span>q2n<span class='verilog-verSymb def-Symbol'>,</span>q2<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
146:         <span class='def-Symbol'>(</span>q3n<span class='verilog-verSymb def-Symbol'>,</span>q3<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
147:     and     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>240</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>360</span><span class='def-Symbol'>)</span>
148:         <span class='def-Symbol'>(</span>oa<span class='verilog-verSymb def-Symbol'>,</span> q0<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
149:         <span class='def-Symbol'>(</span>ob<span class='verilog-verSymb def-Symbol'>,</span> q1<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
150:         <span class='def-Symbol'>(</span>oc<span class='verilog-verSymb def-Symbol'>,</span> q2<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
151:         <span class='def-Symbol'>(</span>od<span class='verilog-verSymb def-Symbol'>,</span> q3<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
152:     <span class='def-Comment def-Syntax'>// rc output</span>
153:     not     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>210</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>250</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>(</span>tcd<span class='verilog-verSymb def-Symbol'>,</span> tc<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
154:     nand    #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>200</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>240</span><span class='def-Symbol'>)</span> <span class='def-Symbol'>(</span>rco<span class='verilog-verSymb def-Symbol'>,</span> clk<span class='verilog-verSymb def-Symbol'>,</span> ctnd<span class='verilog-verSymb def-Symbol'>,</span> tcd<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
155:     <span class='def-Comment def-Syntax'>// tc output</span>
156:     and     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>90</span><span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verNumb def-Number'>190</span><span class='def-Symbol'>)</span>
157:         <span class='def-Symbol'>(</span>n53<span class='verilog-verSymb def-Symbol'>,</span> q0<span class='verilog-verSymb def-Symbol'>,</span> q1<span class='verilog-verSymb def-Symbol'>,</span> q2<span class='verilog-verSymb def-Symbol'>,</span> q3<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
158:         <span class='def-Symbol'>(</span>n54<span class='verilog-verSymb def-Symbol'>,</span>  q0n<span class='verilog-verSymb def-Symbol'>,</span> q1n<span class='verilog-verSymb def-Symbol'>,</span> q2n<span class='verilog-verSymb def-Symbol'>,</span> q3n<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
159:     <span class='def-Comment def-Syntax'>//aoi   </span>
160:     <span class='def-Keyword'>assign</span>  tc <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span><span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span>du<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>&amp;</span> n53<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>du <span class='verilog-verSymb def-Symbol'>&amp;</span> n54<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
161:     and     #<span class='verilog-verNumb def-Number'>330</span> <span class='def-Symbol'>(</span>mo<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>tc<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
162:     <span class='def-Comment def-Syntax'>// other logic</span>
163:     nor
164:         <span class='def-Symbol'>(</span>cue<span class='verilog-verSymb def-Symbol'>,</span> du<span class='verilog-verSymb def-Symbol'>,</span> ct<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
165:         <span class='def-Symbol'>(</span>ce<span class='verilog-verSymb def-Symbol'>,</span> <span class='verilog-verSymb def-Symbol'>~</span>du<span class='verilog-verSymb def-Symbol'>,</span> ct<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
166:     nand    
167:         <span class='def-Symbol'>(</span>s0<span class='verilog-verSymb def-Symbol'>,</span> ad<span class='verilog-verSymb def-Symbol'>,</span> ldnd<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
168:         <span class='def-Symbol'>(</span>c0<span class='verilog-verSymb def-Symbol'>,</span> s0<span class='verilog-verSymb def-Symbol'>,</span> ldne<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
169:         <span class='def-Symbol'>(</span>s1<span class='verilog-verSymb def-Symbol'>,</span> bd<span class='verilog-verSymb def-Symbol'>,</span> ldnd<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
170:         <span class='def-Symbol'>(</span>c1<span class='verilog-verSymb def-Symbol'>,</span> s1<span class='verilog-verSymb def-Symbol'>,</span> ldne<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
171:         <span class='def-Symbol'>(</span>s2<span class='verilog-verSymb def-Symbol'>,</span> cd<span class='verilog-verSymb def-Symbol'>,</span> ldnd<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
172:         <span class='def-Symbol'>(</span>c2<span class='verilog-verSymb def-Symbol'>,</span> s2<span class='verilog-verSymb def-Symbol'>,</span> ldne<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
173:         <span class='def-Symbol'>(</span>s3<span class='verilog-verSymb def-Symbol'>,</span> dd<span class='verilog-verSymb def-Symbol'>,</span> ldnd<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
174:         <span class='def-Symbol'>(</span>c3<span class='verilog-verSymb def-Symbol'>,</span> s3<span class='verilog-verSymb def-Symbol'>,</span> ldne<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
175:     
176:     <span class='def-Comment def-Syntax'>// aoi logic</span>
177:     <span class='def-Keyword'>assign</span>  d1 <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span><span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>ce <span class='verilog-verSymb def-Symbol'>&amp;</span> q0n<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span> q0 <span class='verilog-verSymb def-Symbol'>&amp;</span> cue<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
178:     <span class='def-Keyword'>assign</span>  d2 <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span><span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>ce <span class='verilog-verSymb def-Symbol'>&amp;</span> q0n <span class='verilog-verSymb def-Symbol'>&amp;</span> q1n<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>q0 <span class='verilog-verSymb def-Symbol'>&amp;</span> q1 <span class='verilog-verSymb def-Symbol'>&amp;</span> cue<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
179:     <span class='def-Keyword'>assign</span>  d3 <span class='verilog-verSymb def-Symbol'>=</span> <span class='def-Symbol'>(</span><span class='verilog-verSymb def-Symbol'>~</span><span class='def-Symbol'>(</span><span class='def-Symbol'>(</span>ce <span class='verilog-verSymb def-Symbol'>&amp;</span> q0n <span class='verilog-verSymb def-Symbol'>&amp;</span> q1n <span class='verilog-verSymb def-Symbol'>&amp;</span> q2n<span class='def-Symbol'>)</span> <span class='verilog-verSymb def-Symbol'>|</span> <span class='def-Symbol'>(</span>q0 <span class='verilog-verSymb def-Symbol'>&amp;</span> q1 <span class='verilog-verSymb def-Symbol'>&amp;</span> q2 <span class='verilog-verSymb def-Symbol'>&amp;</span> cue<span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Symbol'>)</span><span class='def-Keyword'>;</span>
180:     not
181:          <span class='def-Symbol'>(</span>ck<span class='verilog-verSymb def-Symbol'>,</span> clk<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
182:     and     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>80</span><span class='verilog-verSymb def-Symbol'>,</span><span class='verilog-verNumb def-Number'>40</span><span class='def-Symbol'>)</span>
183:          <span class='def-Symbol'>(</span>ad<span class='verilog-verSymb def-Symbol'>,</span> a<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
184:         <span class='def-Symbol'>(</span>bd<span class='verilog-verSymb def-Symbol'>,</span> b<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
185:         <span class='def-Symbol'>(</span>cd<span class='verilog-verSymb def-Symbol'>,</span> c<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
186:         <span class='def-Symbol'>(</span>dd<span class='verilog-verSymb def-Symbol'>,</span> d<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
187:     not     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>90</span><span class='verilog-verSymb def-Symbol'>,</span><span class='verilog-verNumb def-Number'>130</span><span class='def-Symbol'>)</span>
188:         <span class='def-Symbol'>(</span>ctnd<span class='verilog-verSymb def-Symbol'>,</span> ct<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
189:     not     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>90</span><span class='verilog-verSymb def-Symbol'>,</span><span class='verilog-verNumb def-Number'>1</span><span class='def-Symbol'>)</span>
190:         <span class='def-Symbol'>(</span>ldnd<span class='verilog-verSymb def-Symbol'>,</span> ld<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
191:     not     #<span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>40</span><span class='verilog-verSymb def-Symbol'>,</span><span class='verilog-verNumb def-Number'>1</span><span class='def-Symbol'>)</span>
192:         <span class='def-Symbol'>(</span>ldne<span class='verilog-verSymb def-Symbol'>,</span> ld<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
193: <span class='verilog-verWord def-Keyword'>endmodule</span>
194: 
195: <span class='def-Comment def-Syntax'>// 8-bit up/down counter</span>
196: <span class='verilog-verWord def-Keyword'>module counter_gate</span> <span class='def-Symbol'>(</span>in<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='verilog-verSymb def-Symbol'>,</span> load_inputs<span class='verilog-verSymb def-Symbol'>,</span> count<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
197:     <span class='def-Keyword'>input</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='verilog-verSymb def-Symbol'>,</span> load_inputs<span class='def-Keyword'>;</span>
198:     <span class='def-Keyword'>input</span><span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> in<span class='def-Keyword'>;</span>
199:     <span class='def-Keyword'>output</span><span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> count<span class='def-Keyword'>;</span>
200:     <span class='def-Keyword'>wire</span> ripple_clk<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='def-Keyword'>;</span> 
201:     <span class='def-Keyword'>wire</span> clock<span class='verilog-verSymb def-Symbol'>,</span> load_inputs<span class='def-Keyword'>;</span>
202:     <span class='def-Keyword'>wire</span><span class='def-Symbol'>[</span><span class='verilog-verNumb def-Number'>7</span><span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='def-Symbol'>]</span> in<span class='def-Keyword'>;</span>
203: 
204:     ls191   ls191_1 <span class='def-Symbol'>(</span>in<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[2]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[1]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[0]</span><span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> enable<span class='verilog-verSymb def-Symbol'>,</span> load_inputs<span class='verilog-verSymb def-Symbol'>,</span>
205:          count<span class='verilog-verNumb def-Number'>[3]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[2]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[1]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[0]</span><span class='verilog-verSymb def-Symbol'>,</span> ripple_clk<span class='verilog-verSymb def-Symbol'>,</span>foo<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>,</span>
206:         ls191_2 <span class='def-Symbol'>(</span>in<span class='verilog-verNumb def-Number'>[7]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[6]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[5]</span><span class='verilog-verSymb def-Symbol'>,</span>in<span class='verilog-verNumb def-Number'>[4]</span><span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> down_up<span class='verilog-verSymb def-Symbol'>,</span> ripple_clk<span class='verilog-verSymb def-Symbol'>,</span> 
207:         load_inputs<span class='verilog-verSymb def-Symbol'>,</span>  count<span class='verilog-verNumb def-Number'>[7]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[6]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[5]</span><span class='verilog-verSymb def-Symbol'>,</span>count<span class='verilog-verNumb def-Number'>[4]</span><span class='verilog-verSymb def-Symbol'>,</span> foo<span class='verilog-verSymb def-Symbol'>,</span>foo<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span> 
208: <span class='verilog-verWord def-Keyword'>endmodule</span>
209: 
210: <span class='def-Comment def-Syntax'>// d flip-flop udp primitive</span>
211: <span class='verilog-verWord def-Keyword'>primitive d_flip_flop</span> <span class='def-Symbol'>(</span>q<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> data<span class='verilog-verSymb def-Symbol'>,</span> set<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
212:     <span class='def-Keyword'>input</span> clock<span class='verilog-verSymb def-Symbol'>,</span> data<span class='verilog-verSymb def-Symbol'>,</span> set<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Keyword'>;</span>
213:     <span class='def-Keyword'>output</span> q<span class='def-Keyword'>;</span>
214:     <span class='def-Keyword'>reg</span> q<span class='def-Keyword'>;</span>
215: 
216:     table
217:     <span class='def-Comment def-Syntax'>//      clock   data    set     clear   q       q+</span>
218:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
219:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span>       x       <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
220:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
221:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
222:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
223:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    x       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     x<span class='verilog-verSymb def-Symbol'>;</span>
224:         f       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verSymb def-Symbol'>-</span><span class='verilog-verSymb def-Symbol'>;</span>
225:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verSymb def-Symbol'>-</span><span class='verilog-verSymb def-Symbol'>;</span>
226:     endtable
227: <span class='verilog-verWord def-Keyword'>endprimitive</span>
228: 
229: <span class='def-Comment def-Syntax'>// jk flip-flop udp primitive</span>
230: <span class='verilog-verWord def-Keyword'>primitive jk_flip_flop</span> <span class='def-Symbol'>(</span>q<span class='verilog-verSymb def-Symbol'>,</span> clock<span class='verilog-verSymb def-Symbol'>,</span> j<span class='verilog-verSymb def-Symbol'>,</span>k<span class='verilog-verSymb def-Symbol'>,</span> set<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Symbol'>)</span><span class='verilog-verSymb def-Symbol'>;</span>
231:     <span class='def-Keyword'>input</span> clock<span class='verilog-verSymb def-Symbol'>,</span> j<span class='verilog-verSymb def-Symbol'>,</span>k<span class='verilog-verSymb def-Symbol'>,</span> set<span class='verilog-verSymb def-Symbol'>,</span> clear<span class='def-Keyword'>;</span>
232:     <span class='def-Keyword'>output</span> q<span class='def-Keyword'>;</span>
233:     <span class='def-Keyword'>reg</span> q<span class='def-Keyword'>;</span>
234:     initial  q <span class='verilog-verSymb def-Symbol'>=</span> <span class='verilog-verNumb def-Number'>1'b0</span><span class='verilog-verSymb def-Symbol'>;</span>
235:     table
236:     <span class='def-Comment def-Syntax'>//      clock   jk      set     clear   q       q+</span>
237:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>?</span>      <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
238:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>?</span>      x       <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
239:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>?</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>0</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
240:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>00</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
241:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>00</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span>x<span class='verilog-verSymb def-Symbol'>:</span>     x<span class='verilog-verSymb def-Symbol'>;</span>
242:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>00</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
243:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>10</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
244:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>01</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
245:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>11</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>;</span>
246:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>11</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span>x<span class='verilog-verSymb def-Symbol'>:</span>     x<span class='verilog-verSymb def-Symbol'>;</span>
247:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verNumb def-Number'>11</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verNumb def-Number'>0</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verNumb def-Number'>1</span><span class='verilog-verSymb def-Symbol'>;</span>
248:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    x<span class='verilog-verSymb def-Symbol'>?</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     x<span class='verilog-verSymb def-Symbol'>;</span>
249:         <span class='def-Symbol'>(</span><span class='verilog-verNumb def-Number'>01</span><span class='def-Symbol'>)</span>    <span class='verilog-verSymb def-Symbol'>?</span>x      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     x<span class='verilog-verSymb def-Symbol'>;</span>
250:         f       <span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>?</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verSymb def-Symbol'>-</span><span class='verilog-verSymb def-Symbol'>;</span>
251:         <span class='verilog-verSymb def-Symbol'>?</span>       <span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>?</span>      <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verNumb def-Number'>1</span>       <span class='verilog-verSymb def-Symbol'>:</span><span class='verilog-verSymb def-Symbol'>?</span><span class='verilog-verSymb def-Symbol'>:</span>     <span class='verilog-verSymb def-Symbol'>-</span><span class='verilog-verSymb def-Symbol'>;</span>
252:     endtable
253: <span class='verilog-verWord def-Keyword'>endprimitive</span>
254: 
255: 
