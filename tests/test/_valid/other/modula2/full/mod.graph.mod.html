  0: <span class='modula2-Comment def-Comment def-Syntax'>(* Copyright (C) 1987 Jensen &amp; Partners International *)</span>
  1: 
  2: <span class='modula2-Comment def-Comment def-Syntax'>(*$N,V-,I-,R-,A-,S-*)</span>
  3: <span class='modula2-Keyword def-Keyword'>IMPLEMENTATION</span> <span class='modula2-Keyword def-Keyword'>MODULE</span> Graph<span class='modula2-Symbol def-Symbol'>;</span>
  4: <span class='modula2-Keyword def-Keyword'>IMPORT</span> Lib<span class='modula2-Symbol def-Symbol'>,</span> <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Symbol def-Symbol'>;</span>
  5: 
  6: <span class='modula2-Keyword def-Keyword'>TYPE</span>
  7:   tinyint      <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..7</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
  8:   bs           <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>SET</span> <span class='modula2-Keyword def-Keyword'>OF</span> tinyint<span class='modula2-Symbol def-Symbol'>;</span>
  9:   bp           <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>POINTER</span> <span class='modula2-Keyword def-Keyword'>TO</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 10:   HercMapType  <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>(</span>HercDepth <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span>
 11:                    <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>(</span>HercWidth <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 12:   ATTMapType   <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>(</span>ATTDepth <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span>
 13:                    <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>.</span><span class='modula2-Symbol def-Symbol'>(</span>ATTWidth <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 14: <span class='modula2-Keyword def-Keyword'>VAR</span>
 15:   HercBitMap   <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..3</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='modula2-Keyword def-Keyword'>POINTER</span> <span class='modula2-Keyword def-Keyword'>TO</span> HercMapType<span class='modula2-Symbol def-Symbol'>;</span>
 16:   ATTBitMap    <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..3</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='modula2-Keyword def-Keyword'>POINTER</span> <span class='modula2-Keyword def-Keyword'>TO</span> ATTMapType<span class='modula2-Symbol def-Symbol'>;</span>
 17:   EGAScreen <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0A000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..0</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 18: 
 19: 
 20: <span class='modula2-Comment def-Comment def-Syntax'>(* == CGA specific routines == *)</span>
 21: 
 22: 
 23: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> CGAGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
 24: <span class='modula2-Keyword def-Keyword'>VAR</span> r <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Registers<span class='modula2-Symbol def-Symbol'>;</span>
 25: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
 26:   r<span class='modula2-Number def-Number'>.</span>AX <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>5</span><span class='modula2-Symbol def-Symbol'>;</span>
 27:   Lib<span class='modula2-Number def-Number'>.</span>Intr<span class='modula2-Symbol def-Symbol'>(</span> r<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>10H</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 28: <span class='modula2-Symbol def-Symbol'>END</span> CGAGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
 29: 
 30: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> CGATextMode<span class='modula2-Symbol def-Symbol'>;</span>
 31: <span class='modula2-Keyword def-Keyword'>VAR</span> r <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Registers<span class='modula2-Symbol def-Symbol'>;</span>
 32: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
 33:   r<span class='modula2-Number def-Number'>.</span>AX <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>;</span>
 34:   Lib<span class='modula2-Number def-Number'>.</span>Intr<span class='modula2-Symbol def-Symbol'>(</span> r<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>10H</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 35: <span class='modula2-Symbol def-Symbol'>END</span> CGATextMode<span class='modula2-Symbol def-Symbol'>;</span>
 36: 
 37: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> CGAPlot<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 38: <span class='modula2-Keyword def-Keyword'>VAR</span>
 39:   off <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 40:   seg <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 41:   tmp <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 42: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
 43:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> CGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> CGADepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 44:   off <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
 45:   <span class='modula2-Symbol def-Symbol'>IF</span> ODD<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2000H</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='modula2-Number def-Number'>40</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 46:   INC<span class='modula2-Symbol def-Symbol'>(</span> y<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 47:   INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 48:   x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>*</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 49:   x <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
 50:   tmp <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0B800H</span><span class='modula2-Symbol def-Symbol'>;</span> seg <span class='modula2-Symbol def-Symbol'>:=</span> tmp<span class='modula2-Symbol def-Symbol'>;</span>
 51:   <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>+</span> bs<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span>x<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 52: <span class='modula2-Symbol def-Symbol'>END</span> CGAPlot<span class='modula2-Symbol def-Symbol'>;</span>
 53: 
 54: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> CGAPoint<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 55: <span class='modula2-Keyword def-Keyword'>VAR</span>
 56:   off <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 57:   seg <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 58:   tmp <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 59: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
 60:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> CGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> CGADepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> MAX<span class='modula2-Symbol def-Symbol'>(</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 61:   off <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
 62:   <span class='modula2-Symbol def-Symbol'>IF</span> ODD<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2000H</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='modula2-Number def-Number'>40</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 63:   INC<span class='modula2-Symbol def-Symbol'>(</span> y<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 64:   INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 65:   x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>*</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 66:   x <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
 67:   tmp <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0B800H</span><span class='modula2-Symbol def-Symbol'>;</span> seg <span class='modula2-Symbol def-Symbol'>:=</span> tmp<span class='modula2-Symbol def-Symbol'>;</span>
 68:   <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> x<span class='modula2-Symbol def-Symbol'>;</span>
 69: <span class='modula2-Symbol def-Symbol'>END</span> CGAPoint<span class='modula2-Symbol def-Symbol'>;</span>
 70: 
 71: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> CGAHLine <span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>,</span>x2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 72: <span class='modula2-Keyword def-Keyword'>VAR</span>
 73:   off  <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 74:   seg  <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 75:   tmp  <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 76:   n    <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
 77:   w    <span class='modula2-Symbol def-Symbol'>:</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 78:   mask <span class='modula2-Symbol def-Symbol'>:</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
 79:   fillc<span class='modula2-Symbol def-Symbol'>:</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>;</span>
 80: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
 81:   <span class='modula2-Symbol def-Symbol'>IF</span> y <span class='modula2-Symbol def-Symbol'>></span> CGADepth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 82:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>>=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>CGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 83:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span> x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 84:   <span class='modula2-Symbol def-Symbol'>IF</span> x2 <span class='modula2-Symbol def-Symbol'>>=</span> CGAWidth <span class='modula2-Keyword def-Keyword'>THEN</span> x2 <span class='modula2-Symbol def-Symbol'>:=</span> CGAWidth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 85: 
 86:   n <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span> x2 <span class='modula2-Symbol def-Symbol'>-</span> x <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
 87:   off <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
 88:   <span class='modula2-Symbol def-Symbol'>IF</span> ODD<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
 89:     INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2000H</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='modula2-Number def-Number'>40</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 90:     c <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span> c <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>+</span> c <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>16</span><span class='modula2-Symbol def-Symbol'>;</span>
 91:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
 92:   c <span class='modula2-Symbol def-Symbol'>:=</span> c <span class='modula2-Symbol def-Symbol'>+</span> c <span class='modula2-Symbol def-Symbol'>*</span> <span class='modula2-Number def-Number'>16</span><span class='modula2-Symbol def-Symbol'>;</span>
 93:   INC<span class='modula2-Symbol def-Symbol'>(</span> y<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 94:   INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 95:   x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>*</span> <span class='def-TypeKeyword def-Keyword'>BITSET</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
 96:   x <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
 97:   tmp <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0B800H</span><span class='modula2-Symbol def-Symbol'>;</span> seg <span class='modula2-Symbol def-Symbol'>:=</span> tmp<span class='modula2-Symbol def-Symbol'>;</span>
 98: 
 99:   w <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
100:   <span class='modula2-Symbol def-Symbol'>REPEAT</span>
101:     mask <span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> x<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
102:     w <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span> w <span class='modula2-Symbol def-Symbol'>-</span> mask <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>+</span> bs<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>*</span>mask<span class='modula2-Symbol def-Symbol'>;</span>
103:     DEC<span class='modula2-Symbol def-Symbol'>(</span>n<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
104:     DEC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
105:   <span class='modula2-Symbol def-Symbol'>UNTIL</span> <span class='modula2-Symbol def-Symbol'>(</span>n<span class='modula2-Symbol def-Symbol'>=</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>=</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
106:   <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>:=</span> w<span class='modula2-Symbol def-Symbol'>;</span>
107: 
108:   INC<span class='modula2-Symbol def-Symbol'>(</span>off<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
109:   Lib<span class='modula2-Number def-Number'>.</span>Fill<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> n <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>,</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
110:   INC<span class='modula2-Symbol def-Symbol'>(</span> off<span class='modula2-Symbol def-Symbol'>,</span> n <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
111:   n <span class='modula2-Symbol def-Symbol'>:=</span> n <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>;</span>
112:   x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>6</span><span class='modula2-Symbol def-Symbol'>;</span>
113:   w <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
114:   <span class='modula2-Symbol def-Symbol'>WHILE</span> n <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>DO</span>
115:     mask <span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> x<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
116:     w <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span> w <span class='modula2-Symbol def-Symbol'>-</span> mask <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>+</span> bs<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>*</span>mask<span class='modula2-Symbol def-Symbol'>;</span>
117:     DEC<span class='modula2-Symbol def-Symbol'>(</span>n<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
118:     DEC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
119:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
120:   <span class='modula2-Symbol def-Symbol'>[</span>seg<span class='modula2-Symbol def-Symbol'>:</span>off bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>:=</span> w<span class='modula2-Symbol def-Symbol'>;</span>
121: <span class='modula2-Symbol def-Symbol'>END</span> CGAHLine<span class='modula2-Symbol def-Symbol'>;</span>
122: 
123: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> InitCGA <span class='modula2-Symbol def-Symbol'>;</span>
124: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
125:   Width <span class='modula2-Symbol def-Symbol'>:=</span> CGAWidth <span class='modula2-Symbol def-Symbol'>;</span>
126:   Depth <span class='modula2-Symbol def-Symbol'>:=</span> CGADepth <span class='modula2-Symbol def-Symbol'>;</span>
127:   NumColor <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>4</span> <span class='modula2-Symbol def-Symbol'>;</span>
128:   TextMode <span class='modula2-Symbol def-Symbol'>:=</span> CGATextMode <span class='modula2-Symbol def-Symbol'>;</span>
129:   GraphMode <span class='modula2-Symbol def-Symbol'>:=</span> CGAGraphMode <span class='modula2-Symbol def-Symbol'>;</span>
130:   Plot <span class='modula2-Symbol def-Symbol'>:=</span> CGAPlot <span class='modula2-Symbol def-Symbol'>;</span>
131:   Point <span class='modula2-Symbol def-Symbol'>:=</span> CGAPoint <span class='modula2-Symbol def-Symbol'>;</span>
132:   HLine <span class='modula2-Symbol def-Symbol'>:=</span> CGAHLine <span class='modula2-Symbol def-Symbol'>;</span>
133: <span class='modula2-Symbol def-Symbol'>END</span> InitCGA <span class='modula2-Symbol def-Symbol'>;</span>
134: 
135: <span class='modula2-Comment def-Comment def-Syntax'>(* == EGA/VGA specific routines == *)</span>
136: 
137: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> EGAGraphMode<span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Also VGA *)</span>
138: <span class='modula2-Keyword def-Keyword'>VAR</span> r <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Registers<span class='modula2-Symbol def-Symbol'>;</span>
139: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
140:   <span class='modula2-Symbol def-Symbol'>IF</span> Depth<span class='modula2-Symbol def-Symbol'>=</span><span class='modula2-Number def-Number'>480</span> <span class='modula2-Keyword def-Keyword'>THEN</span> r<span class='modula2-Number def-Number'>.</span>AX <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>12H</span> <span class='modula2-Keyword def-Keyword'>ELSE</span> r<span class='modula2-Number def-Number'>.</span>AX <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>10H</span> <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
141:   Lib<span class='modula2-Number def-Number'>.</span>Intr<span class='modula2-Symbol def-Symbol'>(</span> r<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>10H</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
142: <span class='modula2-Symbol def-Symbol'>END</span> EGAGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
143: 
144: 
145: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> EGAPlot<span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>,</span>c <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Also VGA *)</span>
146: <span class='modula2-Keyword def-Keyword'>VAR</span>
147:   t<span class='modula2-Symbol def-Symbol'>:</span>bs<span class='modula2-Symbol def-Symbol'>;</span>
148:   p<span class='modula2-Symbol def-Symbol'>,</span>b<span class='modula2-Symbol def-Symbol'>,</span>s<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
149: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
150:    <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>&lt;</span> EGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>&lt;</span> Depth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
151:       b <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
152:       p <span class='modula2-Symbol def-Symbol'>:=</span> y<span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Number def-Number'>80</span><span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
153:       <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span>SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
154:       <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C4H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C5H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
155:       s <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0A000H</span><span class='modula2-Symbol def-Symbol'>;</span>
156:       t <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
157:       <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>;</span>
158:       <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C4H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C5H</span><span class='modula2-Symbol def-Symbol'>,</span>SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
159:       <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span> <span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>;</span>
160:       <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FFH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
161:       <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C4H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C5H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
162:    <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
163: <span class='modula2-Symbol def-Symbol'>END</span> EGAPlot<span class='modula2-Symbol def-Symbol'>;</span>
164: 
165: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> EGAPoint<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Also VGA *)</span>
166: <span class='modula2-Keyword def-Keyword'>VAR</span>
167:   t<span class='modula2-Symbol def-Symbol'>:</span>bs<span class='modula2-Symbol def-Symbol'>;</span>
168:   p<span class='modula2-Symbol def-Symbol'>,</span>b<span class='modula2-Symbol def-Symbol'>,</span>s<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
169:   c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
170: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
171:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>&lt;</span> EGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>&lt;</span> Depth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
172:     b <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
173:     p <span class='modula2-Symbol def-Symbol'>:=</span> y<span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Number def-Number'>80</span><span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span>  <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
174: 
175:     s <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0A000H</span><span class='modula2-Symbol def-Symbol'>;</span>
176: 
177:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>4</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* read map sel *)</span>
178: 
179:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>3</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
180:     t <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
181:     t <span class='modula2-Symbol def-Symbol'>:=</span> t <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>(</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
182:     c <span class='modula2-Symbol def-Symbol'>:=</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>t<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
183: 
184:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
185:     t <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
186:     t <span class='modula2-Symbol def-Symbol'>:=</span> t <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>(</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
187:     c <span class='modula2-Symbol def-Symbol'>:=</span> c <span class='modula2-Symbol def-Symbol'>*</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>+</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>t<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
188: 
189:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
190:     t <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
191:     t <span class='modula2-Symbol def-Symbol'>:=</span> t <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>(</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
192:     c <span class='modula2-Symbol def-Symbol'>:=</span> c <span class='modula2-Symbol def-Symbol'>*</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>+</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>t<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
193: 
194:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
195:     t <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span>s<span class='modula2-Symbol def-Symbol'>:</span>p bp<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>;</span>
196:     t <span class='modula2-Symbol def-Symbol'>:=</span> t <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>(</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
197:     c <span class='modula2-Symbol def-Symbol'>:=</span> c <span class='modula2-Symbol def-Symbol'>*</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>+</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span> SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>t<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
198: 
199:     c <span class='modula2-Symbol def-Symbol'>:=</span> c <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>7</span> <span class='modula2-Symbol def-Symbol'>-</span> <span class='modula2-Symbol def-Symbol'>(</span> x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
200: 
201:     <span class='modula2-Keyword def-Keyword'>RETURN</span> c<span class='modula2-Symbol def-Symbol'>;</span>
202:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
203:     <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span>
204:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
205: <span class='modula2-Symbol def-Symbol'>END</span> EGAPoint<span class='modula2-Symbol def-Symbol'>;</span>
206: 
207: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> EGAHLine <span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>,</span>x2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Also VGA *)</span>
208: <span class='modula2-Keyword def-Keyword'>VAR</span> c1<span class='modula2-Symbol def-Symbol'>,</span>c2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
209: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
210:   <span class='modula2-Symbol def-Symbol'>IF</span> y <span class='modula2-Symbol def-Symbol'>></span> Depth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
211:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>>=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>EGAWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
212:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span> x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
213:   <span class='modula2-Symbol def-Symbol'>IF</span> x2 <span class='modula2-Symbol def-Symbol'>>=</span> EGAWidth <span class='modula2-Keyword def-Keyword'>THEN</span> x2 <span class='modula2-Symbol def-Symbol'>:=</span> EGAWidth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
214:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span> <span class='modula2-Symbol def-Symbol'>#</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span>  <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>&lt;=</span> x2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
215:     EGAPlot<span class='modula2-Symbol def-Symbol'>(</span> x  <span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>,</span> c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> INC<span class='modula2-Symbol def-Symbol'>(</span> x  <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
216:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
217:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='modula2-Symbol def-Symbol'>(</span>x2 <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span> <span class='modula2-Symbol def-Symbol'>#</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>&lt;=</span> x2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
218:     EGAPlot<span class='modula2-Symbol def-Symbol'>(</span> x2 <span class='modula2-Symbol def-Symbol'>,</span> y <span class='modula2-Symbol def-Symbol'>,</span> c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> DEC<span class='modula2-Symbol def-Symbol'>(</span> x2 <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
219:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
220:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
221:   <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FFH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
222:   <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C4H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3C5H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
223:   <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>5</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
224:   y <span class='modula2-Symbol def-Symbol'>:=</span> y<span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Number def-Number'>80</span><span class='modula2-Symbol def-Symbol'>;</span>
225:   x <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>;</span>
226:   x2 <span class='modula2-Symbol def-Symbol'>:=</span> x2 <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>;</span>
227:   <span class='modula2-Symbol def-Symbol'>WHILE</span> x <span class='modula2-Symbol def-Symbol'>&lt;=</span> x2 <span class='modula2-Keyword def-Keyword'>DO</span>
228:     EGAScreen<span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>(</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
229:     INC<span class='modula2-Symbol def-Symbol'>(</span> x <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
230:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
231:   <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CEH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>5</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span><span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span> <span class='modula2-Number def-Number'>3CFH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
232: <span class='modula2-Symbol def-Symbol'>END</span> EGAHLine<span class='modula2-Symbol def-Symbol'>;</span>
233: 
234: 
235: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> InitEGA <span class='modula2-Symbol def-Symbol'>;</span>
236: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
237:   Width     <span class='modula2-Symbol def-Symbol'>:=</span> EGAWidth <span class='modula2-Symbol def-Symbol'>;</span>
238:   Depth     <span class='modula2-Symbol def-Symbol'>:=</span> EGADepth <span class='modula2-Symbol def-Symbol'>;</span>
239:   NumColor  <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>16</span> <span class='modula2-Symbol def-Symbol'>;</span>
240:   TextMode  <span class='modula2-Symbol def-Symbol'>:=</span> CGATextMode <span class='modula2-Symbol def-Symbol'>;</span>
241:   GraphMode <span class='modula2-Symbol def-Symbol'>:=</span> EGAGraphMode <span class='modula2-Symbol def-Symbol'>;</span>
242:   Plot      <span class='modula2-Symbol def-Symbol'>:=</span> EGAPlot <span class='modula2-Symbol def-Symbol'>;</span>
243:   Point     <span class='modula2-Symbol def-Symbol'>:=</span> EGAPoint <span class='modula2-Symbol def-Symbol'>;</span>
244:   HLine     <span class='modula2-Symbol def-Symbol'>:=</span> EGAHLine <span class='modula2-Symbol def-Symbol'>;</span>
245: <span class='modula2-Symbol def-Symbol'>END</span> InitEGA <span class='modula2-Symbol def-Symbol'>;</span>
246: 
247: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> InitVGA <span class='modula2-Symbol def-Symbol'>;</span>
248: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
249:   InitEGA <span class='modula2-Symbol def-Symbol'>;</span>
250:   Depth <span class='modula2-Symbol def-Symbol'>:=</span> VGADepth <span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Width same as EGA *)</span>
251: <span class='modula2-Symbol def-Symbol'>END</span> InitVGA <span class='modula2-Symbol def-Symbol'>;</span>
252: 
253: 
254: <span class='modula2-Comment def-Comment def-Syntax'>(* == Hercules specific routines == *)</span>
255: 
256: 
257: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> HercGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
258: <span class='modula2-Keyword def-Keyword'>TYPE</span>
259:   DataType <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..11</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> SHORTCARD <span class='modula2-Symbol def-Symbol'>;</span>
260: <span class='modula2-Keyword def-Keyword'>CONST</span>
261:   Data <span class='modula2-Symbol def-Symbol'>=</span> DataType<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>35H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2DH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2EH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>07H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>5BH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>02H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>57H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>57H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>02H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>03H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>00H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>00H</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
262: <span class='modula2-Keyword def-Keyword'>VAR</span>
263:   I<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
264: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
265:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3BFH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>03H</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>    <span class='modula2-Comment def-Comment def-Syntax'>(* Remove this if do NOT want to override</span>
266: <span class='modula2-Comment def-Comment def-Syntax'>                                the hercules text mode lock *)</span>
267:     Lib<span class='modula2-Number def-Number'>.</span>Delay<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>10</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
268:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B8H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>02H</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
269:     <span class='modula2-Symbol def-Symbol'>FOR</span> I<span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>TO</span> <span class='modula2-Number def-Number'>11</span> <span class='modula2-Keyword def-Keyword'>DO</span>
270:         <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B4H</span><span class='modula2-Symbol def-Symbol'>,</span>SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>I<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
271:         <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B5H</span><span class='modula2-Symbol def-Symbol'>,</span>Data<span class='modula2-Symbol def-Symbol'>[</span>I<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span>
272:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
273:     Lib<span class='modula2-Number def-Number'>.</span>WordFill<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>4000H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
274:     Lib<span class='modula2-Number def-Number'>.</span>Delay<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>500</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
275:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B8H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0AH</span><span class='modula2-Symbol def-Symbol'>)</span>
276: <span class='modula2-Symbol def-Symbol'>END</span> HercGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
277: 
278: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> HercTextMode<span class='modula2-Symbol def-Symbol'>;</span>
279: <span class='modula2-Keyword def-Keyword'>TYPE</span>
280:   DataType <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..11</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> SHORTCARD <span class='modula2-Symbol def-Symbol'>;</span>
281: <span class='modula2-Keyword def-Keyword'>CONST</span>
282:   Data <span class='modula2-Symbol def-Symbol'>=</span> DataType<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>61H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>50H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>52H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0FH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>19H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>06H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>19H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>19H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>02H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0DH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0BH</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0CH</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
283: <span class='modula2-Keyword def-Keyword'>VAR</span>
284:   I<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
285: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
286:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B8H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>20H</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
287:     <span class='modula2-Symbol def-Symbol'>FOR</span> I<span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>TO</span> <span class='modula2-Number def-Number'>11</span> <span class='modula2-Keyword def-Keyword'>DO</span>
288:         <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B4H</span><span class='modula2-Symbol def-Symbol'>,</span>SHORTCARD<span class='modula2-Symbol def-Symbol'>(</span>I<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
289:         <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B5H</span><span class='modula2-Symbol def-Symbol'>,</span>Data<span class='modula2-Symbol def-Symbol'>[</span>I<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span>
290:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
291:     Lib<span class='modula2-Number def-Number'>.</span>WordFill<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>2000</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>720H</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
292:     Lib<span class='modula2-Number def-Number'>.</span>Delay<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>500</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
293:     <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Out<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3B8H</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>28H</span><span class='modula2-Symbol def-Symbol'>)</span>
294: <span class='modula2-Symbol def-Symbol'>END</span> HercTextMode<span class='modula2-Symbol def-Symbol'>;</span>
295: 
296: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> HercPlot<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
297: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
298:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> HercWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> HercDepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
299:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
300:      EXCL<span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span>
301:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
302:      INCL<span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span>
303:   <span class='modula2-Symbol def-Symbol'>END</span>
304: <span class='modula2-Symbol def-Symbol'>END</span> HercPlot<span class='modula2-Symbol def-Symbol'>;</span>
305: 
306: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> HercPoint<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
307: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
308:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> HercWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> HercDepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> MAX<span class='modula2-Symbol def-Symbol'>(</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
309:   <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>IN</span> HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span>
310: <span class='modula2-Symbol def-Symbol'>END</span> HercPoint<span class='modula2-Symbol def-Symbol'>;</span>
311: 
312: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> HercHLine <span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>,</span>x2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
313: <span class='modula2-Keyword def-Keyword'>VAR</span>
314:   I         <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
315:   MapNum    <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
316:   Byte1     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
317:   Byte2     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
318:   Bitx      <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
319:   Bitx2     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
320:   Mask      <span class='modula2-Symbol def-Symbol'>:</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
321:   IMask     <span class='modula2-Symbol def-Symbol'>:</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
322: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
323:   <span class='modula2-Symbol def-Symbol'>IF</span> y <span class='modula2-Symbol def-Symbol'>></span> HercDepth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
324:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>>=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>HercWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
325:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span> x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
326:   <span class='modula2-Symbol def-Symbol'>IF</span> x2 <span class='modula2-Symbol def-Symbol'>>=</span> HercWidth <span class='modula2-Keyword def-Keyword'>THEN</span> x2 <span class='modula2-Symbol def-Symbol'>:=</span> HercWidth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
327:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
328:      <span class='modula2-Comment def-Comment def-Syntax'>(* No Mask needed *)</span>
329:   <span class='modula2-Keyword def-Keyword'>ELSIF</span> c <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Symbol def-Symbol'>(</span>HercNumColor<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
330:      Mask<span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..7</span><span class='modula2-Symbol def-Symbol'>}</span>
331:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
332:      Mask<span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>0AAH</span> <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span>ODD<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
333:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
334: 
335:   MapNum    <span class='modula2-Symbol def-Symbol'>:=</span> y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>;</span>
336:   y         <span class='modula2-Symbol def-Symbol'>:=</span> y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
337:   Byte1     <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>;</span>
338:   Byte2     <span class='modula2-Symbol def-Symbol'>:=</span> x2 <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>;</span>
339:   Bitx      <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
340:   Bitx2     <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x2 <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
341: 
342:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
343:      <span class='modula2-Symbol def-Symbol'>IF</span> Byte2 <span class='modula2-Symbol def-Symbol'>=</span> Byte1 <span class='modula2-Keyword def-Keyword'>THEN</span>
344:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
345:         <span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
346:      <span class='modula2-Keyword def-Keyword'>ELSE</span>
347:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
348:         <span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
349: 
350:         <span class='modula2-Symbol def-Symbol'>IF</span> Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1 <span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
351:            Lib<span class='modula2-Number def-Number'>.</span>Fill<span class='modula2-Symbol def-Symbol'>(</span>ADR<span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>,</span>Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span>
352:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
353: 
354:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
355:         <span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
356:      <span class='modula2-Symbol def-Symbol'>END</span>
357:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
358:      <span class='modula2-Symbol def-Symbol'>IF</span> Byte2 <span class='modula2-Symbol def-Symbol'>=</span> Byte1 <span class='modula2-Keyword def-Keyword'>THEN</span>
359:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
360:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
361:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
362:      <span class='modula2-Keyword def-Keyword'>ELSE</span>
363:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
364:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
365:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
366: 
367:         <span class='modula2-Symbol def-Symbol'>IF</span> Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1 <span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
368:            Lib<span class='modula2-Number def-Number'>.</span>Fill<span class='modula2-Symbol def-Symbol'>(</span>ADR<span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>,</span>Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>,</span>
369:                     Mask<span class='modula2-Symbol def-Symbol'>)</span>
370:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
371: 
372:         HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
373:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>HercBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
374:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
375:      <span class='modula2-Symbol def-Symbol'>END</span>
376:   <span class='modula2-Symbol def-Symbol'>END</span>
377: <span class='modula2-Symbol def-Symbol'>END</span> HercHLine<span class='modula2-Symbol def-Symbol'>;</span>
378: 
379: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> InitHerc <span class='modula2-Symbol def-Symbol'>;</span>
380: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
381:   Width     <span class='modula2-Symbol def-Symbol'>:=</span> HercWidth <span class='modula2-Symbol def-Symbol'>;</span>
382:   Depth     <span class='modula2-Symbol def-Symbol'>:=</span> HercDepth <span class='modula2-Symbol def-Symbol'>;</span>
383:   NumColor  <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>;</span>
384:   TextMode  <span class='modula2-Symbol def-Symbol'>:=</span> HercTextMode <span class='modula2-Symbol def-Symbol'>;</span>
385:   GraphMode <span class='modula2-Symbol def-Symbol'>:=</span> HercGraphMode <span class='modula2-Symbol def-Symbol'>;</span>
386:   Plot      <span class='modula2-Symbol def-Symbol'>:=</span> HercPlot <span class='modula2-Symbol def-Symbol'>;</span>
387:   Point     <span class='modula2-Symbol def-Symbol'>:=</span> HercPoint <span class='modula2-Symbol def-Symbol'>;</span>
388:   HLine     <span class='modula2-Symbol def-Symbol'>:=</span> HercHLine <span class='modula2-Symbol def-Symbol'>;</span>
389:   HercBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>      <span class='modula2-Comment def-Comment def-Syntax'>(* Initialise BitMap pointers *)</span>
390:   HercBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>02000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
391:   HercBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>04000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
392:   HercBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>06000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
393: <span class='modula2-Symbol def-Symbol'>END</span> InitHerc <span class='modula2-Symbol def-Symbol'>;</span>
394: 
395: <span class='modula2-Comment def-Comment def-Syntax'>(* == AT&amp;T 400 specific routines == *)</span>
396: 
397: 
398: 
399: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> ATTGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
400: <span class='modula2-Keyword def-Keyword'>VAR</span> r <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-InterfaceKeyword def-Keyword'>SYSTEM</span><span class='modula2-Number def-Number'>.</span>Registers<span class='modula2-Symbol def-Symbol'>;</span>
401: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
402:   r<span class='modula2-Number def-Number'>.</span>AX <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>64</span><span class='modula2-Symbol def-Symbol'>;</span>
403:   Lib<span class='modula2-Number def-Number'>.</span>Intr<span class='modula2-Symbol def-Symbol'>(</span> r<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>10H</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
404: <span class='modula2-Symbol def-Symbol'>END</span> ATTGraphMode<span class='modula2-Symbol def-Symbol'>;</span>
405: 
406: 
407: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> ATTPlot<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
408: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
409:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> ATTWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> ATTDepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
410:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
411:      EXCL<span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span>
412:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
413:      INCL<span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span>
414:   <span class='modula2-Symbol def-Symbol'>END</span>
415: <span class='modula2-Symbol def-Symbol'>END</span> ATTPlot<span class='modula2-Symbol def-Symbol'>;</span>
416: 
417: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> ATTPoint<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
418: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
419:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Symbol def-Symbol'>>=</span> ATTWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>OR</span> <span class='modula2-Symbol def-Symbol'>(</span>y <span class='modula2-Symbol def-Symbol'>>=</span> ATTDepth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> MAX<span class='modula2-Symbol def-Symbol'>(</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
420:   <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>IN</span> ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span>
421: <span class='modula2-Symbol def-Symbol'>END</span> ATTPoint<span class='modula2-Symbol def-Symbol'>;</span>
422: 
423: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> ATTHLine <span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>,</span>x2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span><span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
424: <span class='modula2-Keyword def-Keyword'>VAR</span>
425:   I         <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
426:   MapNum    <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
427:   Byte1     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
428:   Byte2     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
429:   Bitx      <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
430:   Bitx2     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
431:   Mask      <span class='modula2-Symbol def-Symbol'>:</span> bs<span class='modula2-Symbol def-Symbol'>;</span>
432: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
433:   <span class='modula2-Symbol def-Symbol'>IF</span> y <span class='modula2-Symbol def-Symbol'>></span> ATTDepth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
434:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>>=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>ATTWidth<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>RETURN</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
435:   <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span> x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
436:   <span class='modula2-Symbol def-Symbol'>IF</span> x2 <span class='modula2-Symbol def-Symbol'>>=</span> ATTWidth <span class='modula2-Keyword def-Keyword'>THEN</span> x2 <span class='modula2-Symbol def-Symbol'>:=</span> ATTWidth<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
437: 
438:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
439:      <span class='modula2-Comment def-Comment def-Syntax'>(* No Mask needed *)</span>
440:   <span class='modula2-Keyword def-Keyword'>ELSIF</span> c <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Symbol def-Symbol'>(</span>ATTNumColor<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
441:      Mask<span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..7</span><span class='modula2-Symbol def-Symbol'>}</span>
442:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
443:      Mask<span class='modula2-Symbol def-Symbol'>:=</span> bs<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>0AAH</span> <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>(</span>ODD<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
444:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
445: 
446:   MapNum    <span class='modula2-Symbol def-Symbol'>:=</span> y <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>;</span>
447:   y         <span class='modula2-Symbol def-Symbol'>:=</span> y <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
448:   Byte1     <span class='modula2-Symbol def-Symbol'>:=</span> x <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>;</span>
449:   Byte2     <span class='modula2-Symbol def-Symbol'>:=</span> x2 <span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>;</span>
450:   Bitx      <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
451:   Bitx2     <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>7</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>x2 <span class='modula2-Keyword def-Keyword'>MOD</span> <span class='modula2-Number def-Number'>8</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
452: 
453:   <span class='modula2-Symbol def-Symbol'>IF</span> c <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
454:      <span class='modula2-Symbol def-Symbol'>IF</span> Byte2 <span class='modula2-Symbol def-Symbol'>=</span> Byte1 <span class='modula2-Keyword def-Keyword'>THEN</span>
455:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
456:         <span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
457:      <span class='modula2-Keyword def-Keyword'>ELSE</span>
458:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
459:         <span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
460: 
461:         <span class='modula2-Symbol def-Symbol'>IF</span> Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1 <span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
462:            Lib<span class='modula2-Number def-Number'>.</span>Fill<span class='modula2-Symbol def-Symbol'>(</span>ADR<span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>,</span>Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>)</span>
463:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
464: 
465:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
466:         <span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>-</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
467:      <span class='modula2-Symbol def-Symbol'>END</span>
468:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
469:      <span class='modula2-Symbol def-Symbol'>IF</span> Byte2 <span class='modula2-Symbol def-Symbol'>=</span> Byte1 <span class='modula2-Keyword def-Keyword'>THEN</span>
470:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
471:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
472:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
473:      <span class='modula2-Keyword def-Keyword'>ELSE</span>
474:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
475:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
476:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span><span class='modula2-Number def-Number'>0..</span>Bitx<span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
477: 
478:         <span class='modula2-Symbol def-Symbol'>IF</span> Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1 <span class='modula2-Symbol def-Symbol'>></span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
479:            Lib<span class='modula2-Number def-Number'>.</span>Fill<span class='modula2-Symbol def-Symbol'>(</span>ADR<span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte1<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>,</span>Byte2<span class='modula2-Symbol def-Symbol'>-</span>Byte1<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>,</span>
480:                     Mask<span class='modula2-Symbol def-Symbol'>)</span>
481:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
482: 
483:         ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span>
484:         <span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Symbol def-Symbol'>(</span>ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span>MapNum<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>^</span><span class='modula2-Symbol def-Symbol'>[</span>y<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>[</span>Byte2<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>-</span>bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span>
485:         <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Symbol def-Symbol'>(</span>Mask <span class='modula2-Symbol def-Symbol'>*</span> bs<span class='modula2-Symbol def-Symbol'>{</span>Bitx2<span class='modula2-Number def-Number'>..7</span><span class='modula2-Symbol def-Symbol'>}</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
486:      <span class='modula2-Symbol def-Symbol'>END</span>
487:   <span class='modula2-Symbol def-Symbol'>END</span>
488: <span class='modula2-Symbol def-Symbol'>END</span> ATTHLine<span class='modula2-Symbol def-Symbol'>;</span>
489: 
490: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> InitATT <span class='modula2-Symbol def-Symbol'>;</span>
491: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
492:   Width     <span class='modula2-Symbol def-Symbol'>:=</span> ATTWidth <span class='modula2-Symbol def-Symbol'>;</span>
493:   Depth     <span class='modula2-Symbol def-Symbol'>:=</span> ATTDepth <span class='modula2-Symbol def-Symbol'>;</span>
494:   NumColor  <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>;</span>
495:   TextMode  <span class='modula2-Symbol def-Symbol'>:=</span> CGATextMode <span class='modula2-Symbol def-Symbol'>;</span>
496:   GraphMode <span class='modula2-Symbol def-Symbol'>:=</span> ATTGraphMode <span class='modula2-Symbol def-Symbol'>;</span>
497:   Plot      <span class='modula2-Symbol def-Symbol'>:=</span> ATTPlot <span class='modula2-Symbol def-Symbol'>;</span>
498:   Point     <span class='modula2-Symbol def-Symbol'>:=</span> ATTPoint <span class='modula2-Symbol def-Symbol'>;</span>
499:   HLine     <span class='modula2-Symbol def-Symbol'>:=</span> ATTHLine <span class='modula2-Symbol def-Symbol'>;</span>
500:   ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>8000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>  <span class='modula2-Comment def-Comment def-Syntax'>(* Initialise BitMap pointers *)</span>
501:   ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0A000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
502:   ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0C000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
503:   ATTBitMap<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0B000H</span><span class='modula2-Symbol def-Symbol'>:</span><span class='modula2-Number def-Number'>0E000H</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
504: <span class='modula2-Symbol def-Symbol'>END</span> InitATT <span class='modula2-Symbol def-Symbol'>;</span>
505: 
506: 
507: <span class='modula2-Comment def-Comment def-Syntax'>(* ------  Device independant routines ------ *)</span>
508: 
509: 
510: 
511: 
512: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> Line<span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>x2<span class='modula2-Symbol def-Symbol'>,</span>y2<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
513: <span class='modula2-Keyword def-Keyword'>VAR</span>
514:   dx<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>,</span>e<span class='modula2-Symbol def-Symbol'>,</span>tmp <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
515: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
516:   <span class='modula2-Symbol def-Symbol'>IF</span> x1 <span class='modula2-Symbol def-Symbol'>></span> x2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Comment def-Comment def-Syntax'>(* ensure that x2 >= x1 *)</span>
517:     tmp <span class='modula2-Symbol def-Symbol'>:=</span> x1<span class='modula2-Symbol def-Symbol'>;</span> x1 <span class='modula2-Symbol def-Symbol'>:=</span> x2<span class='modula2-Symbol def-Symbol'>;</span> x2 <span class='modula2-Symbol def-Symbol'>:=</span> tmp<span class='modula2-Symbol def-Symbol'>;</span>
518:     tmp <span class='modula2-Symbol def-Symbol'>:=</span> y1<span class='modula2-Symbol def-Symbol'>;</span> y1 <span class='modula2-Symbol def-Symbol'>:=</span> y2<span class='modula2-Symbol def-Symbol'>;</span> y2 <span class='modula2-Symbol def-Symbol'>:=</span> tmp<span class='modula2-Symbol def-Symbol'>;</span>
519:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
520: 
521:   dx <span class='modula2-Symbol def-Symbol'>:=</span> x2<span class='modula2-Symbol def-Symbol'>-</span>x1<span class='modula2-Symbol def-Symbol'>;</span>
522:   e  <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span>
523:   <span class='modula2-Symbol def-Symbol'>IF</span> y1 <span class='modula2-Symbol def-Symbol'>&lt;=</span> y2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Comment def-Comment def-Syntax'>(* case where y increases *)</span>
524:     dy <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span>y2<span class='modula2-Symbol def-Symbol'>-</span>y1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
525:     <span class='modula2-Symbol def-Symbol'>IF</span> dx <span class='modula2-Symbol def-Symbol'>>=</span> dy <span class='modula2-Keyword def-Keyword'>THEN</span>
526:       <span class='modula2-Symbol def-Symbol'>LOOP</span>
527:         Plot<span class='modula2-Symbol def-Symbol'>(</span> x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
528:         <span class='modula2-Symbol def-Symbol'>IF</span> x1 <span class='modula2-Symbol def-Symbol'>=</span> x2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>EXIT</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
529:         INC<span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
530:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
531:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
532:         <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> dx <span class='modula2-Keyword def-Keyword'>THEN</span>
533:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
534:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
535:           INC<span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
536:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
537:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
538:     <span class='modula2-Keyword def-Keyword'>ELSE</span>
539:       <span class='modula2-Symbol def-Symbol'>LOOP</span>
540:         Plot<span class='modula2-Symbol def-Symbol'>(</span> x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
541:         <span class='modula2-Symbol def-Symbol'>IF</span> y1 <span class='modula2-Symbol def-Symbol'>=</span> y2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>EXIT</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
542:         INC<span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
543:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
544:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
545:         <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> dy <span class='modula2-Keyword def-Keyword'>THEN</span>
546:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
547:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
548:           INC<span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
549:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
550:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
551:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
552:   <span class='modula2-Keyword def-Keyword'>ELSE</span>
553:     <span class='modula2-Comment def-Comment def-Syntax'>(* case where y decreases *)</span>
554:     dy <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>-</span>y2<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
555:     <span class='modula2-Symbol def-Symbol'>IF</span> dx <span class='modula2-Symbol def-Symbol'>>=</span> dy <span class='modula2-Keyword def-Keyword'>THEN</span>
556:       <span class='modula2-Symbol def-Symbol'>LOOP</span>
557:         Plot<span class='modula2-Symbol def-Symbol'>(</span> x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
558:         <span class='modula2-Symbol def-Symbol'>IF</span> x1 <span class='modula2-Symbol def-Symbol'>=</span> x2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>EXIT</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
559:         INC<span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
560:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
561:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
562:         <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> dx <span class='modula2-Keyword def-Keyword'>THEN</span>
563:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
564:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
565:           DEC<span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
566:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
567:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
568:     <span class='modula2-Keyword def-Keyword'>ELSE</span>
569:       <span class='modula2-Symbol def-Symbol'>LOOP</span>
570:         Plot<span class='modula2-Symbol def-Symbol'>(</span> x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
571:         <span class='modula2-Symbol def-Symbol'>IF</span> y1 <span class='modula2-Symbol def-Symbol'>=</span> y2 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Keyword def-Keyword'>EXIT</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
572:         DEC<span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
573:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
574:         INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
575:         <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> dy <span class='modula2-Keyword def-Keyword'>THEN</span>
576:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
577:           DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
578:           INC<span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
579:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
580:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
581:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
582:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
583: <span class='modula2-Symbol def-Symbol'>END</span> Line<span class='modula2-Symbol def-Symbol'>;</span>
584: 
585: 
586: <span class='modula2-Keyword def-Keyword'>CONST</span>
587:   dx <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
588:   dy <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
589: 
590: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> Disc<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>,</span>r<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
591: <span class='modula2-Keyword def-Keyword'>VAR</span>
592:   e   <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
593:   x<span class='modula2-Symbol def-Symbol'>,</span>y <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
594: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
595:   x <span class='modula2-Symbol def-Symbol'>:=</span> r<span class='modula2-Symbol def-Symbol'>;</span> y <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> e <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span>
596:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
597:     HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
598:     HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
599:     INC<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
600:     INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>*</span>dy<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
601:     <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
602:       DEC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
603:       DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>x<span class='modula2-Symbol def-Symbol'>*</span>dx<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
604:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
605:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
606:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
607:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
608: <span class='modula2-Symbol def-Symbol'>END</span> Disc<span class='modula2-Symbol def-Symbol'>;</span>
609: 
610: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> Circle<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>,</span>r<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
611: <span class='modula2-Keyword def-Keyword'>VAR</span>
612:   e   <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
613:   x<span class='modula2-Symbol def-Symbol'>,</span>y <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
614: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
615:   x <span class='modula2-Symbol def-Symbol'>:=</span> r<span class='modula2-Symbol def-Symbol'>;</span> y <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> e <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span>
616:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
617:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
618:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
619:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
620:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
621:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
622:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
623:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
624:     Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
625:     INC<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
626:     INC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>y<span class='modula2-Symbol def-Symbol'>*</span>dy<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
627:     <span class='modula2-Symbol def-Symbol'>IF</span> e <span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
628:       DEC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
629:       DEC<span class='modula2-Symbol def-Symbol'>(</span>e<span class='modula2-Symbol def-Symbol'>,</span>x<span class='modula2-Symbol def-Symbol'>*</span>dx<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
630:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
631:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
632: <span class='modula2-Symbol def-Symbol'>END</span> Circle<span class='modula2-Symbol def-Symbol'>;</span>
633: 
634: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> Ellipse <span class='modula2-Symbol def-Symbol'>(</span> x0<span class='modula2-Symbol def-Symbol'>,</span>y0 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>;</span>  <span class='modula2-Comment def-Comment def-Syntax'>(* center *)</span>
635:                     a0<span class='modula2-Symbol def-Symbol'>,</span>b0 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>;</span>  <span class='modula2-Comment def-Comment def-Syntax'>(* semi-axes *)</span>
636:                     c     <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>;</span>  <span class='modula2-Comment def-Comment def-Syntax'>(* color *)</span>
637:                     fill  <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>BOOLEAN</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* wether filled *)</span>
638: <span class='modula2-Keyword def-Keyword'>VAR</span>
639:   x<span class='modula2-Symbol def-Symbol'>,</span>y <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span> <span class='modula2-Symbol def-Symbol'>;</span>
640:   a<span class='modula2-Symbol def-Symbol'>,</span>b <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>LONGINT</span> <span class='modula2-Symbol def-Symbol'>;</span>
641:   asq<span class='modula2-Symbol def-Symbol'>,</span>asq2<span class='modula2-Symbol def-Symbol'>,</span>bsq<span class='modula2-Symbol def-Symbol'>,</span>bsq2 <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>LONGINT</span> <span class='modula2-Symbol def-Symbol'>;</span>
642:   d<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>,</span>dy           <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>LONGINT</span> <span class='modula2-Symbol def-Symbol'>;</span>
643: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
644:   x <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Symbol def-Symbol'>;</span>
645:   y <span class='modula2-Symbol def-Symbol'>:=</span> b0 <span class='modula2-Symbol def-Symbol'>;</span>
646:   a <span class='modula2-Symbol def-Symbol'>:=</span> <span class='def-TypeKeyword def-Keyword'>LONGINT</span><span class='modula2-Symbol def-Symbol'>(</span>a0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
647:   b <span class='modula2-Symbol def-Symbol'>:=</span> <span class='def-TypeKeyword def-Keyword'>LONGINT</span><span class='modula2-Symbol def-Symbol'>(</span>b0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
648:   asq <span class='modula2-Symbol def-Symbol'>:=</span> a<span class='modula2-Symbol def-Symbol'>*</span>a <span class='modula2-Symbol def-Symbol'>;</span>
649:   asq2 <span class='modula2-Symbol def-Symbol'>:=</span> asq<span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>;</span>
650:   bsq <span class='modula2-Symbol def-Symbol'>:=</span> b<span class='modula2-Symbol def-Symbol'>*</span>b <span class='modula2-Symbol def-Symbol'>;</span>
651:   bsq2 <span class='modula2-Symbol def-Symbol'>:=</span> bsq<span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Number def-Number'>2</span> <span class='modula2-Symbol def-Symbol'>;</span>
652:   d <span class='modula2-Symbol def-Symbol'>:=</span> bsq<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>asq<span class='modula2-Symbol def-Symbol'>*</span>b<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Symbol def-Symbol'>(</span>asq <span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>4</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
653:   dx <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Symbol def-Symbol'>;</span>
654:   dy <span class='modula2-Symbol def-Symbol'>:=</span> asq2<span class='modula2-Symbol def-Symbol'>*</span>b <span class='modula2-Symbol def-Symbol'>;</span>
655:   <span class='modula2-Symbol def-Symbol'>WHILE</span> dx<span class='modula2-Symbol def-Symbol'>&lt;</span>dy <span class='modula2-Keyword def-Keyword'>DO</span>
656:     <span class='modula2-Symbol def-Symbol'>IF</span> fill <span class='modula2-Keyword def-Keyword'>THEN</span>
657:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
658:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
659:     <span class='modula2-Keyword def-Keyword'>ELSE</span>
660:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
661:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
662:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
663:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
664:     <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
665:     <span class='modula2-Symbol def-Symbol'>IF</span> d<span class='modula2-Symbol def-Symbol'>></span><span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
666:       DEC<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
667:       DEC<span class='modula2-Symbol def-Symbol'>(</span>dy<span class='modula2-Symbol def-Symbol'>,</span>asq2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
668:       DEC<span class='modula2-Symbol def-Symbol'>(</span>d<span class='modula2-Symbol def-Symbol'>,</span>dy<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
669:     <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
670:     INC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
671:     INC<span class='modula2-Symbol def-Symbol'>(</span>dx<span class='modula2-Symbol def-Symbol'>,</span>bsq2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
672:     INC<span class='modula2-Symbol def-Symbol'>(</span>d<span class='modula2-Symbol def-Symbol'>,</span>bsq<span class='modula2-Symbol def-Symbol'>+</span>dx<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
673:   <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
674:   INC<span class='modula2-Symbol def-Symbol'>(</span>d<span class='modula2-Symbol def-Symbol'>,</span><span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>3</span><span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Symbol def-Symbol'>(</span>asq<span class='modula2-Symbol def-Symbol'>-</span>bsq<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Symbol def-Symbol'>(</span>dx<span class='modula2-Symbol def-Symbol'>+</span>dy<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Keyword def-Keyword'>DIV</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
675:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>>=</span><span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>DO</span>
676:     <span class='modula2-Symbol def-Symbol'>IF</span> fill <span class='modula2-Keyword def-Keyword'>THEN</span>
677:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
678:       HLine<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
679:     <span class='modula2-Keyword def-Keyword'>ELSE</span>
680:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
681:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>+</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
682:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>+</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
683:       Plot<span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>-</span>y<span class='modula2-Symbol def-Symbol'>,</span>c<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
684:     <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
685:     <span class='modula2-Symbol def-Symbol'>IF</span> d<span class='modula2-Symbol def-Symbol'>&lt;</span><span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
686:       INC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
687:       INC<span class='modula2-Symbol def-Symbol'>(</span>dx<span class='modula2-Symbol def-Symbol'>,</span>bsq2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
688:       INC<span class='modula2-Symbol def-Symbol'>(</span>d<span class='modula2-Symbol def-Symbol'>,</span>dx<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
689:     <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
690:     DEC<span class='modula2-Symbol def-Symbol'>(</span>y<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
691:     DEC<span class='modula2-Symbol def-Symbol'>(</span>dy<span class='modula2-Symbol def-Symbol'>,</span>asq2<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
692:     INC<span class='modula2-Symbol def-Symbol'>(</span>d<span class='modula2-Symbol def-Symbol'>,</span>asq<span class='modula2-Symbol def-Symbol'>-</span>dy<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>;</span>
693:   <span class='modula2-Symbol def-Symbol'>END</span> <span class='modula2-Symbol def-Symbol'>;</span>
694: <span class='modula2-Symbol def-Symbol'>END</span> Ellipse <span class='modula2-Symbol def-Symbol'>;</span>
695: 
696: 
697: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> Polygon<span class='modula2-Symbol def-Symbol'>(</span>n<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> px<span class='modula2-Symbol def-Symbol'>,</span>py<span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span> c<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
698: <span class='modula2-Keyword def-Keyword'>CONST</span>
699:   MaxPts <span class='modula2-Symbol def-Symbol'>=</span> <span class='modula2-Number def-Number'>20</span><span class='modula2-Symbol def-Symbol'>;</span>
700: <span class='modula2-Keyword def-Keyword'>VAR</span>
701:   y<span class='modula2-Symbol def-Symbol'>,</span>miny<span class='modula2-Symbol def-Symbol'>,</span>maxy<span class='modula2-Symbol def-Symbol'>,</span>x0<span class='modula2-Symbol def-Symbol'>,</span>y0<span class='modula2-Symbol def-Symbol'>,</span>x1<span class='modula2-Symbol def-Symbol'>,</span>y1<span class='modula2-Symbol def-Symbol'>,</span>temp<span class='modula2-Symbol def-Symbol'>,</span>i<span class='modula2-Symbol def-Symbol'>,</span>edge<span class='modula2-Symbol def-Symbol'>,</span>next_edge<span class='modula2-Symbol def-Symbol'>,</span>active <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
702:   xord <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..</span>MaxPts<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
703:   x    <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..</span>MaxPts<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
704:   e    <span class='modula2-Symbol def-Symbol'>:</span> <span class='modula2-Keyword def-Keyword'>ARRAY</span> <span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0..</span>MaxPts<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Keyword def-Keyword'>OF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
705: 
706: <span class='modula2-Keyword def-Keyword'>PROCEDURE</span> quicksort<span class='modula2-Symbol def-Symbol'>(</span>l<span class='modula2-Symbol def-Symbol'>,</span>r<span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
707: <span class='modula2-Keyword def-Keyword'>VAR</span>
708:   i<span class='modula2-Symbol def-Symbol'>,</span>j<span class='modula2-Symbol def-Symbol'>,</span>temp <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>;</span>
709:   key <span class='modula2-Symbol def-Symbol'>:</span> <span class='def-TypeKeyword def-Keyword'>CARDINAL</span><span class='modula2-Symbol def-Symbol'>;</span>
710: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
711:   <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='modula2-Symbol def-Symbol'>(</span> l <span class='modula2-Symbol def-Symbol'>&lt;</span> r <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
712:     i <span class='modula2-Symbol def-Symbol'>:=</span> l<span class='modula2-Symbol def-Symbol'>;</span> j <span class='modula2-Symbol def-Symbol'>:=</span> r<span class='modula2-Symbol def-Symbol'>;</span> key <span class='modula2-Symbol def-Symbol'>:=</span> x<span class='modula2-Symbol def-Symbol'>[</span>xord<span class='modula2-Symbol def-Symbol'>[</span>j<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
713:     <span class='modula2-Symbol def-Symbol'>REPEAT</span>
714:       <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='modula2-Symbol def-Symbol'>(</span> i <span class='modula2-Symbol def-Symbol'>&lt;</span> j <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>[</span>xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>&lt;=</span> key <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span> i <span class='modula2-Symbol def-Symbol'>:=</span> i <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
715:       <span class='modula2-Symbol def-Symbol'>WHILE</span> <span class='modula2-Symbol def-Symbol'>(</span> i <span class='modula2-Symbol def-Symbol'>&lt;</span> j <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span> key <span class='modula2-Symbol def-Symbol'>&lt;=</span> x<span class='modula2-Symbol def-Symbol'>[</span>xord<span class='modula2-Symbol def-Symbol'>[</span>j<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span> j <span class='modula2-Symbol def-Symbol'>:=</span> j <span class='modula2-Symbol def-Symbol'>-</span> <span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
716:       <span class='modula2-Symbol def-Symbol'>IF</span> i <span class='modula2-Symbol def-Symbol'>&lt;</span> j <span class='modula2-Keyword def-Keyword'>THEN</span>
717:         temp <span class='modula2-Symbol def-Symbol'>:=</span> xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> xord<span class='modula2-Symbol def-Symbol'>[</span>j<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> xord<span class='modula2-Symbol def-Symbol'>[</span>j<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> temp<span class='modula2-Symbol def-Symbol'>;</span>
718:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
719:     <span class='modula2-Symbol def-Symbol'>UNTIL</span> <span class='modula2-Symbol def-Symbol'>(</span> i <span class='modula2-Symbol def-Symbol'>>=</span> j <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
720:     temp <span class='modula2-Symbol def-Symbol'>:=</span> xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> xord<span class='modula2-Symbol def-Symbol'>[</span>r<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> xord<span class='modula2-Symbol def-Symbol'>[</span>r<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> temp<span class='modula2-Symbol def-Symbol'>;</span>
721:     <span class='modula2-Symbol def-Symbol'>IF</span> <span class='modula2-Symbol def-Symbol'>(</span>i<span class='modula2-Symbol def-Symbol'>-</span>l <span class='modula2-Symbol def-Symbol'>&lt;</span> r<span class='modula2-Symbol def-Symbol'>-</span>i<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
722:       quicksort<span class='modula2-Symbol def-Symbol'>(</span> l<span class='modula2-Symbol def-Symbol'>,</span> i<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> l <span class='modula2-Symbol def-Symbol'>:=</span> i<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
723:     <span class='modula2-Keyword def-Keyword'>ELSE</span>
724:       quicksort<span class='modula2-Symbol def-Symbol'>(</span> i<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>,</span> r <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> r <span class='modula2-Symbol def-Symbol'>:=</span> i<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
725:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
726:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
727: <span class='modula2-Symbol def-Symbol'>END</span> quicksort<span class='modula2-Symbol def-Symbol'>;</span>
728: 
729: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
730:   <span class='modula2-Symbol def-Symbol'>IF</span> n <span class='modula2-Symbol def-Symbol'>></span> MaxPts <span class='modula2-Keyword def-Keyword'>THEN</span> n <span class='modula2-Symbol def-Symbol'>:=</span> MaxPts <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
731: 
732:   <span class='modula2-Comment def-Comment def-Syntax'>(* find extremal y points *)</span>
733:   miny <span class='modula2-Symbol def-Symbol'>:=</span> py<span class='modula2-Symbol def-Symbol'>[</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> maxy <span class='modula2-Symbol def-Symbol'>:=</span> miny<span class='modula2-Symbol def-Symbol'>;</span>
734:   <span class='modula2-Symbol def-Symbol'>FOR</span> i <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>TO</span> n<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>DO</span>
735:     <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>py<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>&lt;</span> miny <span class='modula2-Keyword def-Keyword'>THEN</span> miny <span class='modula2-Symbol def-Symbol'>:=</span> py<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
736:     <span class='modula2-Symbol def-Symbol'>IF</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>py<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>></span> maxy <span class='modula2-Keyword def-Keyword'>THEN</span> maxy <span class='modula2-Symbol def-Symbol'>:=</span> py<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
737:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
738: 
739:   <span class='modula2-Symbol def-Symbol'>FOR</span> y <span class='modula2-Symbol def-Symbol'>:=</span> miny <span class='modula2-Keyword def-Keyword'>TO</span> maxy <span class='modula2-Keyword def-Keyword'>DO</span>
740:     active <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
741:     <span class='modula2-Symbol def-Symbol'>FOR</span> edge <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span> <span class='modula2-Keyword def-Keyword'>TO</span> n<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span> <span class='modula2-Keyword def-Keyword'>DO</span>
742:       <span class='modula2-Symbol def-Symbol'>IF</span> edge <span class='modula2-Symbol def-Symbol'>=</span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>n<span class='modula2-Symbol def-Symbol'>-</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span> next_edge <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span>
743:                              <span class='modula2-Keyword def-Keyword'>ELSE</span> next_edge <span class='modula2-Symbol def-Symbol'>:=</span> edge <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
744:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
745:       x0 <span class='modula2-Symbol def-Symbol'>:=</span> px<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> y0 <span class='modula2-Symbol def-Symbol'>:=</span> py<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
746:       x1 <span class='modula2-Symbol def-Symbol'>:=</span> px<span class='modula2-Symbol def-Symbol'>[</span>next_edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span> y1 <span class='modula2-Symbol def-Symbol'>:=</span> py<span class='modula2-Symbol def-Symbol'>[</span>next_edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>;</span>
747:       <span class='modula2-Symbol def-Symbol'>IF</span> y0 <span class='modula2-Symbol def-Symbol'>></span> y1 <span class='modula2-Keyword def-Keyword'>THEN</span> temp <span class='modula2-Symbol def-Symbol'>:=</span> x0<span class='modula2-Symbol def-Symbol'>;</span> x0 <span class='modula2-Symbol def-Symbol'>:=</span> x1<span class='modula2-Symbol def-Symbol'>;</span> x1 <span class='modula2-Symbol def-Symbol'>:=</span> temp<span class='modula2-Symbol def-Symbol'>;</span>
748:                       temp <span class='modula2-Symbol def-Symbol'>:=</span> y0<span class='modula2-Symbol def-Symbol'>;</span> y0 <span class='modula2-Symbol def-Symbol'>:=</span> y1<span class='modula2-Symbol def-Symbol'>;</span> y1 <span class='modula2-Symbol def-Symbol'>:=</span> temp <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
749:       <span class='modula2-Symbol def-Symbol'>IF</span> y <span class='modula2-Symbol def-Symbol'>=</span> y0 <span class='modula2-Keyword def-Keyword'>THEN</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span>  <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span> x<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> x0
750:       <span class='modula2-Keyword def-Keyword'>ELSIF</span> <span class='modula2-Symbol def-Symbol'>(</span> y0 <span class='modula2-Symbol def-Symbol'>&lt;=</span> y <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>AND</span> <span class='modula2-Symbol def-Symbol'>(</span> y <span class='modula2-Symbol def-Symbol'>&lt;=</span> y1 <span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>THEN</span>
751:         <span class='modula2-Symbol def-Symbol'>IF</span> x1 <span class='modula2-Symbol def-Symbol'>>=</span> x0 <span class='modula2-Keyword def-Keyword'>THEN</span> <span class='modula2-Comment def-Comment def-Syntax'>(* x increases with y *)</span>
752:           INC<span class='modula2-Symbol def-Symbol'>(</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Symbol def-Symbol'>(</span>x1<span class='modula2-Symbol def-Symbol'>-</span>x0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
753:           <span class='modula2-Symbol def-Symbol'>WHILE</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>-</span>y0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
754:             DEC<span class='modula2-Symbol def-Symbol'>(</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>-</span>y0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> INC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
755:           <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
756:         <span class='modula2-Keyword def-Keyword'>ELSE</span> <span class='modula2-Comment def-Comment def-Syntax'>(* x decreases with y *)</span>
757:           INC<span class='modula2-Symbol def-Symbol'>(</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Symbol def-Symbol'>(</span>x0<span class='modula2-Symbol def-Symbol'>-</span>x1<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
758:           <span class='modula2-Symbol def-Symbol'>WHILE</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>></span> <span class='def-TypeKeyword def-Keyword'>INTEGER</span><span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>-</span>y0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Keyword def-Keyword'>DO</span>
759:             DEC<span class='modula2-Symbol def-Symbol'>(</span> e<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>*</span><span class='modula2-Symbol def-Symbol'>(</span>y1<span class='modula2-Symbol def-Symbol'>-</span>y0<span class='modula2-Symbol def-Symbol'>)</span> <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span> DEC<span class='modula2-Symbol def-Symbol'>(</span>x<span class='modula2-Symbol def-Symbol'>[</span>edge<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
760:           <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
761:         <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
762:         active <span class='modula2-Symbol def-Symbol'>:=</span> active <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>;</span>
763:         xord<span class='modula2-Symbol def-Symbol'>[</span>active<span class='modula2-Symbol def-Symbol'>]</span> <span class='modula2-Symbol def-Symbol'>:=</span> edge<span class='modula2-Symbol def-Symbol'>;</span>
764:       <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
765:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
766:     quicksort<span class='modula2-Symbol def-Symbol'>(</span><span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>,</span>active<span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
767:     i <span class='modula2-Symbol def-Symbol'>:=</span> <span class='modula2-Number def-Number'>0</span><span class='modula2-Symbol def-Symbol'>;</span>
768:     <span class='modula2-Symbol def-Symbol'>WHILE</span> i <span class='modula2-Symbol def-Symbol'>&lt;</span> active <span class='modula2-Keyword def-Keyword'>DO</span>
769:       HLine<span class='modula2-Symbol def-Symbol'>(</span> x<span class='modula2-Symbol def-Symbol'>[</span>xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> y<span class='modula2-Symbol def-Symbol'>,</span> x<span class='modula2-Symbol def-Symbol'>[</span>xord<span class='modula2-Symbol def-Symbol'>[</span>i<span class='modula2-Symbol def-Symbol'>+</span><span class='modula2-Number def-Number'>1</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>]</span><span class='modula2-Symbol def-Symbol'>,</span> c <span class='modula2-Symbol def-Symbol'>)</span><span class='modula2-Symbol def-Symbol'>;</span>
770:       i <span class='modula2-Symbol def-Symbol'>:=</span> i <span class='modula2-Symbol def-Symbol'>+</span> <span class='modula2-Number def-Number'>2</span><span class='modula2-Symbol def-Symbol'>;</span>
771:     <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span>
772:   <span class='modula2-Symbol def-Symbol'>END</span><span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* for y := .. *)</span>
773: <span class='modula2-Symbol def-Symbol'>END</span> Polygon<span class='modula2-Symbol def-Symbol'>;</span>
774: 
775: 
776: 
777: 
778: <span class='modula2-Comment def-Comment def-Syntax'>(* - Auto reset to text mode</span>
779: <span class='modula2-Comment def-Comment def-Syntax'></span>
780: <span class='modula2-Comment def-Comment def-Syntax'>VAR Continue:PROC;</span>
781: <span class='modula2-Comment def-Comment def-Syntax'>PROCEDURE Finish;</span>
782: <span class='modula2-Comment def-Comment def-Syntax'>BEGIN</span>
783: <span class='modula2-Comment def-Comment def-Syntax'>  TextMode;</span>
784: <span class='modula2-Comment def-Comment def-Syntax'>  Continue;</span>
785: <span class='modula2-Comment def-Comment def-Syntax'>END Finish;</span>
786: <span class='modula2-Comment def-Comment def-Syntax'></span>
787: <span class='modula2-Comment def-Comment def-Syntax'>BEGIN</span>
788: <span class='modula2-Comment def-Comment def-Syntax'>  Lib.Terminate( Finish, Continue );</span>
789: <span class='modula2-Comment def-Comment def-Syntax'>  InitCGA ;</span>
790: <span class='modula2-Comment def-Comment def-Syntax'>END Gr.</span>
791: <span class='modula2-Comment def-Comment def-Syntax'></span>
792: <span class='modula2-Comment def-Comment def-Syntax'>*)</span>
793: 
794: <span class='modula2-Symbol def-Symbol'>BEGIN</span>
795:   InitEGA <span class='modula2-Symbol def-Symbol'>;</span> <span class='modula2-Comment def-Comment def-Syntax'>(* Change this for other adaptors *)</span>
796: <span class='modula2-Symbol def-Symbol'>END</span> Graph<span class='modula2-Symbol def-Symbol'>.</span>
797: 
798: 
799: 
