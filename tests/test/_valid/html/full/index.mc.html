 0: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>html</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
 1: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>body</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
 2: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>первый тип тэгов<span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span> - <span class='def-OpenTag def-Tag'>&lt;&amp;</span><span class='mason-masonText def-Insertion'> '../include/dates.mc:now' </span><span class='def-CloseTag def-Tag'>&amp;></span>
 3: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>второй тип тэгов<span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span> - <span class='def-OpenTag def-Tag'>&lt;%</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Var def-Var'>$arg1</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>=</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Numb def-Number'>7</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>?</span><span class='mason-masonText def-Insertion'> </span><span class='perl-String def-String'>'yes'</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>:</span><span class='mason-masonText def-Insertion'> </span><span class='perl-String def-String'>'no'</span><span class='mason-masonText def-Insertion'> </span><span class='def-CloseTag def-Tag'>%></span>
 4: 
 5: here goes some html
 6: 
 7: <span class='mason-masonText1 def-Insertion'>%    if(</span><span class='perl-Var def-Var'>$a</span><span class='mason-masonText1 def-Insertion'> = 5)  {          # через % в самом начале строки можно вставлять однострочные вставки на перле</span>
 8:         <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>center</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span><span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>a = <span class='html-htmlNumb def-Number'>5</span>!<span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span><span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>center</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
 9: <span class='mason-masonText1 def-Insertion'>%    }                      # подсветка перловая от </span><span class='def-StringEdge def-String'>"</span><span class='def-String'>%</span><span class='def-StringEdge def-String'>"</span><span class='mason-masonText1 def-Insertion'> и до конца строки</span>
10: 
11: <span class='def-OpenTag def-Tag'>&lt;%perl></span><span class='mason-masonText def-Insertion'>     </span><span class='def-Comment def-Syntax'># sample of %perl section</span><span class='mason-masonText def-Insertion'></span>
12: <span class='mason-masonText def-Insertion'>    </span><span class='def-Comment def-Syntax'># в этой и остальных разделах должна быть перловая подсветка</span><span class='mason-masonText def-Insertion'></span>
13: <span class='mason-masonText def-Insertion'>    </span><span class='def-Comment def-Syntax'># here goes huge amount of perl code</span><span class='mason-masonText def-Insertion'></span>
14: <span class='mason-masonText def-Insertion'>    </span>
15: <span class='mason-masonText def-Insertion'>    </span><span class='perl-Word def-Keyword'>my</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Var def-Var'>@arr</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
16: <span class='mason-masonText def-Insertion'>    </span><span class='perl-Var def-Var'>@arr</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>=</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Word def-Keyword'>split</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
17: <span class='def-SymbolStrong def-Symbol'>{</span><span class='mason-masonText def-Insertion'></span>
18: <span class='mason-masonText def-Insertion'>&lt;/%perl></span><span class='def-Text'></span>
19: <span class='def-Text'></span>
20: <span class='def-Text'>  </span><span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>adsfasdf<span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>b</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
21: <span class='def-Text'></span>
22: <span class='mason-masonText def-Insertion'>&lt;%perl></span>
23: 
24: <span class='def-SymbolStrong def-Symbol'>}</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span>
25: <span class='mason-masonText def-Insertion'>    </span><span class='perl-Var def-Var'>$m</span><span class='perl-Symb def-Symbol'>-></span><span class='mason-masonText def-Insertion'>out</span><span class='def-Symbol'>(</span><span class='perl-Var def-Var'>$arr</span><span class='perl-Symb def-Symbol'>[</span><span class='perl-Numb def-Number'>1</span><span class='perl-Symb def-Symbol'>]</span><span class='def-Symbol'>)</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
26: <span class='mason-masonText def-Insertion'>    </span><span class='def-Comment def-Syntax'># ...</span><span class='mason-masonText def-Insertion'></span>
27: <span class='def-CloseTag def-Tag'>&lt;/%perl></span>
28: 
29: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>body</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
30: <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>html</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
31: 
32: <span class='def-OpenTag def-Tag'>&lt;%init></span><span class='mason-masonText def-Insertion'>     </span><span class='def-Comment def-Syntax'># sample of %init section</span><span class='mason-masonText def-Insertion'></span>
33: <span class='perl-Word def-Keyword'>my</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Var def-Var'>$a</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>=</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Numb def-Number'>5</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
34: <span class='def-CloseTag def-Tag'>&lt;/%init></span>
35: 
36: <span class='def-OpenTag def-Tag'>&lt;%args></span><span class='mason-masonText def-Insertion'></span>
37: <span class='perl-Var def-Var'>$arg1</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Symb def-Symbol'>=</span><span class='perl-Symb def-Symbol'>></span><span class='mason-masonText def-Insertion'> </span><span class='perl-Numb def-Number'>7</span><span class='mason-masonText def-Insertion'>   </span><span class='def-Comment def-Syntax'># sample of %args section</span><span class='mason-masonText def-Insertion'></span>
38: <span class='def-CloseTag def-Tag'>&lt;/%args></span>
39: 
40: <span class='def-OpenTag def-Tag'>&lt;%flags></span><span class='mason-masonText def-Insertion'>        </span><span class='def-Comment def-Syntax'># sample of %flags section</span><span class='mason-masonText def-Insertion'></span>
41: <span class='perl-Var def-Var'>inherit </span><span class='perl-Symb def-Symbol'>=></span><span class='mason-masonText def-Insertion'> </span><span class='perl-Word def-Keyword'>undef</span><span class='mason-masonText def-Insertion'></span>
42: <span class='def-CloseTag def-Tag'>&lt;/%flags></span>
43: 
44: <span class='def-OpenTag def-Tag'>&lt;%filter></span><span class='mason-masonText def-Insertion'>        </span><span class='def-Comment def-Syntax'># sample of %filter section</span><span class='mason-masonText def-Insertion'></span>
45: <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='perl-String def-String'>link</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>url</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>=</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>"</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>"</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='perl-String def-String'>/link</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-Symb def-Symbol'>&lt;</span>a href<span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>"</span><span class='perl-Symb def-Symbol'>></span><span class='perl-Var def-Var'>$2</span><span class='perl-Stream def-Path def-URI'>&lt;/a></span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>ig</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
46: <span class='perl-ReType perl-Word def-Keyword'>s</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='perl-String def-String'>link</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>url</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>=</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>"</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='perl-String def-String'>"</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='perl-String def-String'>popup</span><span class='regexp-SymbClass def-Var'>\s</span><span class='regexp-MetaSymb def-Symbol'>*</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>(</span><span class='regexp-MetaSymb def-Symbol'>.</span><span class='regexp-MetaSymb def-Symbol'>+</span><span class='regexp-MetaSymb def-Symbol'>?</span><span class='regexp-Quote regexp-MetaSymb def-Symbol'>)</span><span class='regexp-Symbol def-StringContent def-String'>\[</span><span class='perl-String def-String'>/link</span><span class='regexp-Symbol def-StringContent def-String'>\]</span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span> <span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>{</span><span class='perl-Symb def-Symbol'>&lt;</span>a href<span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>"</span><span class='perl-Var def-Var'>$1</span><span class='perl-String def-String'>"</span> target<span class='perl-Symb def-Symbol'>=</span><span class='perl-String def-String'>"_blank"</span><span class='perl-Symb def-Symbol'>></span><span class='perl-Var def-Var'>$2</span><span class='perl-Stream def-Path def-URI'>&lt;/a></span><span class='perl-StringEdge regexp-SpecQuote def-StringEdge def-String'>}</span><span class='perl-ReModif regexp-SpecArea def-Keyword'>ig</span><span class='perl-MainSymb def-SymbolStrong def-Symbol'>;</span><span class='mason-masonText def-Insertion'></span>
47: <span class='def-CloseTag def-Tag'>&lt;/%filter></span>
48: 
49: <span class='def-OpenTag def-Tag'>&lt;%once></span><span class='mason-masonText def-Insertion'></span>
50: <span class='mason-masonText def-Insertion'>    </span><span class='def-Comment def-Syntax'># perl code ...</span><span class='mason-masonText def-Insertion'></span>
51: <span class='mason-masonText def-Insertion'>    </span><span class='def-Comment def-Syntax'># ...</span><span class='mason-masonText def-Insertion'></span>
52: <span class='def-CloseTag def-Tag'>&lt;/%once></span>
53: 
54: <span class='def-OpenTag def-Tag'>&lt;%method right_column></span><span class='mason-masonText def-Insertion'></span>
55: <span class='mason-masonText def-Insertion'>    </span><span class='def-OpenTag def-Tag'>&lt;&amp;</span><span class='mason-masonText def-Insertion'> shared/rightcolumn/articlehelp.mc </span><span class='def-CloseTag def-Tag'>&amp;></span><span class='mason-masonText def-Insertion'></span>
56: <span class='mason-masonText def-Insertion'>    blah-blah html</span>
57: <span class='def-CloseTag def-Tag'>&lt;/%method></span>
58: 
59: <span class='def-OpenTag def-Tag'>&lt;%def .td></span><span class='mason-masonText def-Insertion'></span>
60: <span class='mason-masonText1 def-Insertion'>%    if(</span><span class='perl-Var def-Var'>$config</span><span class='mason-masonText1 def-Insertion'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$item</span><span class='perl-Symb def-Symbol'>}</span><span class='mason-masonText1 def-Insertion'>) {</span><span class='mason-masonText def-Insertion'></span>
61: <span class='mason-masonText def-Insertion'>        </span><span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;</span><span class='html-htmlOpenTag def-Keyword'>td</span><span class='html-htmlUnknowParam def-ParameterUnknown def-ParameterStrong def-Parameter'> </span><span class='html-htmlParam def-Parameter'>align</span><span class='html-htmlTagEqu def-Symbol'>=</span><span class='html-htmlString def-String'>"center"</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
62:             <span class='def-OpenTag def-Tag'>&lt;%</span><span class='mason-masonText def-Insertion'> </span><span class='perl-Var def-Var'>$data</span><span class='perl-Symb def-Symbol'>-></span><span class='perl-Symb def-Symbol'>{</span><span class='perl-Var def-Var'>$item</span><span class='perl-Symb def-Symbol'>}</span><span class='mason-masonText def-Insertion'> </span><span class='def-CloseTag def-Tag'>%></span>
63:         <span class='html-htmlTagBr def-OpenTag def-Tag'>&lt;/</span><span class='html-htmlCloseTag html-htmlOpenTag def-Keyword'>td</span><span class='html-htmlTagBr def-OpenTag def-Tag'>></span>
64: <span class='mason-masonText1 def-Insertion'>%    }</span><span class='mason-masonText def-Insertion'></span>
65: <span class='def-OpenTag def-Tag'>&lt;%args></span><span class='mason-masonText def-Insertion'></span>
66: <span class='perl-Var def-Var'>$config</span><span class='mason-masonText def-Insertion'></span>
67: <span class='perl-Var def-Var'>$data</span><span class='mason-masonText def-Insertion'></span>
68: <span class='perl-Var def-Var'>$item</span><span class='mason-masonText def-Insertion'></span>
69: <span class='def-CloseTag def-Tag'>&lt;/%args></span><span class='mason-masonText def-Insertion'></span>
70: <span class='def-CloseTag def-Tag'>&lt;/%def></span>
71: 
