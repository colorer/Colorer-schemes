  0: <span class='dssp-dsspExpr def-Directive'>PROGRAM $IBM-DVK</span> USE SYSTEM <span class='dssp-dsspParam def-Parameter'>B16</span> <span class='dssp-dsspString def-String'>."</span>
  1: <span class='dssp-dsspString def-String'>Работа с дисками DEC-машин по линии связи RS-232 - УПО"</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[."</span>
  2: <span class='dssp-dsspComment def-Comment def-Syntax'>Используются библиотечные программы: RS232.DSP SCRWORK1.DSP MENU4.DSP</span>
  3: <span class='dssp-dsspComment def-Comment def-Syntax'> Вызов: PDP</span>
  4: <span class='dssp-dsspComment def-Comment def-Syntax'>При вводе имени IBM-файла допускается задавать символы * и ?.</span>
  5: <span class='dssp-dsspComment def-Comment def-Syntax'>При вводе имени PDP-файла посылка пустой строки означает выдачу на экран</span>
  6: <span class='dssp-dsspComment def-Comment def-Syntax'>директория диска и возможность выбора из него нужного имени"]</span>
  7: 
  8:      <span class='dssp-dsspParam def-Parameter'>LONG</span> <span class='dssp-dsspParam def-Parameter'>VAR  AIBUF</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[адрес буфера ввода]</span>
  9:      <span class='dssp-dsspParam def-Parameter'>LONG</span> <span class='dssp-dsspParam def-Parameter'>VAR  AOBUF</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[адрес буфера вывода]</span>
 10:      <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VAR  COMIN</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[полученная команда]</span>
 11:      <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VAR  COMOUT</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[команда для передачи]</span>
 12:           <span class='dssp-dsspParam def-Parameter'>VAR  DLIBL</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[длина введенного блока]</span>
 13:           <span class='dssp-dsspParam def-Parameter'>VAR  DLOBL</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[длина блока для вывода]</span>
 14:      <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VAR  YBL</span>    <span class='dssp-dsspComment def-Comment def-Syntax'>[признак: 1 - блок получен; 0 - нет]</span>
 15:           <span class='dssp-dsspParam def-Parameter'>VAR  KSUM</span>   <span class='dssp-dsspComment def-Comment def-Syntax'>[контрольная сумма]</span>
 16: <span class='def-NumberDec def-Number'>100</span>      <span class='dssp-dsspParam def-Parameter'>VALUE LBUF</span>   <span class='dssp-dsspComment def-Comment def-Syntax'>[длина буферов ввода и вывода]</span>
 17: LBUF <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VCTR IBUF</span>   <span class='dssp-dsspComment def-Comment def-Syntax'>[буфер ввода]</span>
 18: LBUF <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VCTR OBUF</span>   <span class='dssp-dsspComment def-Comment def-Syntax'>[буфер вывода]</span>
 19: <span class='def-NumberDec def-Number'>100</span>  <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VCTR DNAM</span>   <span class='dssp-dsspComment def-Comment def-Syntax'>[имена существующих дисководов]</span>
 20:      <span class='dssp-dsspParam def-Parameter'>BYTE</span>  <span class='dssp-dsspParam def-Parameter'>VAR NDISC</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[количество существующих дисководов]</span>
 21: 
 22: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='def-NumberDec def-Number'>40</span> <span class='dssp-dsspParam def-Parameter'>STRING IBFNAME</span><span class='dssp-dsspString def-String'> "*.DSP"</span> <span class='dssp-dsspParam def-Parameter'>!</span> IBFNAME
 23: EMPTY 0FF00 <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VCTR [SegDATA]</span> PFILE <span class='dssp-dsspComment def-Comment def-Syntax'>[файл с PDP]</span>
 24: <span class='dssp-dsspParam def-Parameter'>LONG</span>        <span class='dssp-dsspParam def-Parameter'>VAR LFIL</span>  <span class='dssp-dsspComment def-Comment def-Syntax'>[длина файла]</span>
 25: 
 26: <span class='dssp-dsspComment def-Comment def-Syntax'>[добавление и исправление к сетевым программам]</span>
 27: <span class='dssp-dsspWord def-Keyword'>COPYW LOB LOB0</span>
 28: : LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[b]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LOB0 KSUM + <span class='dssp-dsspParam def-Parameter'>!</span> KSUM <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 29: : LIW <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> LIB LIB <span class='dssp-dsspParam def-Parameter'>SWB</span> + <span class='dssp-dsspComment def-Comment def-Syntax'>[w]</span> ;
 30: : LOW <span class='dssp-dsspComment def-Comment def-Syntax'>[w]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LOB <span class='dssp-dsspParam def-Parameter'>SWB</span> LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 31: : LIS <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> LIS1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 32:   : LIS1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> LIB <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!TB</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
 33: : LOS <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> LOS1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 34:   : LOS1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B LOB <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
 35: 
 36: <span class='dssp-dsspParam def-Parameter'>B10</span>
 37: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR MM.I</span>    <span class='def-NumberDec def-Number'>7</span> <span class='dssp-dsspParam def-Parameter'>!</span> MM.I
 38: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR MM.J</span>   <span class='def-NumberDec def-Number'>30</span> <span class='dssp-dsspParam def-Parameter'>!</span> MM.J
 39: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR MM.LI</span>   <span class='def-NumberDec def-Number'>9</span> <span class='dssp-dsspParam def-Parameter'>!</span> MM.LI
 40: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR MM.LJT</span> <span class='def-NumberDec def-Number'>42</span> <span class='dssp-dsspParam def-Parameter'>!</span> MM.LJT
 41: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR MM.LJV</span>  <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> MM.LJV
 42: 
 43: <span class='dssp-dsspParam def-Parameter'>B16</span>
 44: :: : PDP <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[LINIT 0 LOB]</span> PDP1 DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 45:    : PDP1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span><span class='dssp-dsspString def-String'> "ДССП PDP (С ФС) &lt;--> ДССП IBM"</span> <span class='def-Insertion'>ON</span><span class='dssp-dsspConstr def-Insertion'> ?SPALL 3</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> MESC NOP</span>
 46:      '' PV1 '' TV1 '' <span class='dssp-dsspParam def-Parameter'>NOP</span> MM.I MM.J MM.LI MM.LJT MM.LJV GLBMENU <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 47:    : PV1 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> BR <span class='def-NumberDec def-Number'>1</span> PDPDIR   <span class='def-NumberDec def-Number'>2</span> CN.<span class='dssp-dsspParam def-Parameter'>D</span>-I    <span class='def-NumberDec def-Number'>3</span> CT.<span class='dssp-dsspParam def-Parameter'>D</span>-I    <span class='def-NumberDec def-Number'>4</span> CN.I-<span class='dssp-dsspParam def-Parameter'>D</span>    <span class='def-NumberDec def-Number'>5</span> CT.I-<span class='dssp-dsspParam def-Parameter'>D</span>
 48:      <span class='def-NumberDec def-Number'>6</span> NEWDISK  <span class='def-NumberDec def-Number'>7</span> SHDVKFIL  <span class='def-NumberDec def-Number'>8</span> SHIBMFIL  <span class='def-NumberDec def-Number'>9</span> SETPORT  <span class='dssp-dsspWord def-Keyword'>ELSE NOP</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 49:    : TV1 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> BR <span class='def-NumberDec def-Number'>1</span><span class='dssp-dsspString def-String'> "Каталог PDP"</span>
 50:                 <span class='def-NumberDec def-Number'>2</span><span class='dssp-dsspString def-String'> "Копирование двоичного  файла с PDP на IBM"</span>
 51:                 <span class='def-NumberDec def-Number'>3</span><span class='dssp-dsspString def-String'> "Копирование текстового файла с PDP на IBM"</span>
 52:                 <span class='def-NumberDec def-Number'>4</span><span class='dssp-dsspString def-String'> "Копирование двоичного  файла с IBM на PDP"</span>
 53:                 <span class='def-NumberDec def-Number'>5</span><span class='dssp-dsspString def-String'> "Копирование текстового файла с IBM на PDP"</span>
 54:                 <span class='def-NumberDec def-Number'>6</span><span class='dssp-dsspString def-String'> "Выбор дисковода на PDP-машине"</span>
 55:                 <span class='def-NumberDec def-Number'>7</span><span class='dssp-dsspString def-String'> "Показ текстового файла на ДВК"</span>
 56:                 <span class='def-NumberDec def-Number'>8</span><span class='dssp-dsspString def-String'> "Показ текстового файла на IBM"</span>
 57:                 <span class='def-NumberDec def-Number'>9</span><span class='dssp-dsspString def-String'> "Выбор порта COMi"</span>
 58:            <span class='dssp-dsspWord def-Keyword'>ELSE EMSTR</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
 59: : SETPORT <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 60: 
 61: <span class='dssp-dsspComment def-Comment def-Syntax'>[формат блока, передаваемого по линии связи:</span>
 62: <span class='dssp-dsspComment def-Comment def-Syntax'> &lt;команда (1б)> &lt;длина (2б)> &lt;информация (Nб)> &lt;контр.сумма (1б)> ]</span>
 63: 
 64: <span class='dssp-dsspComment def-Comment def-Syntax'>[ввод блока с линии в память с адреса AIBUF]</span>
 65: : INBLOCK <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> YBL <span class='def-NumberDec def-Number'>4</span> LOB LIB <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 1 INBL0 7 LERR</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> RESTART</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 66:   : INBL0 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> LIB <span class='dssp-dsspParam def-Parameter'>!</span> COMIN  LIW <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLIBL AIBUF <span class='dssp-dsspParam def-Parameter'>E2</span> LIS LIB <span class='dssp-dsspComment def-Comment def-Syntax'>[KS]</span>
 67:     DLIBL 0FF <span class='dssp-dsspParam def-Parameter'>&amp;</span> DLIBL <span class='dssp-dsspParam def-Parameter'>SWB</span> 0FF <span class='dssp-dsspParam def-Parameter'>&amp;</span> + COMIN + AIBUF DLIBL KS 0FF <span class='dssp-dsspParam def-Parameter'>&amp;</span>
 68:     <span class='dssp-dsspComment def-Comment def-Syntax'>[KS,KS']</span> <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> INBL1 NOK!</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 69:  : INBL1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> OK! <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>!</span> YBL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 70:  : OK! <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>1</span> LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 71:  : NOK! <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>2</span> LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 72:  : KS <span class='dssp-dsspComment def-Comment def-Syntax'>[ks0,a,l]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> KS1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[KS]</span> ;
 73:    : KS1 <span class='dssp-dsspComment def-Comment def-Syntax'>[ks,a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B <span class='dssp-dsspParam def-Parameter'>C3</span> + <span class='dssp-dsspParam def-Parameter'>E3</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[ks',a+1]</span> ;
 74: 
 75: <span class='dssp-dsspComment def-Comment def-Syntax'>[передача блока (AOBUF,DLOBL) в линию]</span>
 76: : OUTBLOCK <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='dssp-dsspConstr def-Insertion'>RP</span><span class='dssp-dsspExpr def-Directive'> OBL1</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 77:   : OBL1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> LIB  <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 1 EX  2 OBL2  4 OBL2  7 LERR</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> RESTART</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 78:   : OBL2 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> OK! <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> KSUM COMOUT LOB DLOBL LOW AOBUF DLOBL LOS KSUM LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 79: 
 80:   : ERRR <span class='def-NumberDec def-Number'>4</span> <span class='dssp-dsspParam def-Parameter'>!</span> CLFON 0F <span class='dssp-dsspParam def-Parameter'>!</span> CLKANT 0F <span class='dssp-dsspParam def-Parameter'>!</span> CLTXT '' ERRRT
 81:     <span class='dssp-dsspComment def-Comment def-Syntax'>[''P]</span> MM.I MM.LI + <span class='def-NumberDec def-Number'>4</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[=I]</span>
 82:     MM.J <span class='def-NumberDec def-Number'>3</span>-               <span class='dssp-dsspComment def-Comment def-Syntax'>[=J]</span>
 83:     <span class='def-NumberDec def-Number'>5</span>                     <span class='dssp-dsspComment def-Comment def-Syntax'>[=LI]</span>
 84:     <span class='def-NumberDec def-Number'>2</span>+ MM.LJT MM.LJV + <span class='def-NumberDec def-Number'>3</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[=LJ]</span> GENINF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>5</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> BELL</span> <span class='dssp-dsspParam def-Parameter'>TRB</span> <span class='dssp-dsspParam def-Parameter'>D</span> DELWIND ;
 85:     : ERRRT <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 4 "Ошибка диска! Нажмите любую клавишу."</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> EMSTR</span> ;
 86: 
 87:  : WAITI '' WAITIT WINFORM <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 88:  : WAITIT <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 4 "Идет процесс обмена информацией"</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> EMSTR</span> ;
 89: 
 90:  : WAITS '' WAITST WINFORM <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 91:  : WAITST <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 4 "Процесс считывания/сохранения файла"</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> EMSTR</span> ;
 92: 
 93:  : WINFORM <span class='dssp-dsspComment def-Comment def-Syntax'>[''P]</span> <span class='def-Insertion'>ON</span><span class='dssp-dsspConstr def-Insertion'> ?SPALL 3</span>
 94:    MM.I <span class='def-NumberDec def-Number'>2</span>- MM.J <span class='def-NumberDec def-Number'>3</span>- MM.LI <span class='def-NumberDec def-Number'>2</span>+ MM.LJT MM.LJV + <span class='def-NumberDec def-Number'>3</span>+ GENINF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 95: 
 96: <span class='dssp-dsspComment def-Comment def-Syntax'>[прием строки с линии и запись ее на диск]</span>
 97: : STOD <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> DERR ABEND</span> @WIBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> <span class='def-NumberDec def-Number'>0</span> ' IBUF <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF <span class='dssp-dsspConstr def-Insertion'>RP</span><span class='dssp-dsspExpr def-Directive'> STOD1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
 98:   : STOD1 <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> INBLOCK YBL <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> STOD2</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[L']</span> ;
 99:   : STOD2 <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> AIBUF DLIBL OS CH  DLIBL - <span class='dssp-dsspComment def-Comment def-Syntax'>[L-DLIBL]</span> <span class='dssp-dsspParam def-Parameter'>C</span> EX0 <span class='dssp-dsspComment def-Comment def-Syntax'>[L']</span> ;
100:   : ABEND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>7</span> LOB <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
101:   : @WIBUF <span class='def-NumberDec def-Number'>0</span> IBUF <span class='def-NumberDec def-Number'>1</span> IBUF <span class='dssp-dsspParam def-Parameter'>SWB</span> + <span class='dssp-dsspComment def-Comment def-Syntax'>[w]</span> ;
102: 
103: <span class='dssp-dsspComment def-Comment def-Syntax'>[чтение строки с диска и передача ее в линию;</span>
104: <span class='dssp-dsspComment def-Comment def-Syntax'> в буфере ввода длина строки (2б)]</span>
105: : STOL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> DERR ABEND1</span>  <span class='def-NumberDec def-Number'>0</span> ' OBUF <span class='dssp-dsspParam def-Parameter'>!</span> AOBUF
106:   @WIBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LBUF <span class='dssp-dsspParam def-Parameter'>/</span> <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> 1+</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[L,NBL]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> STOL1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
107:   : STOL1 <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LBUF <span class='dssp-dsspParam def-Parameter'>MIN</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL AOBUF DLOBL IS CH OUTBLOCK
108:     <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> DLOBL - <span class='dssp-dsspComment def-Comment def-Syntax'>[L']</span> ;
109:   : ABEND1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> LIB <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'>  4 ABEND</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> NOP</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
110: 
111: <span class='dssp-dsspComment def-Comment def-Syntax'>[выбор дисковода]</span>
112: : NEWDISK <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>4</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT <span class='dssp-dsspComment def-Comment def-Syntax'>[дай список дисков]</span> <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL OUTBLOCK
113:   <span class='def-NumberDec def-Number'>0</span> ' IBUF <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF  INBLOCK  AIBUF DLIBL  <span class='def-NumberDec def-Number'>0</span> ' DNAM <span class='dssp-dsspParam def-Parameter'>!SB</span>
114:   DLIBL -<span class='def-NumberDec def-Number'>3</span> SHT <span class='dssp-dsspParam def-Parameter'>!</span> NDISC NE1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
115:   <span class='dssp-dsspComment def-Comment def-Syntax'>[меню выбора дисковода]</span>
116:   : NE1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span><span class='dssp-dsspString def-String'> "Дисководы"</span>
117:     '' PV2 '' TV2 '' <span class='dssp-dsspParam def-Parameter'>NOP</span> <span class='def-NumberDec def-Number'>5</span> 0A NDISC <span class='def-NumberDec def-Number'>10</span> <span class='dssp-dsspParam def-Parameter'>MIN</span> <span class='def-NumberDec def-Number'>9</span> <span class='def-NumberDec def-Number'>0</span> NDISC GLBMEN2 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
118:   : TV2 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='def-NumberDec def-Number'>1</span>- <span class='def-NumberDec def-Number'>3</span> SHT ' DNAM <span class='def-NumberDec def-Number'>8</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a,8]</span> ;
119:   : PV2 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='def-NumberDec def-Number'>1</span>- <span class='def-NumberDec def-Number'>3</span> SHT ' DNAM <span class='dssp-dsspParam def-Parameter'>!</span> AOBUF <span class='def-NumberDec def-Number'>8</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT OUTBLOCK
120:     LIB <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> LERR</span> DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
121: 
122:   <span class='dssp-dsspComment def-Comment def-Syntax'>[установка на файл A,L]</span>
123:   : SFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> !SOBUF <span class='def-NumberDec def-Number'>41</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT <span class='def-NumberDec def-Number'>0</span> ' OBUF <span class='dssp-dsspParam def-Parameter'>!</span> AOBUF
124:     OUTBLOCK LIB <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> LERR</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
125: 
126:     : !SOBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> <span class='dssp-dsspParam def-Parameter'>E2</span> <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='def-NumberDec def-Number'>0</span> ' OBUF <span class='dssp-dsspParam def-Parameter'>!SB</span>  <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
127:     : !WOBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[w]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> OBUF <span class='dssp-dsspParam def-Parameter'>SWB</span> <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>!</span> OBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>2</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
128: 
129: <span class='dssp-dsspComment def-Comment def-Syntax'>[взять длину файла]</span>
130: : GDLFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>44</span> WCALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> ;
131: <span class='dssp-dsspComment def-Comment def-Syntax'>[открыть файл]</span>
132: : OPFIL  <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span>  <span class='def-NumberDec def-Number'>42</span> CALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
133: <span class='dssp-dsspComment def-Comment def-Syntax'>[открыть файл]</span>
134: : WOPFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span>  4A CALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
135: <span class='dssp-dsspComment def-Comment def-Syntax'>[закрыть файл]</span>
136: : CLFIL  <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span>  <span class='def-NumberDec def-Number'>43</span> CALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
137: <span class='dssp-dsspComment def-Comment def-Syntax'>[обрезать файл]</span>
138: : CUTFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span>  4B CALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
139: 
140: <span class='dssp-dsspComment def-Comment def-Syntax'>[обратиться к команде файловой системы]</span>
141: : CALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[kop]</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>0</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL OUTBLOCK LIB <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> LERR</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
142: 
143: <span class='dssp-dsspComment def-Comment def-Syntax'>[обратиттся к команде файловой системы и получить одно слово]</span>
144: : WCALLFS <span class='dssp-dsspComment def-Comment def-Syntax'>[kop]</span> CALLFS <span class='def-NumberDec def-Number'>0</span> ' IBUF <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF INBLOCK @WIBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[W]</span> ;
145: 
146: <span class='dssp-dsspComment def-Comment def-Syntax'>[получить строку с диска длиной l и записать ее по адресу a]</span>
147: : GSTR <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> !WOBUF <span class='def-NumberDec def-Number'>47</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT <span class='def-NumberDec def-Number'>0</span> ' OBUF <span class='dssp-dsspParam def-Parameter'>!</span> AOBUF
148:   OUTBLOCK <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> LBUF <span class='dssp-dsspParam def-Parameter'>/</span> <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> 1+</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> GST1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
149:   : GST1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF INBLOCK DLIBL + <span class='dssp-dsspComment def-Comment def-Syntax'>[a+DLIBL]</span> ;
150: 
151: <span class='dssp-dsspComment def-Comment def-Syntax'>[показ файла на экране]</span>
152: USE $SCRWORK
153: 
154: <span class='dssp-dsspComment def-Comment def-Syntax'>[показ DVK - файла]</span>
155: : SHDVKFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> LERR SFERRR</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> ESCR WSCOFF</span>
156:   VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> SHDFL1 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
157: : SHDFL1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> CT10 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>0</span> <span class='def-NumberDec def-Number'>0</span> <span class='def-NumberDec def-Number'>19</span> <span class='def-NumberDec def-Number'>50</span> <span class='dssp-dsspParam def-Parameter'>SAVEWIN</span> CLS SCON <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> ESCR WSCOFF</span>
158:   <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>C2</span> KOI-ALT <span class='dssp-dsspParam def-Parameter'>TOS</span> SCOFF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> CONT <span class='dssp-dsspParam def-Parameter'>TRB</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspParam def-Parameter'>LOADWIN</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
159: 
160: : SFERRR WSCOFF ERRR ;
161: : WSCOFF SCOFF <span class='dssp-dsspParam def-Parameter'>LOADWIN</span> ;
162: 
163: <span class='dssp-dsspComment def-Comment def-Syntax'>[показ IBM-файла]</span>
164: : SHIBMFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> DERR SFERRR</span> VVNAMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> SHIFL1 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
165: : SHIFL1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> SAVESCR CLS <span class='def-NumberDec def-Number'>0</span> ' COMBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L,AT]</span><span class='dssp-dsspString def-String'> "TYPE "</span> <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>!SB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L,AT]</span>
166:   <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='def-NumberDec def-Number'>5</span> + <span class='dssp-dsspParam def-Parameter'>!SB</span> <span class='dssp-dsspParam def-Parameter'>E3</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='def-NumberDec def-Number'>5</span> + TEXEC <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> CONT <span class='dssp-dsspParam def-Parameter'>TRB</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspParam def-Parameter'>LOADWIN</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
167: 
168: MLPATHNAME <span class='def-NumberDec def-Number'>5</span> + <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>VCTR COMBUF</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[буфер для формирования команды]</span>
169: : CONT <span class='dssp-dsspParam def-Parameter'>CR</span><span class='dssp-dsspString def-String'> ."               *$ Нажмите любую клавишу для продолжения $*"</span> ;
170: 
171: <span class='dssp-dsspComment def-Comment def-Syntax'>[перекодировка КОИ-8 -> АЛЬТЕРНАТИВНАЯ]</span>
172: : KOI-ALT <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> KO1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
173:   : KO1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B  0C0 0FF <span class='dssp-dsspParam def-Parameter'>SEG</span> <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> KO2</span>  <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
174:     : KO2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B 0C0 - TALT <span class='dssp-dsspComment def-Comment def-Syntax'>[a,c]</span> <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!TB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> ;
175: 
176: <span class='dssp-dsspComment def-Comment def-Syntax'>[перекодировка АЛЬТЕРНАТИВНАЯ -> КОИ-8]</span>
177: : ALT-KOI <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> ALT1</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
178:   : ALT1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B <span class='dssp-dsspComment def-Comment def-Syntax'>[a,k]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='def-NumberDec def-Number'>80</span> 0AF <span class='dssp-dsspParam def-Parameter'>SEG</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> ALT2 ALT3</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
179:     : ALT2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,k]</span> <span class='def-NumberDec def-Number'>80</span> - TKOI1 <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!TB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> ;
180:     : ALT3 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,k]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='def-NumberFloat def-Number'>0E0</span> 0EF <span class='dssp-dsspParam def-Parameter'>SEG</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> ALT4 D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> ;
181:       : ALT4 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,k]</span> <span class='def-NumberFloat def-Number'>0E0</span> - TKOI2 <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!TB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> ;
182: 
183: <span class='dssp-dsspParam def-Parameter'>B10</span>
184: <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>CNST TALT</span>
185: <span class='def-NumberDec def-Number'>238</span> <span class='def-NumberDec def-Number'>160</span> <span class='def-NumberDec def-Number'>161</span> <span class='def-NumberDec def-Number'>230</span> <span class='def-NumberDec def-Number'>164</span> <span class='def-NumberDec def-Number'>165</span> <span class='def-NumberDec def-Number'>228</span> <span class='def-NumberDec def-Number'>163</span> <span class='def-NumberDec def-Number'>229</span> <span class='def-NumberDec def-Number'>168</span> <span class='def-NumberDec def-Number'>169</span> <span class='def-NumberDec def-Number'>170</span> <span class='def-NumberDec def-Number'>171</span> <span class='def-NumberDec def-Number'>172</span> <span class='def-NumberDec def-Number'>173</span> <span class='def-NumberDec def-Number'>174</span>
186: <span class='def-NumberDec def-Number'>175</span> <span class='def-NumberDec def-Number'>239</span> <span class='def-NumberDec def-Number'>224</span> <span class='def-NumberDec def-Number'>225</span> <span class='def-NumberDec def-Number'>226</span> <span class='def-NumberDec def-Number'>227</span> <span class='def-NumberDec def-Number'>166</span> <span class='def-NumberDec def-Number'>162</span> <span class='def-NumberDec def-Number'>236</span> <span class='def-NumberDec def-Number'>235</span> <span class='def-NumberDec def-Number'>167</span> <span class='def-NumberDec def-Number'>232</span> <span class='def-NumberDec def-Number'>237</span> <span class='def-NumberDec def-Number'>233</span> <span class='def-NumberDec def-Number'>231</span> <span class='def-NumberDec def-Number'>234</span>
187: <span class='def-NumberDec def-Number'>158</span> <span class='def-NumberDec def-Number'>128</span> <span class='def-NumberDec def-Number'>129</span> <span class='def-NumberDec def-Number'>150</span> <span class='def-NumberDec def-Number'>132</span> <span class='def-NumberDec def-Number'>133</span> <span class='def-NumberDec def-Number'>148</span> <span class='def-NumberDec def-Number'>131</span> <span class='def-NumberDec def-Number'>149</span> <span class='def-NumberDec def-Number'>136</span> <span class='def-NumberDec def-Number'>137</span> <span class='def-NumberDec def-Number'>138</span> <span class='def-NumberDec def-Number'>139</span> <span class='def-NumberDec def-Number'>140</span> <span class='def-NumberDec def-Number'>141</span> <span class='def-NumberDec def-Number'>142</span>
188: <span class='def-NumberDec def-Number'>143</span> <span class='def-NumberDec def-Number'>159</span> <span class='def-NumberDec def-Number'>144</span> <span class='def-NumberDec def-Number'>145</span> <span class='def-NumberDec def-Number'>146</span> <span class='def-NumberDec def-Number'>147</span> <span class='def-NumberDec def-Number'>134</span> <span class='def-NumberDec def-Number'>130</span> <span class='def-NumberDec def-Number'>156</span> <span class='def-NumberDec def-Number'>155</span> <span class='def-NumberDec def-Number'>135</span> <span class='def-NumberDec def-Number'>152</span> <span class='def-NumberDec def-Number'>157</span> <span class='def-NumberDec def-Number'>153</span> <span class='def-NumberDec def-Number'>151</span> <span class='def-NumberDec def-Number'>219</span> ;
189: <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>CNST TKOI1</span>
190: <span class='def-NumberDec def-Number'>225</span> <span class='def-NumberDec def-Number'>226</span> <span class='def-NumberDec def-Number'>247</span> <span class='def-NumberDec def-Number'>231</span> <span class='def-NumberDec def-Number'>228</span> <span class='def-NumberDec def-Number'>229</span> <span class='def-NumberDec def-Number'>246</span> <span class='def-NumberDec def-Number'>250</span> <span class='def-NumberDec def-Number'>233</span> <span class='def-NumberDec def-Number'>234</span> <span class='def-NumberDec def-Number'>235</span> <span class='def-NumberDec def-Number'>236</span> <span class='def-NumberDec def-Number'>237</span> <span class='def-NumberDec def-Number'>238</span> <span class='def-NumberDec def-Number'>239</span> <span class='def-NumberDec def-Number'>240</span>
191: <span class='def-NumberDec def-Number'>242</span> <span class='def-NumberDec def-Number'>243</span> <span class='def-NumberDec def-Number'>244</span> <span class='def-NumberDec def-Number'>245</span> <span class='def-NumberDec def-Number'>230</span> <span class='def-NumberDec def-Number'>232</span> <span class='def-NumberDec def-Number'>227</span> <span class='def-NumberDec def-Number'>254</span> <span class='def-NumberDec def-Number'>251</span> <span class='def-NumberDec def-Number'>253</span> <span class='def-NumberDec def-Number'>255</span> <span class='def-NumberDec def-Number'>249</span> <span class='def-NumberDec def-Number'>248</span> <span class='def-NumberDec def-Number'>252</span> <span class='def-NumberDec def-Number'>224</span> <span class='def-NumberDec def-Number'>241</span>
192: <span class='def-NumberDec def-Number'>193</span> <span class='def-NumberDec def-Number'>194</span> <span class='def-NumberDec def-Number'>215</span> <span class='def-NumberDec def-Number'>199</span> <span class='def-NumberDec def-Number'>196</span> <span class='def-NumberDec def-Number'>197</span> <span class='def-NumberDec def-Number'>214</span> <span class='def-NumberDec def-Number'>218</span> <span class='def-NumberDec def-Number'>201</span> <span class='def-NumberDec def-Number'>202</span> <span class='def-NumberDec def-Number'>203</span> <span class='def-NumberDec def-Number'>204</span> <span class='def-NumberDec def-Number'>205</span> <span class='def-NumberDec def-Number'>206</span> <span class='def-NumberDec def-Number'>207</span> <span class='def-NumberDec def-Number'>208</span> ;
193: <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='dssp-dsspParam def-Parameter'>CNST TKOI2</span>
194: <span class='def-NumberDec def-Number'>210</span> <span class='def-NumberDec def-Number'>211</span> <span class='def-NumberDec def-Number'>212</span> <span class='def-NumberDec def-Number'>213</span> <span class='def-NumberDec def-Number'>198</span> <span class='def-NumberDec def-Number'>200</span> <span class='def-NumberDec def-Number'>195</span> <span class='def-NumberDec def-Number'>222</span> <span class='def-NumberDec def-Number'>219</span> <span class='def-NumberDec def-Number'>221</span> <span class='def-NumberDec def-Number'>233</span> <span class='def-NumberDec def-Number'>217</span> <span class='def-NumberDec def-Number'>216</span> <span class='def-NumberDec def-Number'>220</span> <span class='def-NumberDec def-Number'>192</span> <span class='def-NumberDec def-Number'>209</span> ;
195: 
196: <span class='dssp-dsspParam def-Parameter'>B16</span>
197: <span class='dssp-dsspComment def-Comment def-Syntax'>[копирование двоичного файла с PDP на IBM]</span>
198: : CN.<span class='dssp-dsspParam def-Parameter'>D</span>-I <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> LERR ERRR</span>  <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> MESC NOP</span>  VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CN1 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
199:   : CN1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITI SFIL OPFIL GDLFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> <span class='dssp-dsspParam def-Parameter'>!</span> LFIL <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL GSTR CLFIL
200:     DELWIND VVNAMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CN2 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
201:     : CN2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITS CONNECT CH  WOPEN CH
202:       <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL OS CH CLOSE CH DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
203: 
204: <span class='dssp-dsspComment def-Comment def-Syntax'>[ввод имени файла IBM]</span>
205: : VVNAMF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>ON</span><span class='dssp-dsspConstr def-Insertion'> ?SPALL 24</span> '' TV4  <span class='def-NumberDec def-Number'>8</span> <span class='def-NumberDec def-Number'>10</span> <span class='def-NumberDec def-Number'>1</span> <span class='def-NumberDec def-Number'>20</span> GENVVOD IBFNAME
206:   IBFNAME <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> DD*.*</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> SEL <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
207:   : TV4 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='dssp-dsspParam def-Parameter'>D</span><span class='dssp-dsspString def-String'> "Введите имя файла IBM"</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
208:   : <span class='dssp-dsspParam def-Parameter'>DD</span>*.<span class='dssp-dsspParam def-Parameter'>*</span> <span class='dssp-dsspParam def-Parameter'>DD</span><span class='dssp-dsspString def-String'> "*.DSP"</span> ;
209: 
210:  <span class='dssp-dsspComment def-Comment def-Syntax'>[ввод имени файла PDP]</span>
211:  : VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>ON</span><span class='dssp-dsspConstr def-Insertion'> ?SPALL 25</span> '' TV3  <span class='def-NumberDec def-Number'>8</span> <span class='def-NumberDec def-Number'>10</span> <span class='def-NumberDec def-Number'>1</span> <span class='def-NumberDec def-Number'>20</span> GENVVOD PBFNAME
212:    PBFNAME <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> DDPDIR0</span> ;
213:    : TV3 <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='dssp-dsspParam def-Parameter'>D</span><span class='dssp-dsspString def-String'> "Введите имя файла DVK"</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
214:    : DDPDIR0 <span class='dssp-dsspParam def-Parameter'>DD</span> PDPDIR0 ;
215: 
216: <span class='dssp-dsspParam def-Parameter'>FIX</span> <span class='def-NumberDec def-Number'>40</span> <span class='dssp-dsspParam def-Parameter'>STRING PBFNAME</span>
217: 
218: <span class='dssp-dsspComment def-Comment def-Syntax'>[копирование текстового файла с PDP на IBM]</span>
219: : CT.<span class='dssp-dsspParam def-Parameter'>D</span>-I <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> LERR ERRR</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> MESC NOP</span>
220:   VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CT1 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
221:   : CT1 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> CT10 VVNAMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CT2 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
222: <span class='dssp-dsspComment def-Comment def-Syntax'>[CT10 - ввод текстового файла в буфер]</span>
223: : CT10 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITI
224:   SFIL  OPFIL GDLFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[L]</span> <span class='dssp-dsspParam def-Parameter'>!</span> LFIL <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL GSTR CLFIL DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
225:   : CT2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITS CONNECT CH  WOPEN CH
226:     <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL KOI-ALT <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> CT3</span> <span class='dssp-dsspParam def-Parameter'>D</span> CLOSE CH DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
227:   : CT3 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B <span class='dssp-dsspParam def-Parameter'>C</span> 0A <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> CT4</span> OB CH <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
228:   : CT4 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> 0D OB CH <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
229: 
230: <span class='dssp-dsspComment def-Comment def-Syntax'>[копирование текстового файла с IBM на DEC]</span>
231: : CT.I-<span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> LERR ERRR</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> MESC NOP</span>
232:   VVNAMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CNN2 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
233:   : CNN2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITS CONNECT CH  OPEN CH <span class='def-NumberDec def-Number'>0</span> ' PFILE  LENB CH <span class='dssp-dsspParam def-Parameter'>!</span> LFIL
234:     LFIL <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> CNN3</span> <span class='dssp-dsspParam def-Parameter'>D</span> CLOSE CH <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL ALT-KOI DELWIND
235:     VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CNN1 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
236:     : CNN1 <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> WAITI SFIL WOPFIL  <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL SSTR
237:       CLFIL CUTFIL DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
238:  : CNN3 <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> IB CH <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR</span><span class='dssp-dsspExpr def-Directive'> 0D CNN4 1A CNN4 9 CNN6</span><span class='dssp-dsspWord def-Keyword'> ELSE</span><span class='dssp-dsspExpr def-Directive'> CNN5</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[a']</span> ;
239:  : CNN4 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,0D]</span> <span class='dssp-dsspParam def-Parameter'>D</span> LFIL <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspParam def-Parameter'>!</span> LFIL <span class='dssp-dsspComment def-Comment def-Syntax'>[a]</span> ;
240:  : CNN5 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,k]</span> <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!TB</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
241:  : CNN6 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,9]</span> <span class='dssp-dsspParam def-Parameter'>D</span> #   CNN5 <span class='dssp-dsspComment def-Comment def-Syntax'>[a+1]</span> ;
242: 
243: <span class='dssp-dsspComment def-Comment def-Syntax'>[передача строки в линию поблочно для записи на диск]</span>
244: : SSTR <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LBUF <span class='dssp-dsspParam def-Parameter'>/</span> <span class='dssp-dsspConstr def-Insertion'>IF+</span><span class='dssp-dsspExpr def-Directive'> 1+</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L,NBL]</span> <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> SSTR1</span> <span class='dssp-dsspParam def-Parameter'>DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
245:   : SSTR1 <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> <span class='dssp-dsspParam def-Parameter'>C</span> LBUF <span class='dssp-dsspParam def-Parameter'>MIN</span> <span class='dssp-dsspParam def-Parameter'>!</span> DLOBL <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='dssp-dsspParam def-Parameter'>!</span> AOBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span>
246:     <span class='def-NumberDec def-Number'>48</span> <span class='dssp-dsspParam def-Parameter'>!</span> COMOUT OUTBLOCK  LIB <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>=</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> LERR</span>
247:     <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> DLOBL - <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L']</span> <span class='dssp-dsspParam def-Parameter'>E2</span> DLOBL + <span class='dssp-dsspParam def-Parameter'>E2</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A',L']</span> ;
248: 
249: <span class='dssp-dsspComment def-Comment def-Syntax'>[копирование двоичного файла с IBM на DEC]</span>
250: : CN.I-<span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='dssp-dsspExpr def-Directive'>S( XORD YORD )</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> MESC NOP</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> LERR ERRR</span>
251:   <span class='def-Insertion'>ON</span><span class='dssp-dsspConstr def-Insertion'> ?SPALL 2</span> <span class='def-NumberDec def-Number'>2</span> <span class='dssp-dsspParam def-Parameter'>!</span> YORD <span class='def-NumberDec def-Number'>2</span> <span class='dssp-dsspParam def-Parameter'>!</span> XORD<span class='dssp-dsspString def-String'> "*.*"</span> SEL <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CTN2 DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
252:   : CTN2 <span class='dssp-dsspComment def-Comment def-Syntax'>[a,l]</span> WAITS CONNECT CH  OPEN CH
253:     <span class='def-NumberDec def-Number'>0</span> ' PFILE LENB CH <span class='dssp-dsspParam def-Parameter'>!</span> LFIL LFIL IS CH CLOSE CH DELWIND
254:     VVNOMF <span class='dssp-dsspComment def-Comment def-Syntax'>[f]</span> <span class='dssp-dsspParam def-Parameter'>C</span> <span class='dssp-dsspWord def-Keyword'>BR+</span><span class='dssp-dsspExpr def-Directive'> CTN1 D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
255:     : CTN1 <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> WAITI SFIL WOPFIL <span class='def-NumberDec def-Number'>0</span> ' PFILE LFIL SSTR
256:       CLFIL CUTFIL DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
257: 
258: :: <span class='dssp-dsspParam def-Parameter'>TRAP LERR</span> <span class='dssp-dsspParam def-Parameter'>NOP</span>
259: 
260: <span class='def-NumberDec def-Number'>10</span> %IF
261: <span class='dssp-dsspComment def-Comment def-Syntax'>[*********   PDP DIR ***********]</span>
262: <span class='dssp-dsspParam def-Parameter'>B10</span>
263: : PDPDIR PDPDIR0 <span class='dssp-dsspParam def-Parameter'>DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
264: 
265: <span class='dssp-dsspComment def-Comment def-Syntax'>[PDPDIR0 - получение списка имен файлов на ДВК]</span>
266: : PDPDIR0 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-Insertion'>EON</span><span class='dssp-dsspConstr def-Insertion'> NOF NOP</span> <span class='def-NumberDec def-Number'>0</span> CALLFS <span class='dssp-dsspParam def-Parameter'>!0</span> QFILES MFS0 MFS1 MFS2 MFS3 <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
267: 
268: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
269: 
270: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS0 - поиск первого вхождения, если нет - NOF]</span>
271: : MFS0 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>0</span> ' IBUF <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF INBLOCK DLIBL <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> NOF</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
272: 
273: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS1 - просмотр директория, заполнение данных]</span>
274: : MFS1 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> MQFILES <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> MFS11</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
275: 
276: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS2 - сортировка имен файлов методом пузырька]</span>
277: : MFS2 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> QFILES <span class='dssp-dsspParam def-Parameter'>C</span> <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> MFS20</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
278: 
279: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS3 - выдача меню ]</span>
280: : MFS3 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span><span class='dssp-dsspString def-String'> " Выберите файл"</span> '' MFS3P '' MFS3T <span class='def-NumberDec def-Number'>0</span> <span class='def-NumberDec def-Number'>14</span> <span class='def-NumberDec def-Number'>27</span> <span class='def-NumberDec def-Number'>10</span> L1PFILE <span class='def-NumberDec def-Number'>10</span> + <span class='def-NumberDec def-Number'>0</span> QFILES
281:   GLBMEN2 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> NOMFILE AFNAME <span class='dssp-dsspComment def-Comment def-Syntax'>[Aname]</span> <span class='dssp-dsspParam def-Parameter'>SP</span> <span class='dssp-dsspParam def-Parameter'>C2</span> L1PFILE <span class='dssp-dsspParam def-Parameter'>SRCHB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[Aname,Lname]</span> ;
282: 
283: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
284: <span class='dssp-dsspParam def-Parameter'>B10</span>
285: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS11 - заполнение массива с файловыми именами]</span>
286: : MFS11 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[заполненный DTA]</span>  QFILES L1PFILE <span class='dssp-dsspParam def-Parameter'>*</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[index]</span>
287:   <span class='dssp-dsspParam def-Parameter'>!1+</span> QFILES <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> QFILES <span class='dssp-dsspParam def-Parameter'>!</span> FLSPTR <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> MFS2NAME <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> SRCHNXT <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
288: 
289: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS2NAME - пересылка имени]</span>
290: : MFS2NAME <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='dssp-dsspParam def-Parameter'>SP</span> QFILES AFNAME L1PFILE <span class='dssp-dsspParam def-Parameter'>!</span><span class='dssp-dsspParam def-Parameter'>!</span><span class='dssp-dsspParam def-Parameter'>!MB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span>
291:   AIBUF <span class='dssp-dsspComment def-Comment def-Syntax'>[Адрес имени]</span> DLIBL <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> QFILES AFNAME <span class='dssp-dsspParam def-Parameter'>!SB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
292: 
293: <span class='dssp-dsspParam def-Parameter'>B16</span>
294: <span class='dssp-dsspComment def-Comment def-Syntax'>[SRCHNXT - поиск следующего входа и заполнение DTA, выход если нет]</span>
295: : SRCHNXT <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> <span class='def-NumberDec def-Number'>0</span> ' IBUF <span class='dssp-dsspParam def-Parameter'>!</span> AIBUF INBLOCK DLIBL EX0 <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
296: 
297: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
298: <span class='dssp-dsspParam def-Parameter'>B10</span>
299: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS20 - булыжник тонет (последнее по алфавиту имя) на глубину fdeep]</span>
300: : MFS20 <span class='dssp-dsspComment def-Comment def-Syntax'>[fdeep]</span> <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> MFS21</span> <span class='dssp-dsspParam def-Parameter'>D</span> <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspComment def-Comment def-Syntax'>[fdeep-1]</span> ;
301: 
302: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS21 - упорядочение двух имен с глубины cdeep и cdeep-1]</span>
303: : MFS21 <span class='dssp-dsspComment def-Comment def-Syntax'>[cdeep]</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[cdeep+1]</span> CMP-<span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspConstr def-Insertion'>IF0</span><span class='dssp-dsspExpr def-Directive'> XCHG-1</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[cdeep+1]</span> ;
304: 
305: <span class='dssp-dsspComment def-Comment def-Syntax'>[CMP-1 - сравнение i-го и i-1-го имени, 1-упорядочены, 0-иначе]</span>
306: : CMP-<span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspParam def-Parameter'>C2</span> AFNAME <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='def-NumberDec def-Number'>1</span>- AFNAME <span class='dssp-dsspComment def-Comment def-Syntax'>[i,1,Ai,Ai-1]</span>
307:   L1PFILE <span class='dssp-dsspConstr def-Insertion'>DO</span><span class='dssp-dsspExpr def-Directive'> CMP12</span> <span class='dssp-dsspParam def-Parameter'>DD</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[i,1/0]</span> ;
308: : CMP12 <span class='dssp-dsspComment def-Comment def-Syntax'>[1,Ai,Ai-1]</span> <span class='dssp-dsspParam def-Parameter'>C</span> @B #  <span class='dssp-dsspParam def-Parameter'>=</span> EX+
309:   <span class='dssp-dsspParam def-Parameter'>C2</span> @B <span class='dssp-dsspParam def-Parameter'>C2</span> @B - <span class='dssp-dsspWord def-Keyword'>BRS</span><span class='dssp-dsspExpr def-Directive'> CMP13 NOP EX</span> <span class='dssp-dsspParam def-Parameter'>E2</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspParam def-Parameter'>E2</span> <span class='def-NumberDec def-Number'>1</span>+ <span class='dssp-dsspComment def-Comment def-Syntax'>[,,]</span> ;
310: : CMP13 <span class='dssp-dsspParam def-Parameter'>T0</span> <span class='dssp-dsspParam def-Parameter'>E3</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[0,*,*]</span> EX ;
311: 
312: <span class='dssp-dsspComment def-Comment def-Syntax'>[XCHG-1 - обмен i-го и i-1-го имени]</span>
313: : XCHG-<span class='def-NumberDec def-Number'>1</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='dssp-dsspParam def-Parameter'>C</span> FLSPTR <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='def-NumberDec def-Number'>1</span>- FLSPTR <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>!</span> FLSPTR <span class='dssp-dsspParam def-Parameter'>C2</span> <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspParam def-Parameter'>!</span> FLSPTR <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> ;
314: 
315: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
316: <span class='dssp-dsspParam def-Parameter'>B10</span>
317: <span class='dssp-dsspComment def-Comment def-Syntax'>[MFS3P - выбрано i-е имя файла]</span>
318: : MFS3P <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='dssp-dsspParam def-Parameter'>!</span> NOMFILE DELWIND <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span> ;
319: 
320: <span class='dssp-dsspComment def-Comment def-Syntax'>[ WORD VAR NOMFILE ]</span>
321: : MFS3T <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> <span class='dssp-dsspParam def-Parameter'>!</span> NOMFILE <span class='dssp-dsspComment def-Comment def-Syntax'>[]</span><span class='dssp-dsspString def-String'> "                    "</span> #  <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>C3</span> <span class='dssp-dsspParam def-Parameter'>!</span><span class='dssp-dsspParam def-Parameter'>!</span><span class='dssp-dsspParam def-Parameter'>!MB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span>
322:   NOMFILE AFNAME L1PFILE <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L,Aname,Lname]</span> <span class='dssp-dsspParam def-Parameter'>C4</span> <span class='def-NumberDec def-Number'>4</span>+ <span class='dssp-dsspParam def-Parameter'>!SB</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[A,L]</span> ;
323: 
324: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
325: <span class='dssp-dsspComment def-Comment def-Syntax'>[AFNAME - получение адреса имени файла в FLSNAME для файла i]</span>
326: : AFNAME <span class='dssp-dsspComment def-Comment def-Syntax'>[i]</span> FLSPTR ' FLSNAME <span class='dssp-dsspComment def-Comment def-Syntax'>[A]</span> ;
327: <span class='dssp-dsspComment def-Comment def-Syntax'>[**********************************************]</span>
328: 
329: <span class='dssp-dsspParam def-Parameter'>B10</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[ДАННЫЕ]</span>
330: <span class='dssp-dsspComment def-Comment def-Syntax'>[MQFILES - максимально допустимое число файлов]</span>
331: <span class='def-NumberDec def-Number'>200</span> <span class='dssp-dsspParam def-Parameter'>VALUE MQFILES</span>
332: 
333: <span class='dssp-dsspComment def-Comment def-Syntax'>[QFILES - текущее число обрабатываемых или найденных имен файлов]</span>
334: <span class='dssp-dsspParam def-Parameter'>WORD</span> <span class='dssp-dsspParam def-Parameter'>VAR QFILES</span>
335: 
336: <span class='dssp-dsspComment def-Comment def-Syntax'>[L1PFILE - число байтов, отводимое под один файл]</span>
337: <span class='dssp-dsspComment def-Comment def-Syntax'>[7 - длина имени]</span>
338: <span class='def-NumberDec def-Number'>7</span> <span class='dssp-dsspParam def-Parameter'>VALUE L1PFILE</span> <span class='dssp-dsspComment def-Comment def-Syntax'>[только имя]</span> ;
339: 
340: <span class='dssp-dsspComment def-Comment def-Syntax'>[FLSNAME - вектор, где хранятся имена файлов, всего QFILES &lt; MQFILES,</span>
341: <span class='dssp-dsspComment def-Comment def-Syntax'>           на каждый файл отводится L1PFILE (от 0)]</span>
342: MQFILES L1PFILE <span class='dssp-dsspParam def-Parameter'>*</span> <span class='dssp-dsspParam def-Parameter'>BYTE</span> <span class='def-NumberDec def-Number'>1</span>- <span class='dssp-dsspParam def-Parameter'>VCTR FLSNAME</span>
343: 
344: <span class='dssp-dsspComment def-Comment def-Syntax'>[FLSPTR - вектор, где хранятся указатели на FLSNAME -</span>
345: <span class='dssp-dsspComment def-Comment def-Syntax'>          используетс и при сортировке и при доступе (1 .. QFILES)]</span>
346: <span class='dssp-dsspParam def-Parameter'>WORD</span> MQFILES <span class='dssp-dsspParam def-Parameter'>VCTR FLSPTR</span>
347: %FI
348: 
349: <span class='dssp-dsspParam def-Parameter'>UNDEF</span>
350: 
